import{d as k,e as n,x as N,A as d,o as p,C as P,w as i,k as f,t as v,g as S,b as a,h as V,v as B,n as M,c as $,i as E,f as F,a as T,_ as D,V as O,m as R,l as z,S as A}from"./main-c1f62c61.js";import{F as l}from"./formMode-f60a729f.js";const I=["onSubmit"],L={class:"flex flex-wrap items-center"},U=a("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Name",-1),W={key:0,class:"w-full ml-24 text-red-500 text-sm"},j=["disabled"],J=k({__name:"PermissionForm",emits:["close"],setup(q,{emit:_}){const u=R(),b=z(),e=n({}),c=n(l.Create),t=n(!1),s=n({});N(()=>{u.path.endsWith("/edit")&&(c.value=l.Edit,h(u.params.id))});const h=async o=>{const{data:r}=await d.get(`/api/permissions/${o}`);e.value=r.data},w=async()=>{t.value=!0;try{c.value===l.Create?await y():await x(),A.fire()}catch(o){s.value=o.response.data.errors??{}}t.value=!1},y=async()=>{await d.post("/api/permissions",e.value),g()},x=async()=>{await d.patch(`/api/permissions/${e.value.id}`,e.value),m()},g=()=>{e.value={},s.value=[]},m=()=>{_("close"),b.back()};return(o,r)=>(p(),P(O,null,{header:i(()=>[f(v(c.value===S(l).Create?"Create New Permission":"Edit Permission"),1)]),body:i(()=>[a("form",{id:"form",onSubmit:F(w,["prevent","stop"])},[a("div",L,[U,V(a("input",{"onUpdate:modelValue":r[0]||(r[0]=C=>e.value.name=C),class:M(["flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500",{"!border-red-500":s.value.hasOwnProperty("name")}])},null,2),[[B,e.value.name]]),s.value.hasOwnProperty("name")?(p(),$("p",W,v(s.value.name[0]),1)):E("",!0)])],40,I)]),footer:i(()=>[a("button",{class:"btn-blue mr-2",disabled:t.value,form:"form"},[T(D,{"is-loading":t.value},{default:i(()=>[f("Save")]),_:1},8,["is-loading"])],8,j),a("button",{onClick:m,class:"btn-gray"},"Cancel")]),_:1}))}});export{J as default};
