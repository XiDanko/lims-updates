import{d as V,g as m,x as $,o as s,c as n,a as _,j as v,v as w,b as e,a1 as x,Q as C,r as M,V as B,w as S,m as T,i as p,k as y,F as k,a2 as U,t as f,a3 as F,a4 as K,T as z,Z as D,a0 as N}from"./main-cee2eb24.js";import{M as Q}from"./Master-e24133cb.js";import{_ as j}from"./Paginator.vue_vue_type_script_setup_true_lang-fc9e564e.js";import{u as I}from"./urlQueryManager-ab4c0999.js";import{A as P}from"./ActivityLogSidebar-55244b79.js";import{_ as q}from"./BranchFilter.vue_vue_type_script_setup_true_lang-d1bfbfa5.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./multiselect-97a39018.js";const E={class:"ml-auto flex items-center gap-2"},H=["onKeyup"],R=["onKeyup"],Z=V({__name:"SuggestionsFilter",emits:["change"],setup(A,{emit:h}){const d=new URLSearchParams(location.search),u=m(""),r=m(""),a=m("");m(""),$(()=>{i()});const i=()=>{u.value=d.get("branchId")??"",a.value=d.get("type")??"",r.value=d.get("content")??""},g=()=>{const l=`branchId=${u.value}&type=${a.value}&content=${r.value}&page=1`;h("change",l)};return(l,t)=>(s(),n("div",E,[_(q,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=o=>u.value=o),onChange:g},null,8,["modelValue"]),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>a.value=o),onKeyup:x(g,["enter"]),type:"text",placeholder:"Suggestion type",class:"w-56 rounded border border-gray-300 p-1.5 focus:border-blue-500"},null,40,H),[[w,a.value]]),v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.value=o),onKeyup:x(g,["enter"]),type:"text",placeholder:"Suggestion content",class:"w-56 rounded border border-gray-300 p-1.5 focus:border-blue-500"},null,40,R),[[w,r.value]])]))}}),G={class:"mb-5 flex items-center"},J={class:"pr-1 h-[calc(100vh-15.7rem)] overflow-y-auto"},O={class:"w-full"},W={class:"sticky top-0 z-10 text-left"},X=e("th",{class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},"Type",-1),Y=e("th",{class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},"Content",-1),ee=e("th",{class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},"Branch",-1),te={key:0,class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},oe={class:"transition even:bg-gray-100"},se={class:"border border-gray-200 px-2 py-1"},ne={class:"border border-gray-200 px-2 py-1"},re={class:"border border-gray-200 px-2 py-1"},ae={key:0,class:"border border-gray-200 px-2 py-1 text-center"},ie={class:"flex items-center justify-center gap-3"},le=["onClick"],ce=e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),de=[ce],ue=["onClick"],pe=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"h-5 w-5"},[e("path",{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"})],-1),_e=[pe],xe=V({__name:"Suggestions",setup(A){const h=m([]),d=m({}),{updateUrlQuery:u}=I(),{hasPermissionTo:r,hasAnyPermission:a}=z();$(()=>i(location.search));const i=async l=>{const t=await u(l),{data:o}=await C.get(`/api/suggestions?${t}`);h.value=o.data,d.value=o.meta},g=async l=>{const{isConfirmed:t}=await D.fire();t&&(await C.delete(`/api/suggestions/${l}`),N.fire(),await i(location.search))};return(l,t)=>{const o=M("router-view"),b=B("tip");return s(),n(k,null,[_(o,{onClose:i}),_(Q,null,{header:S(()=>[T("Suggestions")]),body:S(()=>[e("div",G,[_(Z,{onChange:i})]),e("section",J,[e("table",O,[e("thead",null,[e("tr",W,[X,Y,ee,p(a)("Suggestion.delete","ActivityLog.list")?(s(),n("th",te)):y("",!0)])]),e("tbody",null,[(s(!0),n(k,null,U(h.value,c=>(s(),n("tr",oe,[e("td",se,f(c.type),1),e("td",ne,f(c.content),1),e("td",re,f(c.branch.name),1),p(a)("Suggestion.delete","ActivityLog.list")?(s(),n("td",ae,[e("div",ie,[p(r)("Suggestion.delete")?v((s(),n("button",{key:0,onClick:L=>g(c.id),class:"cursor-pointer text-red-500"},de,8,le)),[[b,"Delete"]]):y("",!0),p(r)("ActivityLog.list")?v((s(),n("button",{key:1,onClick:L=>p(F).emit(p(K).Show,c.id),class:"cursor-pointer text-gray-600"},_e,8,ue)),[[b,"View Activities"]]):y("",!0)])])):y("",!0)]))),256))])])])]),_:1}),_(j,{data:d.value,onChange:t[0]||(t[0]=c=>i(`page=${c}`)),class:"mt-3"},null,8,["data"]),_(P)],64)}}});export{xe as default};
