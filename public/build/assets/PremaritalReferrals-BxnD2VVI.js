import{d as Q,e as h,x as Y,y as K,o as i,c,a as f,b as e,h as y,v as L,a0 as U,t as s,g as t,V as q,F as R,a1 as N,w as z,p as o,Q as H,r as E,U as O,k as W,i as P,l as G,n as B,f as k,a2 as J,a3 as X,T as Z,$ as F,Y as ee}from"./main-BgbWFIXK.js";import{M as te}from"./Master-Bb3753-s.js";import{_ as se}from"./Paginator.vue_vue_type_script_setup_true_lang-CkZcUYNX.js";import{u as oe}from"./urlQueryManager-CZwFgJ7t.js";import{i as ae}from"./index.es-Bi00NAuK.js";import{d as re}from"./datepickerPresets-DMjR3aNY.js";import{_ as ne}from"./BranchFilter.vue_vue_type_script_setup_true_lang-Cg0zFa3A.js";import{P as I}from"./premaritalReferralStatus-CQMWPAtf.js";import{A as le}from"./ActivityLogSidebar-DZ3mPV78.js";import{u as ie,P as T}from"./printService-BW6jBw-w.js";import{u as ce}from"./printTemplateManager-qiRkbBE7.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./multiselect-DeMhawmc.js";import"./printTemplateType-BiK7zB0k.js";const de={class:"flex flex-wrap items-center justify-end gap-2"},ue={class:"relative flex-1 min-w-[11rem]"},pe={class:"label"},me={class:"relative flex-1 min-w-[11rem]"},he={class:"label"},_e={class:"relative flex-1 min-w-[11rem]"},ve={class:"label"},ge={class:"relative flex-1"},be={value:""},fe=["value"],ye={class:"label"},we={class:"relative flex-1 min-w-[14rem]"},xe={class:"label"},$e=Q({__name:"PremaritalReferralsFilter",emits:["change"],setup(j,{emit:D}){const w=D,u=new URLSearchParams(location.search),v=h(""),g=h(""),x=h(""),$=h("");h("");const C=h(""),d=h([null,null]);Y(()=>S());const b=K(()=>d.value[0]===null||d.value[1]===null?"":`${d.value[0]}~${d.value[1]}`),S=()=>{g.value=u.get("visitNumber")??"",v.value=u.get("branchId")??"",x.value=u.get("status")??"",$.value=u.get("name")??"",C.value=u.get("phoneNumber")??"",u.get("dateRange")&&(d.value=u.get("dateRange").split("~"))},_=()=>{let V=`branchId=${v.value}&visitNumber=${g.value}&name=${$.value}&phoneNumber=${C.value}&status=${x.value}&dateRange=${b.value}&page=1`;w("change",V)};return(V,r)=>(i(),c("div",de,[f(ne,{modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=n=>v.value=n),onChange:_},null,8,["modelValue"]),e("div",ue,[y(e("input",{"onUpdate:modelValue":r[1]||(r[1]=n=>g.value=n),onKeyup:U(_,["enter"]),type:"text",class:"input-sm peer"},null,544),[[L,g.value]]),e("label",pe,s(t(o)("Registration Number")),1)]),e("div",me,[y(e("input",{"onUpdate:modelValue":r[2]||(r[2]=n=>$.value=n),onKeyup:U(_,["enter"]),type:"text",class:"input-sm peer"},null,544),[[L,$.value]]),e("label",he,s(t(o)("Name")),1)]),e("div",_e,[y(e("input",{"onUpdate:modelValue":r[3]||(r[3]=n=>C.value=n),onKeyup:U(_,["enter"]),type:"text",class:"input-sm peer"},null,544),[[L,C.value]]),e("label",ve,s(t(o)("Phone Number")),1)]),e("div",ge,[y(e("select",{"onUpdate:modelValue":r[4]||(r[4]=n=>x.value=n),onChange:_,class:"input-sm peer"},[e("option",be,s(t(o)("All")),1),(i(!0),c(R,null,N(t(I),n=>(i(),c("option",{value:n},s(t(o)(n.startCase())),9,fe))),256))],544),[[q,x.value]]),e("label",ye,s(t(o)("Status")),1)]),e("div",we,[f(t(ae),{range:"",lang:{formatLocale:{firstDayOfWeek:6}},type:"date","value-type":"format",format:"YYYY-MM-DD",shortcuts:t(re),value:d.value,"onUpdate:value":r[5]||(r[5]=n=>d.value=n),onChange:_,class:"w-full peer","input-class":"input-sm pt-0.5"},{"icon-calendar":z(()=>[]),_:1},8,["shortcuts","value"]),e("label",xe,s(t(o)("Date")),1)])]))}}),Ce={class:"mb-5 flex items-start gap-1"},ke={class:"pe-1 h-[calc(100vh-15.7rem)] overflow-y-auto"},Pe={class:"w-full"},Re={class:"sticky top-0 z-10 ltr:text-left rtl:text-right"},Ve={class:"bg-gray-600 p-2 font-semibold text-white rounded-ss"},Me={class:"bg-gray-600 p-2 font-semibold text-white"},Ne={class:"bg-gray-600 p-2 font-semibold text-white"},De={class:"bg-gray-600 p-2 font-semibold text-white"},Se={class:"bg-gray-600 p-2 font-semibold text-white"},Ae={class:"bg-gray-600 p-2 font-semibold text-white"},Le={class:"bg-gray-600 p-2 font-semibold text-white"},Ue={class:"bg-gray-600 p-2 font-semibold text-white"},Be={class:"bg-gray-600 p-2 font-semibold text-white"},Te={class:"bg-gray-600 p-2 font-semibold text-white"},ze={key:0,class:"bg-gray-600 p-2 font-semibold text-white rounded-se"},Ie=["onClick"],He={class:"border border-gray-200 p-1"},Fe={class:"border border-gray-200 p-1"},Qe={class:"border border-gray-200 p-1"},Ye={class:"border border-gray-200 p-1"},je={class:"flex flex-wrap gap-1"},Ke={class:"inline-block rounded bg-teal-500 px-1 text-xs font-bold text-white group-hover:bg-white group-hover:text-emerald-500"},qe={class:"border border-gray-200 p-1"},Ee={class:"flex items-center gap-3"},Oe=["href"],We={class:"border border-gray-200 p-1"},Ge={class:"border border-gray-200 p-1"},Je={class:"border border-gray-200 p-1"},Xe={class:"border border-gray-200 p-1"},Ze={key:0,class:"border border-gray-200 px-2 py-1 text-center"},et={class:"flex justify-center gap-3"},tt=["onClick"],st=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"},null,-1),ot=[st],at=["onClick"],rt=e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),nt=[rt],lt=["onClick"],it=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"h-5 w-5"},[e("path",{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"})],-1),ct=[it],Ct=Q({__name:"PremaritalReferrals",setup(j){const{updateUrlQuery:D}=oe(),{hasPermissionTo:w,hasAnyPermission:u}=Z(),v=h([]),g=h({}),x=G(),{hasDefaultPremaritalReferralTemplate:$}=ce(),C=ie(),d=h([]);Y(()=>b(location.search));const b=async l=>{const p=await D(l),{data:M}=await H.get(`/api/premarital/referrals?${p}`);v.value=M.data,g.value=M.meta},S=l=>l===I.Pending?"border-s-gray-300":"border-s-emerald-500",_=l=>l===I.Pending?"hover:bg-gray-300 hover:text-black":"hover:bg-emerald-500 hover:text-white",V=l=>{w("PremaritalReferral.update")&&x.push(`/premarital/referrals/${l}/edit`)},r=async(l,p)=>{d.value[l.id]!==!0&&(d.value[l.id]=!0,await C.premaritalReferral(l.id,p,`${l.personalInformation.name}-referral`),F.fire(),d.value[l.id]=!1)},n=async l=>{const{isConfirmed:p}=await ee.fire();p&&(await H.delete(`/api/premarital/referrals/${l}`),F.fire(),b(location.search))};return(l,p)=>{const M=E("router-view"),A=O("tip");return i(),c(R,null,[f(M,{onClose:b}),f(te,null,{header:z(()=>[W(s(t(o)("Premarital Referrals")),1)]),body:z(()=>[e("div",Ce,[f($e,{onChange:b})]),e("section",ke,[e("table",Pe,[e("thead",null,[e("tr",Re,[e("th",Ve,s(t(o)("No.")),1),e("th",Me,s(t(o)("Name")),1),e("th",Ne,s(t(o)("Hospital")),1),e("th",De,s(t(o)("Test")),1),e("th",Se,s(t(o)("Procedures")),1),e("th",Ae,s(t(o)("Attachments")),1),e("th",Le,s(t(o)("Status")),1),e("th",Ue,s(t(o)("Date")),1),e("th",Be,s(t(o)("Receive Date")),1),e("th",Te,s(t(o)("Branch")),1),t(u)("ActivityLog.list","PremaritalReferral.delete","PremaritalReferral.print")?(i(),c("th",ze)):P("",!0)])]),e("tbody",null,[(i(!0),c(R,null,N(v.value,a=>(i(),c("tr",{class:B(["cursor-pointer transition group even:bg-gray-100",_(a.status)]),onClick:m=>V(a.id)},[e("td",{class:B(["border border-gray-200 p-1 border-s-[5px]",S(a.status)])},s(a.premaritalVisit.number),3),e("td",He,s(a.personalInformation.name),1),e("td",Fe,s(a.hospital),1),e("td",Qe,s(a.order.test.name),1),e("td",Ye,[e("div",je,[(i(!0),c(R,null,N(a.procedures,m=>(i(),c("span",Ke,s(m),1))),256))])]),e("td",qe,[e("div",Ee,[(i(!0),c(R,null,N(a.attachments,m=>(i(),c("a",{onClick:p[0]||(p[0]=k(()=>{},["stop"])),href:m.path,target:"_blank",class:"text-blue-500 underline group-hover:text-white"},s(t(o)(m.type.startCase())),9,Oe))),256))])]),e("td",We,s(t(o)(a.status.startCase())),1),e("td",Ge,s(a.date),1),e("td",Je,s(a.receiveDate),1),e("td",Xe,s(a.branch.name),1),t(u)("ActivityLog.list","PremaritalReferral.delete","PremaritalReferral.print")?(i(),c("td",Ze,[e("div",et,[t(w)("PremaritalReferral.print")&&t($)(a.branchId)?y((i(),c("svg",{key:0,class:B(["h-6 w-6 cursor-pointer text-blue-500 group-hover:text-white",{"cursor-not-allowed opacity-50":d.value[a.id]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",onClick:[k(m=>r(a,t(T).Direct),["exact","stop"]),k(m=>r(a,t(T).Modal),["ctrl","stop"]),k(m=>r(a,t(T).Download),["shift","stop"])]},ot,10,tt)),[[A,t(o)("Print")]]):P("",!0),t(w)("PremaritalReferral.delete")?y((i(),c("button",{key:1,onClick:k(m=>n(a.id),["stop"]),class:"cursor-pointer text-red-500 group-hover:text-white"},nt,8,at)),[[A,t(o)("Delete")]]):P("",!0),t(w)("ActivityLog.list")?y((i(),c("button",{key:2,onClick:k(m=>t(J).emit(t(X).Show,a.id),["stop"]),class:"cursor-pointer text-gray-600 group-hover:text-white"},ct,8,lt)),[[A,t(o)("View Activities")]]):P("",!0)])])):P("",!0)],10,Ie))),256))])])])]),_:1}),f(se,{data:g.value,onChange:p[1]||(p[1]=a=>b(`page=${a}`)),class:"mt-3"},null,8,["data"]),f(le)],64)}}});export{Ct as default};
