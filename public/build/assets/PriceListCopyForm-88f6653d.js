import{d as O,u as S,e as v,x as B,A as P,B as D,o,C as U,w as f,k as w,b as a,g as d,c as l,a as y,n as c,t as i,i as n,h as k,v as I,f as N,_ as z,V as A,m as M,l as T,S as $}from"./main-c1f62c61.js";import{s as h}from"./multiselect-ffe70d49.js";const R=["onSubmit"],E={key:0,class:"col-span-2 flex flex-wrap mb-3"},F=a("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Branch",-1),j={key:0,class:"ml-24 w-full text-red-500 text-sm"},q={class:"col-span-2 flex flex-wrap mb-3"},G=a("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Source",-1),H={key:0,class:"ml-24 w-full text-red-500 text-sm"},J={class:"col-span-2 flex flex-wrap mb-3"},K=a("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Destination",-1),Q={key:0,class:"ml-24 w-full text-red-500 text-sm"},W={class:"flex flex-wrap mb-3"},X=a("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Price",-1),Y=a("span",{class:"py-2 px-4 border border-gray-300 border-l-0 rounded-r bg-gray-100"},"%",-1),Z={key:0,class:"ml-24 w-full text-red-500 text-sm"},ee={class:"flex flex-wrap"},ae=a("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Discount",-1),re=a("span",{class:"py-2 px-4 border border-gray-300 border-l-0 rounded-r bg-gray-100"},"%",-1),se={key:0,class:"ml-24 w-full text-red-500 text-sm"},te=["disabled"],de=O({__name:"PriceListCopyForm",setup(oe){M();const V=T(),u=S().user.branches,p=v(!1),e=v({}),b=v([]),r=v({});B(()=>{u.length===1&&(r.value.branchId=u[0].id,g())});const g=async()=>{const{data:m}=await P.get(`/api/price-lists/list?branchId=${r.value.branchId}`);b.value=m.data},L=()=>{b.value=[],r.value={branchId:r.value.branchId}},C=async()=>{p.value=!0;try{await P.post("/api/tools/copy-price-list",r.value),$.fire(),_()}catch(m){e.value=m.response.data.errors??{}}p.value=!1},_=()=>{V.back()};return(m,s)=>{const x=D("maska");return o(),U(A,null,{header:f(()=>[w("Copy Price List")]),body:f(()=>[a("form",{id:"form",onSubmit:N(C,["prevent","stop"])},[d(u).length>1?(o(),l("div",E,[F,y(d(h),{modelValue:r.value.branchId,"onUpdate:modelValue":s[0]||(s[0]=t=>r.value.branchId=t),options:d(u),onSelect:g,onChange:L,searchable:!0,"value-prop":"id","track-by":"name",label:"name","can-deselect":!1,"can-clear":!1,class:c(["flex-1 border border-gray-300 !rounded-r",{"!border-red-500":e.value.hasOwnProperty("branchId")}])},null,8,["modelValue","options","class"]),e.value.hasOwnProperty("branchId")?(o(),l("p",j,i(e.value.branchId[0]),1)):n("",!0)])):n("",!0),a("div",q,[G,y(d(h),{modelValue:r.value.sourcePriceListId,"onUpdate:modelValue":s[1]||(s[1]=t=>r.value.sourcePriceListId=t),options:b.value,searchable:!0,"value-prop":"id","track-by":"name",label:"name","can-clear":!1,"can-deselect":!1,class:c(["flex-1 border border-gray-300 !rounded-r",{"!border-red-500":e.value.hasOwnProperty("sourcePriceListId")}])},null,8,["modelValue","options","class"]),e.value.hasOwnProperty("sourcePriceListId")?(o(),l("p",H,i(e.value.sourcePriceListId[0]),1)):n("",!0)]),a("div",J,[K,y(d(h),{modelValue:r.value.destinationPriceListId,"onUpdate:modelValue":s[2]||(s[2]=t=>r.value.destinationPriceListId=t),options:b.value,searchable:!0,"value-prop":"id","track-by":"name",label:"name","can-clear":!1,"can-deselect":!1,class:c(["flex-1 border border-gray-300 !rounded-r",{"!border-red-500":e.value.hasOwnProperty("destinationPriceListId")}])},null,8,["modelValue","options","class"]),e.value.hasOwnProperty("destinationPriceListId")?(o(),l("p",Q,i(e.value.destinationPriceListId[0]),1)):n("",!0)]),a("div",W,[X,k(a("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>r.value.pricePercentage=t),size:"1","data-maska":"0","data-maska-tokens":"0:[0-9]:multiple",class:c(["flex-1 p-2 border border-gray-300 focus:border-blue-500",{"!border-red-500":e.value.hasOwnProperty("pricePercentage")}])},null,2),[[I,r.value.pricePercentage],[x]]),Y,e.value.hasOwnProperty("pricePercentage")?(o(),l("p",Z,i(e.value.pricePercentage[0]),1)):n("",!0)]),a("div",ee,[ae,k(a("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>r.value.discountPercentage=t),size:"1","data-maska":"0","data-maska-tokens":"0:[0-9]:multiple",class:c(["flex-1 p-2 border border-gray-300 focus:border-blue-500",{"!border-red-500":e.value.hasOwnProperty("discountPercentage")}])},null,2),[[I,r.value.discountPercentage],[x]]),re,e.value.hasOwnProperty("discountPercentage")?(o(),l("p",se,i(e.value.discountPercentage[0]),1)):n("",!0)])],40,R)]),footer:f(()=>[a("button",{class:"btn-blue mr-2",disabled:p.value,form:"form"},[y(z,{"is-loading":p.value},{default:f(()=>[w("Save")]),_:1},8,["is-loading"])],8,te),a("button",{onClick:_,class:"btn-gray"},"Cancel")]),_:1})}}});export{de as default};
