import{d as F,f as M,e as U,g as m,u as $,x as D,Q as y,V as E,o,R as g,w as p,m as x,t as b,i as l,b as r,c as v,a as k,n as h,k as d,j as V,v as C,h as R,_ as z,a5 as X,a0 as j}from"./main-cee2eb24.js";import{b as L}from"./toggle-afba85dd.js";import{s as Q}from"./multiselect-97a39018.js";import{F as f}from"./formMode-f60a729f.js";const W=["onSubmit"],Z={key:0,class:"mb-3 flex flex-wrap items-center"},q=r("span",{class:"w-24 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Branch",-1),G={key:0,class:"ml-24 w-full text-sm text-red-500"},H={class:"mb-3 flex flex-wrap items-center"},J=r("span",{class:"w-24 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Code",-1),K={key:0,class:"ml-24 w-full text-sm text-red-500"},Y={class:"flex flex-wrap items-center"},ee=r("span",{class:"w-24 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Name",-1),ae={key:0,class:"ml-24 w-full text-sm text-red-500"},se=["disabled"],ne=F({__name:"SampleTypeForm",emits:["close"],setup(re,{emit:S}){const _=M(),I=U(),e=m({}),n=$().user.branches,u=m(f.Create),c=m(!1),a=m({});D(()=>{n.length===1&&(e.value.branchId=n[0].id),_.path.endsWith("/edit")&&(u.value=f.Edit,T(_.params.id))});const T=async i=>{const{data:s}=await y.get(`/api/sample-types/${i}`);e.value=s.data},N=async()=>{c.value=!0;try{u.value===f.Create?await O():await P(),j.fire()}catch(i){a.value=i.response.data.errors??{}}c.value=!1},O=async()=>{await y.post("/api/sample-types",e.value),B()},P=async()=>{await y.patch(`/api/sample-types/${e.value.id}`,e.value),w()},B=()=>{e.value={branchId:e.value.branchId},a.value=[]},w=()=>{S("close"),I.back()};return(i,s)=>{const A=E("maska");return o(),g(X,null,{header:p(()=>[x(b(u.value===l(f).Create?"Create New Sample Type":"Edit Sample Type"),1)]),body:p(()=>[r("form",{id:"form",onSubmit:R(N,["prevent","stop"])},[l(n).length>1?(o(),v("div",Z,[q,k(l(Q),{modelValue:e.value.branchId,"onUpdate:modelValue":s[0]||(s[0]=t=>e.value.branchId=t),options:l(n),searchable:!0,"value-prop":"id","track-by":"searchableForm",label:"name","can-deselect":!1,"can-clear":!1,class:h(["flex-1 border border-gray-300 !rounded-r",{"!border-red-500":a.value.hasOwnProperty("branchId")}])},null,8,["modelValue","options","class"]),a.value.hasOwnProperty("branchId")?(o(),v("p",G,b(a.value.branchId[0]),1)):d("",!0)])):d("",!0),r("div",H,[J,V(r("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>e.value.code=t),"data-maska":"X","data-maska-tokens":"X:[0-9a-zA-Z]",class:h(["flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("code")}])},null,2),[[C,e.value.code],[A]]),a.value.hasOwnProperty("code")?(o(),v("p",K,b(a.value.code[0]),1)):d("",!0)]),r("div",Y,[ee,V(r("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>e.value.name=t),class:h(["flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("name")}])},null,2),[[C,e.value.name]]),a.value.hasOwnProperty("name")?(o(),v("p",ae,b(a.value.name[0]),1)):d("",!0)])],40,W)]),footer:p(()=>[r("button",{class:"mr-2 btn-blue",disabled:c.value,form:"form"},[k(z,{"is-loading":c.value},{default:p(()=>[x("Save")]),_:1},8,["is-loading"])],8,se),r("button",{onClick:w,class:"btn-gray"},"Cancel"),u.value==="edit"?(o(),g(l(L),{key:0,modelValue:e.value.isActive,"onUpdate:modelValue":s[3]||(s[3]=t=>e.value.isActive=t),class:"toggle:off:red ml-auto"},null,8,["modelValue"])):d("",!0)]),_:1})}}});export{ne as default};
