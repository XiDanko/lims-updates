import{d as P,e as c,x as $,Q as m,V as D,o as u,R as h,w as i,k as y,t as p,g as v,b as a,h as w,v as g,n as x,c as k,i as b,f as F,a as R,_ as T,a9 as U,m as A,l as z,Z as I}from"./main-6e47ceb6.js";import{b as L}from"./toggle-b1a111c5.js";import{F as r}from"./formMode-f60a729f.js";const Q=["onSubmit"],W={class:"flex flex-wrap items-center mb-3"},Z=a("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Code",-1),j={key:0,class:"w-full ml-24 text-red-500 text-sm"},q={class:"flex flex-wrap items-center"},G=a("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Name",-1),H={key:0,class:"w-full ml-24 text-red-500 text-sm"},J=["disabled"],ae=P({__name:"BranchForm",emits:["close"],setup(K,{emit:C}){const f=A(),V=z(),e=c({}),l=c(r.Create),n=c(!1),s=c([]);$(()=>{f.path.endsWith("/edit")&&(l.value=r.Edit,B(f.params.id))});const B=async d=>{const{data:t}=await m.get(`/api/branches/${d}`);e.value=t.data},N=async()=>{n.value=!0;try{l.value===r.Create?await S():await E(),I.fire()}catch(d){s.value=d.response.data.errors??{}}n.value=!1},S=async()=>{await m.post("/api/branches",e.value),M()},E=async()=>{await m.patch(`/api/branches/${e.value.id}`,e.value),_()},M=()=>{e.value={},s.value=[]},_=()=>{C("close"),V.back()};return(d,t)=>{const O=D("maska");return u(),h(U,null,{header:i(()=>[y(p(l.value===v(r).Create?"Create New Branch":"Edit Branch"),1)]),body:i(()=>[a("form",{id:"form",onSubmit:F(N,["prevent","stop"])},[a("div",W,[Z,w(a("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.code=o),"data-maska":"##",class:x(["flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500",{"!border-red-500":s.value.hasOwnProperty("code")}])},null,2),[[g,e.value.code],[O]]),s.value.hasOwnProperty("code")?(u(),k("p",j,p(s.value.code[0]),1)):b("",!0)]),a("div",q,[G,w(a("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.name=o),class:x(["flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500",{"!border-red-500":s.value.hasOwnProperty("name")}])},null,2),[[g,e.value.name]]),s.value.hasOwnProperty("name")?(u(),k("p",H,p(s.value.name[0]),1)):b("",!0)])],40,Q)]),footer:i(()=>[a("button",{class:"btn-blue mr-2",disabled:n.value,form:"form"},[R(T,{"is-loading":n.value},{default:i(()=>[y("Save")]),_:1},8,["is-loading"])],8,J),a("button",{onClick:_,class:"btn-gray"},"Cancel"),l.value===v(r).Edit?(u(),h(v(L),{key:0,modelValue:e.value.isActive,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.isActive=o),class:"ml-auto toggle:off:red"},null,8,["modelValue"])):b("",!0)]),_:1})}}});export{ae as default};
