import{d as P,X as C,e as v,u as k,x as O,Q as y,U as A,o,c as l,a as p,w as _,b as e,g as m,h,i,v as b,n,t as w,_ as B,k as M,f as T,F as $,a2 as j,a3 as z,T as I,$ as L}from"./main-DNdNUUJ7.js";import{M as N}from"./Master-b_S4sXaO.js";import{A as D}from"./ActivityLogSidebar-DQgEnTl4.js";import{_ as E}from"./BranchSelect.vue_vue_type_script_setup_true_lang-BebEpNal.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./multiselect-K4eUN8Nz.js";const F={class:"flex items-center gap-3"},J=e("h1",null,"Jasperserver Settings",-1),H=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"h-5 w-5"},[e("path",{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"})],-1),Q=[H],X={class:"h-[calc(100vh-8.6rem)] overflow-y-auto flex flex-col justify-between pe-1 pt-2"},q={class:"grid grid-cols-1 gap-4"},G={key:0,class:"relative"},K={class:"relative"},R={key:0,class:"text-sm text-red-500"},W={class:"relative"},Y={key:0,class:"text-sm text-red-500"},Z={class:"relative"},ee={key:0,class:"text-sm text-red-500"},se={class:"mt-3 border-t-2 border-gray-200"},te={class:"mt-3 flex items-center"},ae=["disabled"],ce=P({__name:"JasperserverSettings",setup(re){const x=C(),{hasPermissionTo:S}=I(),d=v(!1),a=v({}),f=k().user.branches,u=v(null),s=v({});O(()=>{u.value=f[0].id,g()});const g=async()=>{const{data:c}=await y.get(`/api/settings/jasperserver?branchId=${u.value}`);a.value=c.data},V=async()=>{d.value=!0;try{await y.patch("/api/settings/jasperserver",a.value),x.fetch(),s.value={},L.fire()}catch(c){s.value=c.response.data.errors??{}}d.value=!1};return(c,t)=>{const U=A("tip");return o(),l($,null,[p(N,null,{header:_(()=>[e("div",F,[J,m(S)("ActivityLog.list")?h((o(),l("button",{key:0,onClick:t[0]||(t[0]=r=>m(j).emit(m(z).Show,a.value.id)),class:"cursor-pointer"},Q)),[[U,"View Activities"]]):i("",!0)])]),body:_(()=>[e("form",{id:"form",onSubmit:T(V,["prevent"])},[e("div",X,[e("div",q,[m(f).length>1?(o(),l("div",G,[p(E,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=r=>u.value=r),error:s.value.branchId,onSelect:g},null,8,["modelValue","error"])])):i("",!0),e("div",K,[h(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>a.value.baseUrl=r),class:n(["input peer",{"border-red-500":s.value.hasOwnProperty("baseUrl")}])},null,2),[[b,a.value.baseUrl]]),e("label",{class:n(["label",{"text-red-500":s.value.hasOwnProperty("baseUrl")}])},"Base Url",2),s.value.hasOwnProperty("baseUrl")?(o(),l("p",R,w(s.value.baseUrl[0]),1)):i("",!0)]),e("div",W,[h(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>a.value.username=r),class:n(["input peer",{"border-red-500":s.value.hasOwnProperty("username")}])},null,2),[[b,a.value.username]]),e("label",{class:n(["label",{"text-red-500":s.value.hasOwnProperty("username")}])},"Username",2),s.value.hasOwnProperty("username")?(o(),l("p",Y,w(s.value.username[0]),1)):i("",!0)]),e("div",Z,[h(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>a.value.password=r),type:"password",class:n(["input peer",{"border-red-500":s.value.hasOwnProperty("password")}])},null,2),[[b,a.value.password]]),e("label",{class:n(["label",{"text-red-500":s.value.hasOwnProperty("password")}])},"Password",2),s.value.hasOwnProperty("password")?(o(),l("p",ee,w(s.value.password[0]),1)):i("",!0)])]),e("footer",se,[e("div",te,[e("button",{class:"me-auto btn-blue",disabled:d.value,form:"form"},[p(B,{"is-loading":d.value},{default:_(()=>[M("Save")]),_:1},8,["is-loading"])],8,ae)])])])],32)]),_:1}),p(D)],64)}}});export{ce as default};
