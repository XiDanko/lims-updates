import{d as ee,e as P,x as ae,a2 as A,ar as X,s as oe,Q as D,o as i,c as d,b as e,n as E,F,a1 as H,i as v,t as b,as as q,a8 as re,U as le,R as pe,w as G,k as ne,g as o,f as me,a4 as fe,h as V,T as ie,Y as j,$ as J,y as Y,A as se,ah as ve,a as M,v as W,Z as Q,at as he}from"./main-DmoZ1fz4.js";import{s as be}from"./multiselect-DAhRltj6.js";import{_ as R}from"./CurrencyInput.vue_vue_type_script_setup_true_lang-DHwtVm0K.js";import{b as ye}from"./toggle-DyRQkDOQ.js";import{I as z}from"./itemType-B7Ja-e29.js";import{O as L}from"./orderStatus-Cdywi7Or.js";import{F as O}from"./formMode-Bz--3d4P.js";import{I as Z}from"./invoiceStatus-DLsDzOgH.js";const _e=()=>{const I=(r,l)=>h(l)+$(r,l)-k(r,l),h=r=>r.filter(l=>l.status!=="canceled").reduce((l,n)=>l+n.price,0),k=(r,l)=>l.filter(n=>n.status!=="canceled").reduce((n,m)=>n+m.discount,0)+r.discount,$=(r,l)=>l.filter(n=>n.status!=="canceled").reduce((n,m)=>n+m.extraCharges,0)+r.extraCharges;return{total:I,subtotal:h,totalDiscount:k,totalExtraCharges:$,totalPayments:r=>r.reduce((l,n)=>l+n.amount,0)}},ge={key:0,class:"fixed inset-0 flex select-none items-center justify-center bg-black/80 z-[100]"},Ce={class:"overflow-hidden rounded bg-white w-[90rem]"},we={class:"flex items-center overflow-x-auto rounded-t bg-gradient-to-br from-blue-400 to-indigo-500 text-white"},xe=["onClick"],ke={class:"p-3 flex flex-wrap max-h-[calc(100vh-15rem)] overflow-y-auto"},$e=["onClick"],Se=ee({__name:"QuickAddModal",props:{branchId:{}},emits:["select"],setup(I,{emit:h}){const k=I,$=h,c=P(!1),r=P([]),l=P([]),n=P(""),m=P([]),S=P([]);ae(()=>{A.on(X.Show,async()=>{c.value=!0,await T(),await y(),_("all")})}),oe(()=>A.off(X.Show));const y=async()=>{const f=l.value.map(u=>u.item.departmentId),{data:C}=await D.get(`/api/departments/list?branchId=${k.branchId}`);r.value=C.data.filter(u=>f.includes(u.id))},T=async()=>{const{data:f}=await D.get(`/api/quick-add-items/list?branchId=${k.branchId}`);l.value=f.data},_=(f,C=null)=>{f==="all"?(n.value="all",m.value=l.value):f==="tests"?(n.value=C.name,m.value=l.value.filter(u=>u.item.departmentId===C.id)):f==="packages"?(n.value="packages",m.value=l.value.filter(u=>u.itemType===z.Package)):f==="services"&&(n.value="services",m.value=l.value.filter(u=>u.itemType===z.Service))},g=f=>{if(f.isSelected=!f.isSelected,f.isSelected)S.value.push(f.itemId);else{const C=S.value.findIndex(u=>u.id===f.itemId);S.value.splice(C,1)}},N=()=>{$("select",S.value),U()},U=()=>{S.value=[],c.value=!1};return(f,C)=>c.value?(i(),d("div",ge,[e("div",Ce,[e("header",we,[e("span",{class:E(["cursor-pointer border-b-4 border-transparent p-5 text-lg font-semibold transition hover:border-gray-600",{"!border-red-500":n.value==="all"}]),onClick:C[0]||(C[0]=u=>_("all"))},"All",2),(i(!0),d(F,null,H(r.value,u=>(i(),d("span",{class:E(["cursor-pointer whitespace-nowrap border-b-4 border-transparent p-5 text-lg font-semibold transition hover:border-gray-600",{"!border-red-500":n.value===u.name}]),onClick:K=>_("tests",u)},b(u.name.capitalize()),11,xe))),256)),e("span",{class:E(["cursor-pointer border-b-4 border-transparent p-5 text-lg font-semibold transition hover:border-gray-600",{"!border-red-500":n.value==="packages"}]),onClick:C[1]||(C[1]=u=>_("packages"))},"Packages",2),e("span",{class:E(["cursor-pointer border-b-4 border-transparent p-5 text-lg font-semibold transition hover:border-gray-600",{"!border-red-500":n.value==="services"}]),onClick:C[2]||(C[2]=u=>_("services"))},"Services",2)]),e("main",ke,[(i(!0),d(F,null,H(m.value,u=>(i(),d("span",{onClick:K=>g(u),class:E(["my-1 ml-2 cursor-pointer rounded bg-blue-500 px-2 py-1 text-white transition hover:bg-blue-600",{"bg-teal-500 hover:bg-teal-600":u.isSelected}])},b(u.item.shortForm??u.item.name),11,$e))),256))]),e("footer",{class:"flex items-center rounded-b border-t border-gray-300 bg-gray-100 px-5 py-3"},[e("button",{class:"me-2 btn-blue",onClick:N},"Save"),e("button",{class:"btn-gray",onClick:U},"Cancel")])])])):v("",!0)}});var B=(I=>(I.Ordered="ordered",I.Canceled="canceled",I))(B||{});const Ie={class:"w-full"},Ve={class:"border border-transparent"},Le={class:"sticky top-0 z-10 text-left"},Pe=e("th",{class:"bg-gray-600 p-2 font-semibold text-white first-of-type:rounded-ss last-of-type:rounded-se"},"Test Name",-1),Te=e("th",{class:"bg-gray-600 p-2 font-semibold text-white first-of-type:rounded-ss last-of-type:rounded-se"},"Status",-1),Me={key:0,class:"bg-gray-600 p-2 font-semibold text-white first-of-type:rounded-ss last-of-type:rounded-se"},Oe={class:"border border-gray-200 px-2 py-1"},ze={class:"border border-gray-200 px-2 py-1"},De={key:0,class:"border border-gray-200 px-2 py-1"},Ue=["onClick"],Ee=e("path",{d:"M512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM99.5 144.8C77.15 176.1 64 214.5 64 256C64 362 149.1 448 256 448C297.5 448 335.9 434.9 367.2 412.5L99.5 144.8zM448 256C448 149.1 362 64 256 64C214.5 64 176.1 77.15 144.8 99.5L412.5 367.2C434.9 335.9 448 297.5 448 256V256z"},null,-1),Be=[Ee],Fe=["onClick"],Ae=e("path",{d:"M468.9 32.11c13.87 0 27.18 10.77 27.18 27.04v145.9c0 10.59-8.584 19.17-19.17 19.17h-145.7c-16.28 0-27.06-13.32-27.06-27.2c0-6.634 2.461-13.4 7.96-18.9l45.12-45.14c-28.22-23.14-63.85-36.64-101.3-36.64c-88.09 0-159.8 71.69-159.8 159.8S167.8 415.9 255.9 415.9c73.14 0 89.44-38.31 115.1-38.31c18.48 0 31.97 15.04 31.97 31.96c0 35.04-81.59 70.41-147 70.41c-123.4 0-223.9-100.5-223.9-223.9S132.6 32.44 256 32.44c54.6 0 106.2 20.39 146.4 55.26l47.6-47.63C455.5 34.57 462.3 32.11 468.9 32.11z"},null,-1),Ne=[Ae],Qe=["onClick"],Re=e("path",{d:"M468.9 32.11c13.87 0 27.18 10.77 27.18 27.04v145.9c0 10.59-8.584 19.17-19.17 19.17h-145.7c-16.28 0-27.06-13.32-27.06-27.2c0-6.634 2.461-13.4 7.96-18.9l45.12-45.14c-28.22-23.14-63.85-36.64-101.3-36.64c-88.09 0-159.8 71.69-159.8 159.8S167.8 415.9 255.9 415.9c73.14 0 89.44-38.31 115.1-38.31c18.48 0 31.97 15.04 31.97 31.96c0 35.04-81.59 70.41-147 70.41c-123.4 0-223.9-100.5-223.9-223.9S132.6 32.44 256 32.44c54.6 0 106.2 20.39 146.4 55.26l47.6-47.63C455.5 34.57 462.3 32.11 468.9 32.11z"},null,-1),je=[Re],He=e("button",{class:"me-2 btn-blue",form:"ModalForm"},"Save",-1),Ye=ee({__name:"InvoicePackageModal",emits:["save","close"],setup(I,{emit:h}){const k=h,$=P(!1),c=P({}),{hasPermissionTo:r}=ie();ae(()=>{A.on(q.Show,y=>{c.value=re.cloneDeep(y),$.value=!0})}),oe(()=>A.off(q.Show));const l=async y=>{if(y.id){const{isConfirmed:T}=await j.fire();if(!T)return;await D.post("/api/orders/cancel",{orders:[y]}),J.fire()}y.status=L.Canceled},n=async y=>{if(y.id){const{isConfirmed:T}=await j.fire();if(!T)return;const{data:_}=await D.post(`/api/orders/${y.id}/reorder`);y.status=_.data.status,J.fire()}else y.status=L.Pending},m=async()=>{k("save",c.value),S()},S=()=>{$.value=!1,k("close")};return(y,T)=>{const _=le("tip");return $.value?(i(),pe(fe,{key:0},{header:G(()=>[ne(b(c.value.name)+" - Package Orders",1)]),body:G(()=>[e("form",{id:"ModalForm",onSubmit:me(m,["prevent","stop"]),class:"max-h-96 overflow-y-auto pe-1"},[e("table",Ie,[e("thead",Ve,[e("tr",Le,[Pe,Te,c.value.status===o(B).Ordered?(i(),d("th",Me)):v("",!0)])]),e("tbody",null,[(i(!0),d(F,null,H(c.value.orders,(g,N)=>(i(),d("tr",{class:E(["transition even:bg-gray-100",{"!bg-red-500 !text-white":g.status===o(L).Canceled}])},[e("td",Oe,b(g.test.shortForm),1),e("td",ze,b(g.status),1),c.value.status===o(B).Ordered?(i(),d("td",De,[![o(L).Released,o(L).Canceled].includes(g.status)&&o(r)("Order.cancel")?V((i(),d("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"mx-auto h-5 w-5 cursor-pointer text-red-500",onClick:U=>l(g)},Be,8,Ue)),[[_,"Cancel"]]):v("",!0),!g.id&&g.status===o(L).Canceled?V((i(),d("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"mx-auto h-5 w-5 -scale-x-100 cursor-pointer text-white",onClick:U=>n(g)},Ne,8,Fe)),[[_,"Reorder"]]):v("",!0),g.id&&g.status===o(L).Canceled&&o(r)("Order.reorder")?V((i(),d("svg",{key:2,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"mx-auto h-5 w-5 -scale-x-100 cursor-pointer text-white",onClick:U=>n(g)},je,8,Qe)),[[_,"Reorder"]]):v("",!0)])):v("",!0)],2))),256))])])],32)]),footer:G(()=>[He,e("button",{onClick:S,class:"btn-gray"},"Cancel")]),_:1})):v("",!0)}}}),Ze={key:0,class:"mt-2 flex items-center"},Ge={class:"flex w-full items-center justify-between"},Je={class:"rounded bg-teal-500 px-2 text-sm text-white"},Ke={key:1,class:"mt-3 mb-2 flex select-none flex-wrap items-center"},We=["onClick"],Xe={key:2,class:"rounded border-red-500 bg-red-50 p-2 text-red-500 border-s-4"},qe={key:3},et={class:"max-h-[calc(100vh-34rem)] overflow-y-auto"},tt={class:"w-full"},st=e("thead",{class:"border border-transparent"},[e("tr",{class:"sticky top-0 z-10 text-left"},[e("th",{class:"bg-gray-600 p-2 font-semibold text-white first-of-type:rounded-ss last-of-type:rounded-se"},"Item"),e("th",{class:"bg-gray-600 p-2 font-semibold text-white first-of-type:rounded-ss last-of-type:rounded-se"},"Price"),e("th",{class:"bg-gray-600 p-2 font-semibold text-white first-of-type:rounded-ss last-of-type:rounded-se"},"Discount"),e("th",{class:"bg-gray-600 p-2 font-semibold text-white first-of-type:rounded-ss last-of-type:rounded-se"},"Extra Charges"),e("th",{class:"bg-gray-600 p-2 font-semibold text-white first-of-type:rounded-ss last-of-type:rounded-se"},"Notes"),e("th",{class:"bg-gray-600 p-2 font-semibold text-white first-of-type:rounded-ss last-of-type:rounded-se"})])],-1),at={class:"truncate border border-gray-200 px-2 py-1 max-w-[20rem]"},ot=["onClick"],rt={key:1},lt={class:"border border-gray-200 px-2 py-1"},nt={class:"w-32 border border-gray-200 px-2 py-1"},it={class:"w-32 border border-gray-200 px-2 py-1"},dt={class:"border border-gray-200 px-2 py-1"},ct=["onUpdate:modelValue"],ut={class:"border border-gray-200 px-2 py-1"},pt=["onClick"],mt=e("path",{d:"M576 384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64H512C547.3 64 576 92.65 576 128V384zM271 208.1L318.1 256L271 303C261.7 312.4 261.7 327.6 271 336.1C280.4 346.3 295.6 346.3 304.1 336.1L352 289.9L399 336.1C408.4 346.3 423.6 346.3 432.1 336.1C442.3 327.6 442.3 312.4 432.1 303L385.9 256L432.1 208.1C442.3 199.6 442.3 184.4 432.1 175C423.6 165.7 408.4 165.7 399 175L352 222.1L304.1 175C295.6 165.7 280.4 165.7 271 175C261.7 184.4 261.7 199.6 271 208.1V208.1z"},null,-1),ft=[mt],vt=["onClick"],ht=e("path",{d:"M512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM99.5 144.8C77.15 176.1 64 214.5 64 256C64 362 149.1 448 256 448C297.5 448 335.9 434.9 367.2 412.5L99.5 144.8zM448 256C448 149.1 362 64 256 64C214.5 64 176.1 77.15 144.8 99.5L412.5 367.2C434.9 335.9 448 297.5 448 256V256z"},null,-1),bt=[ht],yt=["onClick"],_t=e("path",{d:"M468.9 32.11c13.87 0 27.18 10.77 27.18 27.04v145.9c0 10.59-8.584 19.17-19.17 19.17h-145.7c-16.28 0-27.06-13.32-27.06-27.2c0-6.634 2.461-13.4 7.96-18.9l45.12-45.14c-28.22-23.14-63.85-36.64-101.3-36.64c-88.09 0-159.8 71.69-159.8 159.8S167.8 415.9 255.9 415.9c73.14 0 89.44-38.31 115.1-38.31c18.48 0 31.97 15.04 31.97 31.96c0 35.04-81.59 70.41-147 70.41c-123.4 0-223.9-100.5-223.9-223.9S132.6 32.44 256 32.44c54.6 0 106.2 20.39 146.4 55.26l47.6-47.63C455.5 34.57 462.3 32.11 468.9 32.11z"},null,-1),gt=[_t],Ct={class:"mt-5 grid grid-cols-3 gap-3"},wt={class:"relative"},xt=e("label",{class:"label"},"Discount",-1),kt={class:"relative"},$t=e("label",{class:"label"},"Extra Charges",-1),St={class:"relative"},It=e("label",{class:"label"},"Notes",-1),Vt={key:0,class:"relative"},Lt=e("label",{class:"label"},"Closed",-1),Pt={key:1,class:"relative"},Tt=e("label",{class:"label"},"Paid Amount",-1),Mt={key:2,class:"relative"},Ot=e("label",{class:"label"},"Notes",-1),zt=e("hr",{class:"mt-5 mb-3 border border-dashed border-gray-200"},null,-1),Dt={class:"flex justify-between"},jt=ee({__name:"Invoice",props:{branchId:{},priceList:{},invoice:{},invoiceItems:{},payment:{},errors:{},mode:{}},setup(I){const h=I,k=P([]),$=P(null),c=Y(()=>h.invoice),r=Y(()=>h.invoiceItems),l=Y(()=>h.payment),n=_e(),{hasPermissionTo:m}=ie(),S=Y(()=>k.value.filter(t=>!T(t))),y=async()=>{const{data:t}=await D.get(`/api/items/list?branchId=${h.branchId}&orderBy=clickCount`);k.value=t.data},T=t=>!!r.value.find(a=>a.itemId===t.id&&a.itemType===t.type&&a.status===B.Ordered),_=async t=>{if(t.tests?.length===0){Q.fire({icon:"error",title:"Package doesnt contain any test."});return}t.notes&&he.fire({html:`<pre class="font-sans">${t.notes}</pre>`});const a=re.cloneDeep(t);if($.value.clear(),!await U(a))return;const s=h.priceList.priceListItems.find(x=>x.itemId===a.id&&x.itemType===a.type);s?r.value.push({itemId:a.id,itemType:a.type,name:a.shortForm??a.name,price:s.price,discount:s.discount,extraCharges:0,notes:"",status:"ordered",orders:N(a)}):Q.fire({icon:"error",title:"Price has not been defined for selected item."}),de(a)},g=t=>{const a=r.value.findIndex(p=>p.itemType===z.Package&&p.itemId===t.itemId);r.value.splice(a,1,t)},N=t=>{if(t.type===z.Service)return[];if(t.type===z.Test)return[{testId:t.id,status:L.Pending,test:t}];if(t.type===z.Package){const a=[];return t.tests.forEach(p=>a.push({testId:p.id,status:L.Pending,test:p})),a}},U=async t=>{if(T(t)){Q.fire({icon:"error",title:`${t.name} already added.`});return}const a=N(t),s=r.value.flatMap(x=>x.orders).filter(x=>a.some(w=>x.testId===w.testId&&x.status!==L.Canceled));if(s.length===0)return!0;if(t.type===z.Test)return Q.fire({icon:"error",title:"Test already exists within a package."}),!1;{const{isConfirmed:x}=await j.fire({title:"Duplicate tests detected!",html:`
          <p>${s.flatMap(w=>w.test.shortForm).join(", ")}</p>
          <strong>If you proceed those tests will be execluded from package.</strong>
        `});return x?(t.tests=t.tests.filter(w=>s.every(ue=>w.id!==ue.testId)),!0):!1}},f=t=>r.value.splice(t,1),C=async(t,a)=>{const{isConfirmed:p}=await j.fire();if(!p)return;const{data:s}=await D.post(`/api/invoice-items/${t.id}/cancel`);r.value.splice(a,1,s.data),J.fire()},u=async(t,a)=>{const{isConfirmed:p}=await j.fire();if(!p)return;const{data:s}=await D.post(`/api/invoice-items/${t.id}/reorder`);r.value.splice(a,1,s.data),J.fire()},K=t=>t.forEach(a=>{const p=k.value.find(s=>s.id===a);p&&_(p)}),de=async t=>{await D.post("/api/items/click",{id:t.id,type:t.type})},ce=()=>{r.value.forEach(t=>{const a=h.priceList.priceListItems.find(p=>p.itemId===t.itemId&&p.itemType===t.itemType);a?(t.price=a.price,t.discount=t.discount>0?t.discount:a.discount):(Q.fire({icon:"error",title:"Price has not been defined for some selected items."}),t.price=null,t.discount=0)})},te=()=>{h.mode!==O.Edit&&(c.value.status===Z.Closed?l.value.amount=n.total(c.value,r.value):l.value.amount=0)};return se(()=>h.priceList.id,(t,a)=>{a===void 0||t===a||ce()}),se(()=>[r.value,c.value],()=>{setTimeout(te,10)},{deep:!0}),ve(()=>y()),(t,a)=>{const p=le("tip");return i(),d(F,null,[e("div",null,[t.mode===o(O).Create||t.mode===o(O).Edit&&o(m)("Invoice.addItems")?(i(),d("div",Ze,[M(o(be),{options:S.value,searchable:!0,placeholder:"Select item to add","value-prop":"name","track-by":"searchableForm",label:"label",object:!0,class:"input-sm !rounded-e-none flex-1",ref_key:"multiselectInstance",ref:$,onSelect:_},{option:G(({option:s})=>[e("div",Ge,[e("span",null,b(s.label),1),e("span",Je,b(s.type),1)])]),_:1},8,["options"]),e("span",{class:"btn-blue rounded-s-none",onClick:a[0]||(a[0]=s=>o(A).emit(o(X).Show))},"Quick Add")])):v("",!0),t.mode===o(O).Create||t.mode===o(O).Edit&&o(m)("Invoice.addItems")?(i(),d("div",Ke,[(i(!0),d(F,null,H(S.value.slice(0,20),s=>(i(),d("span",{onClick:x=>_(s),class:"mb-1 cursor-pointer rounded bg-blue-500 p-1 text-xs text-white transition me-1 hover:bg-blue-600"},b(s.label),9,We))),256))])):v("",!0),t.errors.hasOwnProperty("invoiceItems")&&r.value.length===0?(i(),d("p",Xe,"Select at least one item to continue.")):v("",!0),r.value.length>0?(i(),d("div",qe,[e("div",et,[e("table",tt,[st,e("tbody",null,[(i(!0),d(F,null,H(r.value,(s,x)=>(i(),d("tr",{class:E(["even:bg-gray-100",{"!bg-red-500 !text-white":s.status===o(B).Canceled}])},[e("td",at,[s.itemType===o(z).Package&&s.orders.length>0?V((i(),d("span",{key:0,class:"cursor-pointer underline",onClick:w=>o(A).emit(o(q).Show,s)},[ne(b(s.name),1)],8,ot)),[[p,"Open Package"]]):(i(),d("span",rt,b(s.name),1))]),e("td",lt,b(s.price!==null?s.price?.toLocaleString():"Undefined"),1),e("td",nt,[M(R,{disabled:!o(m)("Invoice.discount")||s.hasOwnProperty("id"),modelValue:s.discount,"onUpdate:modelValue":w=>s.discount=w,min:0,max:s.price,class:"w-full bg-transparent"},null,8,["disabled","modelValue","onUpdate:modelValue","max"])]),e("td",it,[M(R,{modelValue:s.extraCharges,"onUpdate:modelValue":w=>s.extraCharges=w,min:0,class:"w-full bg-transparent"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",dt,[V(e("input",{type:"text","onUpdate:modelValue":w=>s.notes=w,class:"w-full bg-transparent"},null,8,ct),[[W,s.notes]])]),e("td",ut,[s.id?v("",!0):V((i(),d("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",fill:"currentColor",class:"h-5 w-5 cursor-pointer text-red-500",onClick:w=>f(x)},ft,8,pt)),[[p,"Remove"]]),s.id&&s.status===o(B).Ordered&&o(m)("Invoice.cancelItems")?V((i(),d("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"h-5 w-5 cursor-pointer text-red-500",onClick:w=>C(s,x)},bt,8,vt)),[[p,"Cancel"]]):v("",!0),s.status===o(B).Canceled&&o(m)("Invoice.reorderItems")?V((i(),d("svg",{key:2,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"h-5 w-5 -scale-x-100 cursor-pointer text-white",onClick:w=>u(s,x)},gt,8,yt)),[[p,"Reorder"]]):v("",!0)])],2))),256))])])]),e("div",Ct,[e("div",wt,[M(R,{modelValue:c.value.discount,"onUpdate:modelValue":a[1]||(a[1]=s=>c.value.discount=s),disabled:!o(m)("Invoice.discount")||t.mode===o(O).Edit,min:0,max:o(n).subtotal(r.value),class:"input-sm peer"},null,8,["modelValue","disabled","max"]),xt]),e("div",kt,[M(R,{modelValue:c.value.extraCharges,"onUpdate:modelValue":a[2]||(a[2]=s=>c.value.extraCharges=s),min:0,class:"input-sm peer"},null,8,["modelValue"]),$t]),e("div",St,[V(e("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=s=>c.value.notes=s),class:"input-sm peer"},null,512),[[W,c.value.notes]]),It]),t.mode===o(O).Create?(i(),d("div",Vt,[M(o(ye),{modelValue:c.value.status,"onUpdate:modelValue":a[4]||(a[4]=s=>c.value.status=s),"false-value":o(Z).Open,"true-value":o(Z).Closed,onChange:te,class:"input-sm peer pt-1.5"},null,8,["modelValue","false-value","true-value"]),Lt])):v("",!0),t.mode===o(O).Create?(i(),d("div",Pt,[M(R,{modelValue:l.value.amount,"onUpdate:modelValue":a[5]||(a[5]=s=>l.value.amount=s),min:0,max:o(n).total(c.value,r.value),disabled:c.value.status===o(Z).Closed,class:"input-sm peer"},null,8,["modelValue","max","disabled"]),Tt])):v("",!0),t.mode==="create"?(i(),d("div",Mt,[V(e("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=s=>l.value.notes=s),class:"input-sm peer"},null,512),[[W,l.value.notes]]),Ot])):v("",!0)]),zt,e("div",Dt,[e("span",null,"Total: "+b(o(n).total(c.value,r.value)?.toLocaleString()),1),e("span",null,"Subtotal: "+b(o(n).subtotal(r.value)?.toLocaleString()),1),e("span",null,"Total Discount: "+b(o(n).totalDiscount(c.value,r.value)?.toLocaleString()),1),e("span",null,"Paid Amount: "+b(l.value.amount?.toLocaleString()),1),e("span",null,"Due Balance: "+b((o(n).total(c.value,r.value)-l.value.amount).toLocaleString()),1)])])):v("",!0)]),M(Se,{branchId:h.branchId,onSelect:K},null,8,["branchId"]),M(Ye,{onSave:g})],64)}}});export{jt as _,_e as u};
