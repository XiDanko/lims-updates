import{d as y,e as s,x as g,X as u,c8 as f,s as k,o as p,R as S,w as l,k as m,b as e,h as C,v as B,n as E,c as M,t as V,i as v,f as N,a as D,_ as G,a9 as T,Q as $,Z as O}from"./main-6e47ceb6.js";const P=["onSubmit"],U={class:"flex flex-wrap items-start"},z=e("span",{class:"w-full p-1 font-semibold"},"Details",-1),A={key:0,class:"w-full text-red-500 text-sm"},I=["disabled"],Q=y({__name:"ExpenseGenerationModal",props:{type:null},emits:["close"],setup(_,{emit:b}){const x=_,a=s(!1),n=s(!1),i=s([]),r=s(""),t=s({});g(()=>{u.on(f.Show,o=>{n.value=!0,i.value=o})}),k(()=>u.off(f.Show));const h=async()=>{a.value=!0;try{await $.post(`/api/${x.type}s/generate-expense`,{ids:i.value,details:r.value}),O.fire(),d()}catch(o){t.value=o.response.data.errors??{}}a.value=!1},d=()=>{n.value=!1,b("close")};return(o,c)=>n.value?(p(),S(T,{key:0},{header:l(()=>[m("Generate Expense")]),body:l(()=>[e("form",{id:"form",onSubmit:N(h,["prevent","stop"])},[e("div",U,[z,C(e("textarea",{"onUpdate:modelValue":c[0]||(c[0]=w=>r.value=w),class:E(["flex-1 p-2 border border-gray-300 rounded focus:border-blue-500",{"!border-red-500":t.value.hasOwnProperty("details")}])},null,2),[[B,r.value]]),t.value.hasOwnProperty("details")?(p(),M("p",A,V(t.value.details[0]),1)):v("",!0)])],40,P)]),footer:l(()=>[e("button",{class:"btn-blue mr-2",disabled:a.value,form:"form"},[D(G,{"is-loading":a.value},{default:l(()=>[m("Save")]),_:1},8,["is-loading"])],8,I),e("button",{onClick:d,class:"btn-gray"},"Cancel")]),_:1})):v("",!0)}});export{Q as _};
