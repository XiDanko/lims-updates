import{d as S,y as T,e as P,A as G,o as b,c as f,b as e,a as M,g as v,i as y,Q as O,T as q,U as z,h as p,V as A,n as $,t as C,v as g,W as x,X as le,u as oe,x as ne,q as re,R as H,w as E,k as L,_ as ie,m as de,l as ue,Y as pe,Z as ce,$ as W}from"./main-DNdNUUJ7.js";import{M as me}from"./Master-b_S4sXaO.js";import{s as Y}from"./multiselect-K4eUN8Nz.js";import{b as ve}from"./toggle-B4ffD-ge.js";import{P as D}from"./partnerType-BuqidEbA.js";import{_ as be}from"./Autocomplete.vue_vue_type_script_setup_true_lang-B3S1Y1IM.js";import{F as k}from"./formMode-Bz--3d4P.js";import{G as B}from"./gender-2EqFEEKX.js";import{u as he}from"./phoneNumberValidation-C7c_pWlr.js";import{_ as _e,u as fe}from"./Invoice.vue_vue_type_script_setup_true_lang-CLrNTWsW.js";import{I as R}from"./invoiceStatus-DLsDzOgH.js";import{_ as ge}from"./VisitPrintToggles.vue_vue_type_script_setup_true_lang-D2THW8Tn.js";import{_ as Ve}from"./BranchSelect.vue_vue_type_script_setup_true_lang-BebEpNal.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CurrencyInput.vue_vue_type_script_setup_true_lang-B7NMAXDI.js";import"./itemType-B7Ja-e29.js";import"./orderStatus-Cdywi7Or.js";import"./printService-Bcj_RmEK.js";import"./printTemplateType-BiK7zB0k.js";const ye={class:"grid grid-cols-3 gap-3"},$e=e("h1",{class:"col-span-3 text-lg font-bold underline"},"Reference Information",-1),Ie={class:"relative"},we=e("label",{class:"label"},"Center",-1),Pe={class:"relative"},Me=e("label",{class:"label"},"Lab",-1),Ne={class:"relative"},Ue=e("label",{class:"label"},"Doctor",-1),Ce={class:"relative"},ke=e("label",{class:"label"},"Home Visit",-1),Oe={key:0,class:"relative"},xe=e("label",{class:"label"},"Collector",-1),De=S({__name:"ReferenceInfo",props:{modelValue:{},errors:{}},emits:["update:modelValue","changePatientNumber"],setup(U,{emit:V}){const w=V,N=U,{hasPermissionTo:s}=q(),a=T({get:()=>N.modelValue,set:h=>w("update:modelValue",h)}),t=P([]),l=P([]),d=()=>{o(),i()},o=async()=>{const{data:h}=await O.get(`/api/partners/list?branchId=${a.value.branchId}`);t.value=h.data},i=async()=>{const{data:h}=await O.get(`/api/users/list?branchId=${a.value.branchId}`);l.value=h.data},I=async(h,_)=>{const{data:r}=await O.post("/api/partners",{branchId:a.value.branchId,name:h,type:_});return t.value.push(r.data),r.data},c=h=>{const _=t.value.find(r=>r.id===h);_?.phoneNumber&&w("changePatientNumber",_.phoneNumber)};return G(()=>a.value.branchId,()=>{d()}),(h,_)=>(b(),f("div",ye,[$e,e("div",Ie,[M(v(Y),{modelValue:a.value.centerId,"onUpdate:modelValue":_[0]||(_[0]=r=>a.value.centerId=r),options:t.value.filter(r=>r.type===v(D).Center),searchable:!0,"value-prop":"id","track-by":"name",label:"name","create-option":v(s)("Partner.createViaSelect"),"on-create":({name:r})=>I(r,v(D).Center),class:"input-sm peer"},null,8,["modelValue","options","create-option","on-create"]),we]),e("div",Pe,[M(v(Y),{modelValue:a.value.labId,"onUpdate:modelValue":_[1]||(_[1]=r=>a.value.labId=r),onSelect:c,options:t.value.filter(r=>r.type===v(D).Lab),searchable:!0,"value-prop":"id","track-by":"name",label:"name","create-option":v(s)("Partner.createViaSelect"),"on-create":({name:r})=>I(r,v(D).Lab),class:"input-sm peer"},null,8,["modelValue","options","create-option","on-create"]),Me]),e("div",Ne,[M(v(Y),{modelValue:a.value.doctorId,"onUpdate:modelValue":_[2]||(_[2]=r=>a.value.doctorId=r),options:t.value.filter(r=>r.type===v(D).Doctor),searchable:!0,"value-prop":"id","track-by":"name",label:"name","create-option":v(s)("Partner.createViaSelect"),"on-create":({name:r})=>I(r,v(D).Doctor),class:"input-sm peer"},null,8,["modelValue","options","create-option","on-create"]),Ue]),e("div",Ce,[M(v(ve),{modelValue:a.value.isHomeVisit,"onUpdate:modelValue":_[3]||(_[3]=r=>a.value.isHomeVisit=r),"on-label":"Yes","off-label":"No",class:"pt-1.5 input-sm peer"},null,8,["modelValue"]),ke]),a.value.isHomeVisit?(b(),f("div",Oe,[M(v(Y),{modelValue:a.value.collectorId,"onUpdate:modelValue":_[4]||(_[4]=r=>a.value.collectorId=r),options:l.value,searchable:!0,"value-prop":"id","track-by":"name",label:"name",class:"input-sm peer"},null,8,["modelValue","options"]),xe])):y("",!0)]))}}),Se={class:"grid grid-cols-12 gap-3"},Fe=e("h1",{class:"col-span-12 text-lg font-bold underline"},"Patient Information",-1),Te={class:"relative col-span-5"},Ye={class:"flex"},He=e("option",{value:"Mr."},"Mr.",-1),Ee=e("option",{value:"Ms."},"Ms.",-1),Re=[He,Ee],Ae={key:0,class:"text-sm text-red-500"},Be={key:1,class:"text-sm text-red-500"},Le={class:"relative col-span-2"},We=e("option",{value:"male"},"Male",-1),Ge=e("option",{value:"female"},"Female",-1),qe=[We,Ge],ze={key:0,class:"text-sm text-red-500"},je={class:"col-span-5"},Qe={class:"flex items-center"},Xe={class:"relative"},Ze={class:"relative"},Je={class:"relative"},Ke={key:0,class:"text-sm text-red-500"},et={class:"col-span-4"},tt={class:"relative flex group"},at={key:0,class:"text-sm text-red-500"},st={class:"relative col-span-4"},lt=e("label",{class:"label"},"Email",-1),ot={class:"relative col-span-4"},nt=e("label",{class:"label"},"Address",-1),rt=S({__name:"PatientInfo",props:{modelValue:{},branchId:{},errors:{},mode:{}},emits:["update:modelValue"],setup(U,{emit:V}){const w=V,{isValidPhoneNumber:N}=he(),s=U,a=T({get:()=>s.modelValue,set:o=>w("update:modelValue",o)}),t=o=>{o==="Mr."&&(a.value.gender="male"),["Mrs.","Ms.","Miss"].includes(o)&&(a.value.gender="female")},l=o=>{o===B.Male?a.value.initials="Mr.":a.value.initials="Ms."},d=async o=>{a.value=o};return(o,i)=>{const I=z("maska");return b(),f("div",Se,[Fe,e("div",Te,[e("div",Ye,[p(e("select",{"onUpdate:modelValue":i[0]||(i[0]=c=>a.value.initials=c),onChange:i[1]||(i[1]=c=>t(c.target.value)),class:$(["input-sm h-[2.25rem] w-auto !rounded-e-none border-e",{"border-red-500":o.errors.hasOwnProperty("patient.initials")}])},Re,34),[[A,a.value.initials]]),M(be,{disabled:o.mode===v(k).Edit,placeholder:"Patient's name",class:$(["input-sm !rounded-s-none border-s",{"border-red-500":o.errors.hasOwnProperty("patient.name")}]),onSelect:d,endpoint:`/api/patients/list?branchId=${s.branchId}&limit=5`,query:"name",label:"name",modelValue:a.value.name,"onUpdate:modelValue":i[2]||(i[2]=c=>a.value.name=c)},null,8,["disabled","class","endpoint","modelValue"])]),o.errors.hasOwnProperty("patient.initials")?(b(),f("p",Ae,C(o.errors["patient.initials"][0]),1)):y("",!0),o.errors.hasOwnProperty("patient.name")?(b(),f("p",Be,C(o.errors["patient.name"][0]),1)):y("",!0)]),e("div",Le,[p(e("select",{"onUpdate:modelValue":i[3]||(i[3]=c=>a.value.gender=c),onChange:i[4]||(i[4]=c=>l(c.target.value)),class:$(["input-sm peer",{"border-red-500":o.errors.hasOwnProperty("patient.initials")}])},qe,34),[[A,a.value.gender]]),e("label",{class:$(["label",{"text-red-500":o.errors.hasOwnProperty("patient.gender")}])},"Gender",2),o.errors.hasOwnProperty("patient.gender")?(b(),f("p",ze,C(o.errors["patient.gender"][0]),1)):y("",!0)]),e("div",je,[e("div",Qe,[e("div",Xe,[p(e("input",{"onUpdate:modelValue":i[5]||(i[5]=c=>a.value.birthdateYear=c),"data-maska":"####",class:$(["input-sm peer !rounded-e-none border-e",{"border-red-500":o.errors.hasOwnProperty("patient.birthdateYear")}])},null,2),[[g,a.value.birthdateYear],[I]]),e("label",{class:$(["label",{"text-red-500":o.errors.hasOwnProperty("patient.birthdateYear")}])},"Year",2)]),e("div",Ze,[p(e("input",{"onUpdate:modelValue":i[6]||(i[6]=c=>a.value.birthdateMonth=c),"data-maska":"##",class:$(["input-sm peer !rounded-s-none !rounded-e-none border-x",{"border-red-500":o.errors.hasOwnProperty("patient.birthdateYear")}])},null,2),[[g,a.value.birthdateMonth],[I]]),e("label",{class:$(["label",{"text-red-500":o.errors.hasOwnProperty("patient.birthdateYear")}])},"Month",2)]),e("div",Je,[p(e("input",{"onUpdate:modelValue":i[7]||(i[7]=c=>a.value.birthdateDay=c),"data-maska":"##",class:$(["input-sm peer !rounded-s-none border-s",{"border-red-500":o.errors.hasOwnProperty("patient.birthdateYear")}])},null,2),[[g,a.value.birthdateDay],[I]]),e("label",{class:$(["label",{"text-red-500":o.errors.hasOwnProperty("patient.birthdateYear")}])},"Day",2)])]),o.errors.hasOwnProperty("patient.birthdateYear")?(b(),f("p",Ke,C(o.errors["patient.birthdateYear"][0]),1)):y("",!0)]),e("div",et,[e("div",tt,[p(e("input",{"onUpdate:modelValue":i[8]||(i[8]=c=>a.value.phoneNumber=c),placeholder:"Ex: 07700000000","data-maska":"###########",class:$(["input-sm peer",{"!border-red-500":o.errors.hasOwnProperty("patient.phoneNumber")||!v(N)(a.value.phoneNumber)}])},null,2),[[g,a.value.phoneNumber],[I]]),e("label",{class:$(["label",{"!text-red-500":o.errors.hasOwnProperty("patient.phoneNumber")||!v(N)(a.value.phoneNumber)}])},"Phone Number",2)]),o.errors.hasOwnProperty("patient.phoneNumber")?(b(),f("p",at,C(o.errors["patient.phoneNumber"][0]),1)):y("",!0)]),e("div",st,[p(e("input",{"onUpdate:modelValue":i[9]||(i[9]=c=>a.value.email=c),class:"input-sm peer"},null,512),[[g,a.value.email]]),lt]),e("div",ot,[p(e("input",{"onUpdate:modelValue":i[10]||(i[10]=c=>a.value.address=c),class:"input-sm peer"},null,512),[[g,a.value.address]]),nt])])}}}),it={class:"grid grid-cols-12 gap-3"},dt=e("h1",{class:"col-span-12 text-lg font-bold underline"},"Health Information",-1),ut={class:"relative col-span-3"},pt=e("label",{class:"label"},"Weight",-1),ct={class:"relative col-span-3"},mt=e("label",{class:"label"},"Height",-1),vt={class:"relative col-span-6"},bt=e("label",{class:"label"},"Symptoms",-1),ht={class:"relative col-span-6"},_t=e("label",{class:"label"},"Diseases",-1),ft={class:"relative col-span-6"},gt=e("label",{class:"label"},"Therapy",-1),Vt={key:0,class:"relative col-span-4"},yt=e("option",{value:"before"},"Before",-1),$t=e("option",{value:"during"},"During",-1),It=e("option",{value:"after"},"After",-1),wt=[yt,$t,It],Pt=e("label",{class:"label"},"Menses Duration",-1),Mt={key:0,class:"text-sm text-red-500"},Nt={key:1,class:"relative col-span-2"},Ut=e("label",{class:"label"},"Days",-1),Ct={key:0,class:"text-sm text-red-500"},kt={class:"relative col-span-3"},Ot={class:"flex items-center gap-5 text-sm input-sm peer"},xt={class:"flex items-center gap-1"},Dt=e("span",null,"Yes",-1),St={class:"flex items-center gap-1"},Ft=e("span",null,"No",-1),Tt=e("label",{class:"label"},"Fasting",-1),Yt={key:0,class:"text-sm text-red-500"},Ht={key:2,class:"relative col-span-3"},Et=e("span",{class:"label"},"Hours",-1),Rt={key:0,class:"text-sm text-red-500"},At={class:"relative col-span-12"},Bt=e("label",{class:"label"},"Notes",-1),Lt=S({__name:"HealthInfo",props:{modelValue:{},patient:{},errors:{}},emits:["update:modelValue"],setup(U,{emit:V}){const w=V,N=U,s=T({get:()=>N.modelValue,set:a=>w("update:modelValue",a)});return(a,t)=>{const l=z("maska");return b(),f("div",it,[dt,e("div",ut,[p(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=d=>s.value.weight=d),class:"input-sm peer"},null,512),[[g,s.value.weight]]),pt]),e("div",ct,[p(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=d=>s.value.height=d),class:"input-sm peer"},null,512),[[g,s.value.height]]),mt]),e("div",vt,[p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=d=>s.value.symptoms=d),class:"input-sm peer"},null,512),[[g,s.value.symptoms]]),bt]),e("div",ht,[p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=d=>s.value.diseases=d),class:"input-sm peer"},null,512),[[g,s.value.diseases]]),_t]),e("div",ft,[p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=d=>s.value.therapy=d),class:"input-sm peer"},null,512),[[g,s.value.therapy]]),gt]),a.patient.gender===v(B).Female?(b(),f("div",Vt,[p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=d=>s.value.mensesDuration=d),class:$(["input-sm peer",{"border-red-500":a.errors.hasOwnProperty("mensesDuration")}])},wt,2),[[A,s.value.mensesDuration]]),Pt,a.errors.hasOwnProperty("mensesDuration")?(b(),f("p",Mt,C(a.errors.mensesDuration[0]),1)):y("",!0)])):y("",!0),a.patient.gender===v(B).Female?(b(),f("div",Nt,[p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=d=>s.value.mesnesDays=d),"data-maska":"##",class:$(["input-sm peer",{"border-red-500":a.errors.hasOwnProperty("mensesDays")}])},null,2),[[g,s.value.mesnesDays],[l]]),Ut,a.errors.hasOwnProperty("mensesDays")?(b(),f("p",Ct,C(a.errors.mensesDays[0]),1)):y("",!0)])):y("",!0),e("div",kt,[e("div",Ot,[e("label",xt,[p(e("input",{type:"radio",value:!0,"onUpdate:modelValue":t[7]||(t[7]=d=>s.value.isFasting=d)},null,512),[[x,s.value.isFasting]]),Dt]),e("label",St,[p(e("input",{type:"radio",value:!1,"onUpdate:modelValue":t[8]||(t[8]=d=>s.value.isFasting=d)},null,512),[[x,s.value.isFasting]]),Ft])]),Tt,a.errors.hasOwnProperty("isFasting")?(b(),f("p",Yt,C(a.errors.isFasting[0]),1)):y("",!0)]),s.value.isFasting?(b(),f("div",Ht,[p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=d=>s.value.fastingHours=d),"data-maska":"##",class:$(["input-sm peer",{"border-red-500":a.errors.hasOwnProperty("mensesTo")}])},null,2),[[g,s.value.fastingHours],[l]]),Et,a.errors.hasOwnProperty("fastingHours")?(b(),f("p",Rt,C(a.errors.fastingHours[0]),1)):y("",!0)])):y("",!0),e("div",At,[p(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=d=>s.value.notes=d),class:"input peer"},null,512),[[g,s.value.notes]]),Bt])])}}}),Wt={class:"grid grid-cols-2 gap-3"},Gt=e("h1",{class:"col-span-2 text-lg font-bold underline"},"Other Information",-1),qt={class:"relative"},zt=e("label",{class:"label"},"National ID Number",-1),jt={class:"relative"},Qt=e("label",{class:"label"},"Passport Number",-1),Xt={class:"relative"},Zt=e("label",{class:"label"},"Travel Certificate Number",-1),Jt={class:"relative"},Kt=e("label",{class:"label"},"Lab Card Number",-1),ea=S({__name:"OtherInfo",props:{modelValue:{}},emits:["update:modelValue"],setup(U,{emit:V}){const w=V,N=U,s=T({get:()=>N.modelValue,set:a=>w("update:modelValue",a)});return(a,t)=>(b(),f("div",Wt,[Gt,e("div",qt,[p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s.value.nationalIdNumber=l),class:"input-sm peer"},null,512),[[g,s.value.nationalIdNumber]]),zt]),e("div",jt,[p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.value.passportNumber=l),class:"input-sm peer"},null,512),[[g,s.value.passportNumber]]),Qt]),e("div",Xt,[p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.travelCertificateNumber=l),class:"input-sm peer"},null,512),[[g,s.value.travelCertificateNumber]]),Zt]),e("div",Jt,[p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.labCardNumber=l),class:"input-sm peer"},null,512),[[g,s.value.labCardNumber]]),Kt])]))}}),ta=e("h1",{class:"col-span-2 text-lg font-bold underline"},"Contact Method",-1),aa={class:"flex items-center gap-5"},sa={class:"flex items-center gap-1"},la=e("span",null,"None",-1),oa={class:"flex items-center gap-1"},na=e("span",null,"SMS",-1),ra={class:"flex items-center gap-1"},ia=e("span",null,"Whatsapp",-1),da={class:"flex items-center gap-1"},ua=e("span",null,"Telegram",-1),pa={class:"flex items-center gap-1"},ca=e("span",null,"Viber",-1),ma=S({__name:"ContactMethod",props:{modelValue:{}},emits:["update:modelValue"],setup(U,{emit:V}){const w=V,N=U,s=T({get:()=>N.modelValue,set:a=>w("update:modelValue",a)});return(a,t)=>(b(),f("div",null,[ta,e("div",aa,[e("label",sa,[p(e("input",{type:"radio",value:"none","onUpdate:modelValue":t[0]||(t[0]=l=>s.value.contactMethod=l)},null,512),[[x,s.value.contactMethod]]),la]),e("label",oa,[p(e("input",{type:"radio",value:"sms","onUpdate:modelValue":t[1]||(t[1]=l=>s.value.contactMethod=l)},null,512),[[x,s.value.contactMethod]]),na]),e("label",ra,[p(e("input",{type:"radio",value:"whatsapp","onUpdate:modelValue":t[2]||(t[2]=l=>s.value.contactMethod=l)},null,512),[[x,s.value.contactMethod]]),ia]),e("label",da,[p(e("input",{type:"radio",value:"telegram","onUpdate:modelValue":t[3]||(t[3]=l=>s.value.contactMethod=l)},null,512),[[x,s.value.contactMethod]]),ua]),e("label",pa,[p(e("input",{type:"radio",value:"viber","onUpdate:modelValue":t[4]||(t[4]=l=>s.value.contactMethod=l)},null,512),[[x,s.value.contactMethod]]),ca])])]))}}),va={class:"h-[calc(100vh-8.6rem)] overflow-y-auto flex flex-col justify-between"},ba={class:"grid grid-cols-2 gap-2"},ha={key:0,class:"relative my-2"},_a={class:"border-gray-200 border-s-2 ps-2 pe-1"},fa=e("h1",{class:"text-lg font-bold underline"},"Orders",-1),ga={class:"mt-3 border-t-2 border-gray-200"},Va={class:"mt-3 flex items-center"},ya=["disabled"],Aa=S({__name:"VisitForm",setup(U){const V=le(),w=de(),N=ue(),{hasPermissionTo:s}=q(),a=P(null),t=P({}),l=P({contactMethod:"none"}),d=P({}),o=P({discount:0,extraCharges:0,status:R.Closed}),i=P([]),I=P({amount:0,notes:""}),c=P({}),h=P({}),_=P(!1),r=P(k.Create),F=oe().user.branches,j=fe();ne(()=>{F.length===1&&(t.value.branchId=F[0].id,l.value.phoneNumber=V.data.general?.find(u=>u.branchId===F[0].id).patientPhoneNumber,l.value.contactMethod=V.data.general?.find(u=>u.branchId===F[0].id).patientContactMethod),w.path.endsWith("/edit")&&(r.value=k.Edit,X(w.params.id))});const Q=async()=>{const{data:u}=await O.get(`/api/price-lists/eligible?branchId=${t.value.branchId}&centerId=${t.value.centerId??""}&labId=${t.value.labId??""}&doctorId=${t.value.doctorId??""}`);c.value=u.data},X=async u=>{const{data:n}=await O.get(`/api/visits/${u}`);t.value=n.data,l.value=n.data.patient,d.value=n.data.healthInformation,o.value=n.data.invoice,i.value=n.data.invoice.invoiceItems,I.value.amount=n.data.invoice.paidAmount,l.value.age=Math.floor(re().diff(l.value.birthdate,"years"))},Z=async()=>{if(r.value==="edit"){const{isConfirmed:u}=await pe.fire();if(!u)return}if(j.total(o.value,i.value)<0){ce.fire({icon:"error",title:"Invoice can't have negative total."});return}_.value=!0;try{const u=r.value===k.Create?await ee():await te();J(u)&&K(u),r.value===k.Edit&&await N.back(),h.value={}}catch(u){h.value=u.response.data.errors??{}}_.value=!1},J=u=>{const n=V.data.whatsapp?.find(m=>m.branchId===u.branchId);return s("Invoice.send")&&r.value===k.Create&&n?.enabled&&(n?.sendInvoice||n?.sendWelcomeMessage)&&u.patient.contactMethod==="whatsapp"},K=async u=>{await O.post(`/api/visits/${u.id}/send-welcome-message`)},ee=async()=>{const{data:u}=await O.post("/api/visits",{visit:t.value,patient:l.value,healthInformation:d.value,invoice:o.value,invoiceItems:i.value,payment:I.value});return W.fire(),se(),a.value.print(u.data),u.data},te=async()=>{const{data:u}=await O.patch(`/api/visits/${t.value.id}`,{visit:t.value,patient:l.value,healthInformation:d.value,invoice:o.value,invoiceItems:i.value,payment:I.value});return W.fire(),u.data},ae=u=>{l.value.phoneNumber=V.data.general?.find(n=>n.branchId===u).patientPhoneNumber,l.value.contactMethod=V.data.general?.find(n=>n.branchId===u).patientContactMethod,t.value={branchId:u},o.value={discount:0,extraCharges:0,status:R.Closed},i.value=[]},se=()=>{const u=V.data.general?.find(m=>m.branchId===t.value.branchId).patientContactMethod;let n=V.data.general?.find(m=>m.branchId===t.value.branchId).patientPhoneNumber;t.value.labId&&(n=l.value.phoneNumber),l.value={phoneNumber:n,contactMethod:u},t.value={branchId:t.value.branchId,labId:t.value.labId},d.value={isFasting:!1},o.value={discount:0,extraCharges:0,status:R.Closed},i.value=[],h.value={}};return G(()=>[t.value.branchId,t.value.centerId,t.value.labId,t.value.doctorId],()=>{Q()},{deep:!0}),(u,n)=>(b(),H(me,null,{header:E(()=>[L(C(r.value===v(k).Create?"New Visit":"Edit Visit"),1)]),body:E(()=>[e("div",va,[e("div",ba,[e("div",null,[r.value===v(k).Create&&v(F).length>1?(b(),f("div",ha,[M(Ve,{class:"input-sm",modelValue:t.value.branchId,"onUpdate:modelValue":n[0]||(n[0]=m=>t.value.branchId=m),error:h.value["visit.branchId"],onChange:ae},null,8,["modelValue","error"])])):y("",!0),M(rt,{errors:h.value,mode:r.value,modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=m=>l.value=m),"branch-id":t.value.branchId},null,8,["errors","mode","modelValue","branch-id"]),M(Lt,{errors:h.value,patient:l.value,modelValue:d.value,"onUpdate:modelValue":n[2]||(n[2]=m=>d.value=m),class:"mt-2"},null,8,["errors","patient","modelValue"]),M(De,{errors:h.value,modelValue:t.value,"onUpdate:modelValue":n[3]||(n[3]=m=>t.value=m),onChangePatientNumber:n[4]||(n[4]=m=>l.value.phoneNumber=m),class:"mt-2"},null,8,["errors","modelValue"]),M(ea,{errors:h.value,modelValue:l.value,"onUpdate:modelValue":n[5]||(n[5]=m=>l.value=m),class:"mt-2"},null,8,["errors","modelValue"]),M(ma,{modelValue:l.value,"onUpdate:modelValue":n[6]||(n[6]=m=>l.value=m),class:"mt-2"},null,8,["modelValue"])]),e("div",_a,[fa,t.value.branchId?(b(),H(_e,{key:0,"price-list":c.value,"branch-id":t.value.branchId,invoice:o.value,"onUpdate:invoice":n[7]||(n[7]=m=>o.value=m),invoiceItems:i.value,"onUpdate:invoiceItems":n[8]||(n[8]=m=>i.value=m),payment:I.value,"onUpdate:payment":n[9]||(n[9]=m=>I.value=m),errors:h.value,mode:r.value},null,8,["price-list","branch-id","invoice","invoiceItems","payment","errors","mode"])):y("",!0)])]),e("footer",ga,[e("div",Va,[e("button",{class:"me-auto btn-blue",disabled:_.value,onClick:Z},[M(ie,{"is-loading":_.value},{default:E(()=>[L("Save")]),_:1},8,["is-loading"])],8,ya),r.value===v(k).Create?(b(),H(ge,{key:0,"branch-id":t.value.branchId,ref_key:"printToggles",ref:a},null,8,["branch-id"])):y("",!0)])])])]),_:1}))}});export{Aa as default};
