import{d as E,e as v,u as A,x as F,Q as g,U as M,o,R as N,w as _,k as P,t as u,g as l,b as r,c as i,a as x,n as c,i as d,h as p,v as b,f as D,_ as T,a9 as Q,m as W,l as Z,Z as j}from"./main-56f58ed8.js";import{b as q}from"./toggle-876d3de4.js";import{s as O}from"./multiselect-167e14f5.js";import{F as f}from"./formMode-f60a729f.js";const G=["onSubmit"],H={class:"grid grid-cols-2 gap-3"},J={key:0,class:"flex flex-wrap items-center"},K=r("span",{class:"w-32 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Branch",-1),X={key:0,class:"ml-32 w-full text-red-500 text-sm"},Y={class:"flex flex-wrap items-start"},ee=r("span",{class:"w-32 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Name",-1),re={key:0,class:"w-full ml-32 text-red-500 text-sm"},ae={class:"flex flex-wrap items-start"},se=r("span",{class:"w-32 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Phone Number",-1),te={key:0,class:"w-full ml-32 text-red-500 text-sm"},oe={class:"flex flex-wrap items-start"},le=r("span",{class:"w-32 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Email",-1),de={key:0,class:"w-full ml-32 text-red-500 text-sm"},ne=r("span",{class:"w-32 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Address",-1),ue={class:"flex flex-wrap items-start"},ie=r("span",{class:"w-32 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Ratio",-1),ce=r("span",{class:"w-16 p-2 border border-gray-300 border-l-0 rounded-r bg-gray-100 text-referenceCenter"},"%",-1),pe={key:0,class:"w-full ml-32 text-red-500 text-sm"},be={class:"flex flex-wrap items-start"},me=r("span",{class:"w-32 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Price List",-1),ve={class:"col-span-2 flex flex-wrap items-start"},fe=r("span",{class:"w-full p-1 font-semibold"},"Notes",-1),he=["disabled"],ke=E({__name:"ReferenceCenterForm",emits:["close"],setup(ye,{emit:U}){const k=W(),R=Z(),e=v({}),h=v(f.Create),y=v(!1),t=v({}),V=v([]),m=A().user.branches;F(()=>{m.length===1&&(e.value.branchId=m[0].id,w()),k.path.endsWith("/edit")&&(h.value=f.Edit,L(k.params.id))});const w=async()=>{const{data:n}=await g.get(`/api/price-lists/list?branchId=${e.value.branchId}`);V.value=n.data},L=async n=>{const{data:a}=await g.get(`/api/reference-centers/${n}`);e.value=a.data,w()},S=async()=>{y.value=!0;try{h.value===f.Create?await z():await $(),j.fire()}catch(n){t.value=n.response.data.errors??{}}y.value=!1},z=async()=>{await g.post("/api/reference-centers",e.value),B()},$=async()=>{await g.patch(`/api/reference-centers/${e.value.id}`,e.value),C()},B=()=>{e.value={branchId:e.value.branchId},t.value=[]},C=()=>{U("close"),R.back()};return(n,a)=>{const I=M("maska");return o(),N(Q,{"modal-class":"!w-[60rem]"},{header:_(()=>[P(u(h.value===l(f).Create?"Create New Reference Center":"Edit Reference Center"),1)]),body:_(()=>[r("form",{id:"form",onSubmit:D(S,["prevent","stop"])},[r("div",H,[l(m).length>1?(o(),i("div",J,[K,x(l(O),{modelValue:e.value.branchId,"onUpdate:modelValue":a[0]||(a[0]=s=>e.value.branchId=s),options:l(m),onSelect:w,onChange:a[1]||(a[1]=s=>e.value.priceListId=null),searchable:!0,"value-prop":"id","track-by":"searchableForm",label:"name","can-clear":!1,"can-deselect":!1,class:c(["flex-1 border border-gray-300 !rounded-r",{"!border-red-500":t.value.hasOwnProperty("branchId")}])},null,8,["modelValue","options","class"]),t.value.hasOwnProperty("branchId")?(o(),i("p",X,u(t.value.branchId[0]),1)):d("",!0)])):d("",!0),r("div",Y,[ee,p(r("input",{"onUpdate:modelValue":a[2]||(a[2]=s=>e.value.name=s),size:"1",class:c(["flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500",{"!border-red-500":t.value.hasOwnProperty("name")}])},null,2),[[b,e.value.name]]),t.value.hasOwnProperty("name")?(o(),i("p",re,u(t.value.name[0]),1)):d("",!0)]),r("div",ae,[se,p(r("input",{"onUpdate:modelValue":a[3]||(a[3]=s=>e.value.phoneNumber=s),"data-maska":"+0","data-maska-tokens":"0:[0-9]:multiple",size:"1",class:c(["flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500",{"!border-red-500":t.value.hasOwnProperty("phoneNumber")}])},null,2),[[b,e.value.phoneNumber],[I]]),t.value.hasOwnProperty("phoneNumber")?(o(),i("p",te,u(t.value.phoneNumber[0]),1)):d("",!0)]),r("div",oe,[le,p(r("input",{"onUpdate:modelValue":a[4]||(a[4]=s=>e.value.email=s),size:"1",class:c(["flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500",{"!border-red-500":t.value.hasOwnProperty("email")}])},null,2),[[b,e.value.email]]),t.value.hasOwnProperty("email")?(o(),i("p",de,u(t.value.email[0]),1)):d("",!0)]),r("div",{class:c(["flex flex-wrap items-start",{"col-span-2":l(m).length>1}])},[ne,p(r("input",{"onUpdate:modelValue":a[5]||(a[5]=s=>e.value.address=s),size:"1",class:"flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500"},null,512),[[b,e.value.address]])],2),r("div",ue,[ie,p(r("input",{"onUpdate:modelValue":a[6]||(a[6]=s=>e.value.ratio=s),size:"1","data-maska":"###",class:c(["flex-1 p-2 border border-gray-300 focus:border-blue-500",{"!border-red-500":t.value.hasOwnProperty("ratio")}])},null,2),[[b,e.value.ratio],[I]]),ce,t.value.hasOwnProperty("ratio")?(o(),i("p",pe,u(t.value.ratio[0]),1)):d("",!0)]),r("div",be,[me,x(l(O),{modelValue:e.value.priceListId,"onUpdate:modelValue":a[7]||(a[7]=s=>e.value.priceListId=s),options:V.value,searchable:!0,"value-prop":"id","track-by":"name",label:"name",class:"flex-1 border border-gray-300 !rounded-r"},null,8,["modelValue","options"])]),r("div",ve,[fe,p(r("textarea",{"onUpdate:modelValue":a[8]||(a[8]=s=>e.value.notes=s),class:"flex-1 p-2 border border-gray-300 rounded focus:border-blue-500"},null,512),[[b,e.value.notes]])])])],40,G)]),footer:_(()=>[r("button",{class:"btn-blue mr-2",disabled:y.value,form:"form"},[x(T,{"is-loading":y.value},{default:_(()=>[P("Save")]),_:1},8,["is-loading"])],8,he),r("button",{onClick:C,class:"btn-gray"},"Cancel"),h.value===l(f).Edit?(o(),N(l(q),{key:0,modelValue:e.value.isActive,"onUpdate:modelValue":a[9]||(a[9]=s=>e.value.isActive=s),class:"ml-auto toggle:off:red"},null,8,["modelValue"])):d("",!0)]),_:1})}}});export{ke as default};
