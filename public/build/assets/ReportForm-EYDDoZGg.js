import{d as B,e as f,x as E,Q as b,U as M,o,R as k,w as y,k as P,t as n,g as _,b as a,h as u,v as d,n as l,c as p,i,f as S,a as A,_ as D,a4 as F,m as T,l as z,$ as I}from"./main-DmoZ1fz4.js";import{b as X}from"./toggle-DyRQkDOQ.js";import{F as m}from"./formMode-Bz--3d4P.js";const L={class:"relative"},Q={key:0,class:"text-sm text-red-500"},W={class:"relative"},Z={key:0,class:"text-sm text-red-500"},q={class:"relative"},G={key:0,class:"text-sm text-red-500"},H={class:"relative"},J={key:0,class:"text-sm text-red-500"},K={class:"relative"},Y={key:0,class:"text-sm text-red-500"},ee=["disabled"],le=B({__name:"ReportForm",emits:["close"],setup(ae,{emit:O}){const g=O,h=T(),V=z(),s=f({username:"jasperadmin",password:"jasperadmin"}),v=f(m.Create),c=f(!1),e=f({});E(()=>{h.path.endsWith("/edit")&&(v.value=m.Edit,C(h.params.identifier))});const C=async w=>{const{data:t}=await b.get(`/api/reports/${w}`);s.value=t.data},U=async()=>{c.value=!0;try{v.value===m.Create?await R():await N(),e.value={},I.fire()}catch(w){e.value=w.response.data.errors??{}}c.value=!1},R=async()=>{await b.post("/api/reports",s.value),$()},N=async()=>{await b.patch(`/api/reports/${s.value.id}`,s.value),x()},$=()=>{s.value={username:"jasperadmin",password:"jasperadmin"},e.value={}},x=()=>{g("close"),V.back()};return(w,t)=>{const j=M("maska");return o(),k(F,null,{header:y(()=>[P(n(v.value===_(m).Create?"Create New Report":"Edit Report"),1)]),body:y(()=>[a("form",{id:"form",onSubmit:S(U,["prevent","stop"]),class:"grid grid-cols-1 gap-4"},[a("div",L,[u(a("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.value.name=r),class:l(["input peer",{"border-red-500":e.value.hasOwnProperty("name")}])},null,2),[[d,s.value.name]]),a("label",{class:l(["label",{"text-red-500":e.value.hasOwnProperty("name")}])},"Name",2),e.value.hasOwnProperty("name")?(o(),p("p",Q,n(e.value.name[0]),1)):i("",!0)]),a("div",W,[u(a("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.value.identifier=r),"data-maska":"X","data-maska-tokens":"X:[0-9a-zA-Z]:multiple",class:l(["input peer",{"border-red-500":e.value.hasOwnProperty("identifier")}])},null,2),[[d,s.value.identifier],[j]]),a("label",{class:l(["label",{"text-red-500":e.value.hasOwnProperty("identifier")}])},"Identifier",2),e.value.hasOwnProperty("identifier")?(o(),p("p",Z,n(e.value.identifier[0]),1)):i("",!0)]),a("div",q,[u(a("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.value.url=r),class:l(["input peer",{"border-red-500":e.value.hasOwnProperty("url")}])},null,2),[[d,s.value.url]]),a("label",{class:l(["label",{"text-red-500":e.value.hasOwnProperty("url")}])},"Url",2),e.value.hasOwnProperty("url")?(o(),p("p",G,n(e.value.url[0]),1)):i("",!0)]),a("div",H,[u(a("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.value.username=r),class:l(["input peer",{"border-red-500":e.value.hasOwnProperty("username")}])},null,2),[[d,s.value.username]]),a("label",{class:l(["label",{"text-red-500":e.value.hasOwnProperty("username")}])},"Username",2),e.value.hasOwnProperty("username")?(o(),p("p",J,n(e.value.username[0]),1)):i("",!0)]),a("div",K,[u(a("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=r=>s.value.password=r),class:l(["input peer",{"border-red-500":e.value.hasOwnProperty("password")}])},null,2),[[d,s.value.password]]),a("label",{class:l(["label",{"text-red-500":e.value.hasOwnProperty("password")}])},"Password",2),e.value.hasOwnProperty("password")?(o(),p("p",Y,n(e.value.password[0]),1)):i("",!0)])],32)]),footer:y(()=>[a("button",{class:"me-2 btn-blue",disabled:c.value,form:"form"},[A(D,{"is-loading":c.value},{default:y(()=>[P("Save")]),_:1},8,["is-loading"])],8,ee),a("button",{onClick:x,class:"btn-gray"},"Cancel"),v.value===_(m).Edit?(o(),k(_(X),{key:0,modelValue:s.value.isActive,"onUpdate:modelValue":t[5]||(t[5]=r=>s.value.isActive=r),class:"toggle:off:red ms-auto"},null,8,["modelValue"])):i("",!0)]),_:1})}}});export{le as default};
