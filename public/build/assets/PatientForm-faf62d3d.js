import{d as T,e as h,u as E,x as G,Q as w,V as R,o as n,R as $,w as y,k,t as p,g as u,b as e,c as b,a as C,n as _,i as c,h as t,a0 as U,v as l,a1 as m,f as A,_ as L,a9 as W,m as Q,l as Z,Z as j}from"./main-6e47ceb6.js";import{F as x}from"./formMode-f60a729f.js";import{G as i}from"./gender-fe0bd233.js";import{s as q}from"./multiselect-27b4da8b.js";const H=["onSubmit"],J={class:"grid grid-cols-12 gap-3"},K={key:0,class:"col-span-12 flex flex-wrap items-center"},X=e("span",{class:"p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Branch",-1),ee={key:0,class:"w-full text-red-500 text-sm"},ae={class:"col-span-4 flex flex-wrap items-start"},re=e("option",{value:"Mr."},"Mr.",-1),se=e("option",{value:"Ms."},"Ms.",-1),te=[re,se],oe={key:0,class:"w-full text-red-500 text-sm"},le={class:"col-span-3 flex flex-wrap items-start"},de=e("span",{class:"p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Gender",-1),ne=["value"],ue=["value"],ie={class:"col-span-5 flex flex-wrap items-start"},pe=e("span",{class:"p-2 bg-gray-100 border border-gray-300 border-r-0 rounded-l"},"Year",-1),be=e("span",{class:"p-2 border-y border-gray-300 bg-gray-100"},"Month",-1),ce=e("span",{class:"p-2 border-y border-gray-300 bg-gray-100"},"Day",-1),me={key:0,class:"w-full text-red-500 text-sm"},ve={class:"col-span-4 flex flex-wrap items-start"},fe=e("span",{class:"p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Number",-1),ge={key:0,class:"w-full text-red-500 text-sm"},he={class:"col-span-4 flex flex-wrap items-start"},ye=e("span",{class:"p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Email",-1),_e={class:"col-span-4 flex flex-wrap items-start"},xe=e("span",{class:"p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Address",-1),Me={class:"col-span-6 flex flex-wrap items-start"},we=e("span",{class:"p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"National ID Number",-1),Ne={class:"col-span-6 flex flex-wrap items-start"},Ve=e("span",{class:"p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Passport Number",-1),ke={class:"col-span-6 flex flex-wrap items-start"},Ce=e("span",{class:"p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Travel Certificate Number",-1),Ue={class:"col-span-6 flex flex-wrap items-start"},Ie=e("span",{class:"p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Lab Card Number",-1),Pe={class:"col-span-12 flex items-center"},ze=e("span",{class:"p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Contact Method",-1),Se={class:"flex flex-1 items-center p-2 border border-gray-300 border rounded-r"},Oe={class:"flex items-center mr-5"},De=e("span",{class:"ml-1"},"None",-1),Fe={class:"flex items-center mr-5"},Ye=e("span",{class:"ml-1"},"SMS",-1),Be={class:"flex items-center mr-5"},Te=e("span",{class:"ml-1"},"Whatsapp",-1),Ee={class:"flex items-center mr-5"},Ge=e("span",{class:"ml-1"},"Telegram",-1),Re={class:"flex items-center mr-5"},$e=e("span",{class:"ml-1"},"Viber",-1),Ae=["disabled"],qe=T({__name:"PatientForm",emits:["close"],setup(Le,{emit:I}){const N=Q(),P=Z(),a=h({initials:"Mr.",gender:"male",phoneNumber:"+964",contactMethod:"none"}),M=h(x.Create),v=h(!1),o=h({}),f=E().user.branches;G(()=>{f.length===1&&(a.value.branchId=f[0].id),N.path.endsWith("/edit")&&(M.value=x.Edit,O(N.params.id))});const z=d=>{d==="Mr."&&(a.value.gender=i.Male),["Mrs.","Ms.","Miss"].includes(d)&&(a.value.gender=i.Female)},S=d=>{d===i.Male?a.value.initials="Mr.":a.value.initials="Ms."},O=async d=>{const{data:r}=await w.get(`/api/patients/${d}`);a.value=r.data},D=async()=>{v.value=!0;try{M.value===x.Create?await F():await Y(),j.fire()}catch(d){o.value=d.response.data.errors??{}}v.value=!1},F=async()=>{await w.post("/api/patients",a.value),B()},Y=async()=>{await w.patch(`/api/patients/${a.value.id}`,a.value),V()},B=()=>{a.value={branchId:a.value.branchId,initials:"Mr.",gender:i.Male,phoneNumber:"+964",contactMethod:"none"},o.value=[]},V=()=>{I("close"),P.back()};return(d,r)=>{const g=R("maska");return n(),$(W,{"modal-class":"!w-[60rem]"},{header:y(()=>[k(p(M.value===u(x).Create?"Create New Patient":"Edit Patient"),1)]),body:y(()=>[e("form",{id:"form",onSubmit:A(D,["prevent","stop"])},[e("div",J,[u(f).length>1?(n(),b("div",K,[X,C(u(q),{modelValue:a.value.branchId,"onUpdate:modelValue":r[0]||(r[0]=s=>a.value.branchId=s),options:u(f),searchable:!0,"value-prop":"id","track-by":"name",label:"name","can-clear":!1,"can-deselect":!1,class:_(["flex-1 border border-gray-300 !rounded-r",{"!border-red-500":o.value.hasOwnProperty("branchId")}])},null,8,["modelValue","options","class"]),o.value.hasOwnProperty("branchId")?(n(),b("p",ee,p(o.value.branchId[0]),1)):c("",!0)])):c("",!0),e("div",ae,[t(e("select",{"onUpdate:modelValue":r[1]||(r[1]=s=>a.value.initials=s),onChange:r[2]||(r[2]=s=>z(s.target.value)),class:"h-[42px] px-2 border border-r-0 border-gray-300 rounded-l bg-gray-100"},te,544),[[U,a.value.initials]]),t(e("input",{"onUpdate:modelValue":r[3]||(r[3]=s=>a.value.name=s),size:"1",class:_(["flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500",{"!border-red-500":o.value.hasOwnProperty("name")}])},null,2),[[l,a.value.name]]),o.value.hasOwnProperty("name")?(n(),b("p",oe,p(o.value.name[0]),1)):c("",!0)]),e("div",le,[de,t(e("select",{"onUpdate:modelValue":r[4]||(r[4]=s=>a.value.gender=s),onChange:r[5]||(r[5]=s=>S(s.target.value)),class:"flex-1 h-[42px] px-2 border border-gray-300 rounded-r"},[e("option",{value:u(i).Male},"Male",8,ne),e("option",{value:u(i).Female},"Female",8,ue)],544),[[U,a.value.gender]])]),e("div",ie,[pe,t(e("input",{"onUpdate:modelValue":r[6]||(r[6]=s=>a.value.birthdateYear=s),"data-maska":"####",size:"1",class:_(["flex-1 p-2 border border-gray-300 focus:border-blue-500",{"!border-red-500":o.value.hasOwnProperty("birthdateYear")}])},null,2),[[l,a.value.birthdateYear],[g]]),be,t(e("input",{"onUpdate:modelValue":r[7]||(r[7]=s=>a.value.birthdateMonth=s),"data-maska":"##",size:"1",class:"flex-1 p-2 border border-gray-300 focus:border-blue-500"},null,512),[[l,a.value.birthdateMonth],[g]]),ce,t(e("input",{"onUpdate:modelValue":r[8]||(r[8]=s=>a.value.birthdateDay=s),"data-maska":"##",size:"1",class:"flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500"},null,512),[[l,a.value.birthdateDay],[g]]),o.value.hasOwnProperty("birthdateYear")?(n(),b("p",me,p(o.value.birthdateYear[0]),1)):c("",!0)]),e("div",ve,[fe,t(e("input",{"onUpdate:modelValue":r[9]||(r[9]=s=>a.value.phoneNumber=s),"data-maska":"+0","data-maska-tokens":"0:[0-9]:multiple",size:"1",class:_(["flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500",{"!border-red-500":o.value.hasOwnProperty("phoneNumber")}])},null,2),[[l,a.value.phoneNumber],[g]]),o.value.hasOwnProperty("phoneNumber")?(n(),b("p",ge,p(o.value.phoneNumber[0]),1)):c("",!0)]),e("div",he,[ye,t(e("input",{"onUpdate:modelValue":r[10]||(r[10]=s=>a.value.email=s),size:"1",class:"flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500"},null,512),[[l,a.value.email]])]),e("div",_e,[xe,t(e("input",{"onUpdate:modelValue":r[11]||(r[11]=s=>a.value.address=s),size:"1",class:"flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500"},null,512),[[l,a.value.address]])]),e("div",Me,[we,t(e("input",{"onUpdate:modelValue":r[12]||(r[12]=s=>a.value.nationalIdNumber=s),size:"1",class:"flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500"},null,512),[[l,a.value.nationalIdNumber]])]),e("div",Ne,[Ve,t(e("input",{"onUpdate:modelValue":r[13]||(r[13]=s=>a.value.passportNumber=s),size:"1",class:"flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500"},null,512),[[l,a.value.passportNumber]])]),e("div",ke,[Ce,t(e("input",{"onUpdate:modelValue":r[14]||(r[14]=s=>a.value.travelCertificateNumber=s),size:"1",class:"flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500"},null,512),[[l,a.value.travelCertificateNumber]])]),e("div",Ue,[Ie,t(e("input",{"onUpdate:modelValue":r[15]||(r[15]=s=>a.value.labCardNumber=s),size:"1",class:"flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500"},null,512),[[l,a.value.labCardNumber]])]),e("div",Pe,[ze,e("div",Se,[e("label",Oe,[t(e("input",{type:"radio",value:"none","onUpdate:modelValue":r[16]||(r[16]=s=>a.value.contactMethod=s)},null,512),[[m,a.value.contactMethod]]),De]),e("label",Fe,[t(e("input",{type:"radio",value:"sms","onUpdate:modelValue":r[17]||(r[17]=s=>a.value.contactMethod=s)},null,512),[[m,a.value.contactMethod]]),Ye]),e("label",Be,[t(e("input",{type:"radio",value:"whatsapp","onUpdate:modelValue":r[18]||(r[18]=s=>a.value.contactMethod=s)},null,512),[[m,a.value.contactMethod]]),Te]),e("label",Ee,[t(e("input",{type:"radio",value:"telegram","onUpdate:modelValue":r[19]||(r[19]=s=>a.value.contactMethod=s)},null,512),[[m,a.value.contactMethod]]),Ge]),e("label",Re,[t(e("input",{type:"radio",value:"viber","onUpdate:modelValue":r[20]||(r[20]=s=>a.value.contactMethod=s)},null,512),[[m,a.value.contactMethod]]),$e])])])])],40,H)]),footer:y(()=>[e("button",{class:"btn-blue mr-2",disabled:v.value,form:"form"},[C(L,{"is-loading":v.value},{default:y(()=>[k("Save")]),_:1},8,["is-loading"])],8,Ae),e("button",{onClick:V,class:"btn-gray"},"Cancel")]),_:1})}}});export{qe as default};
