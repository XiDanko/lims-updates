import{d as S,e as m,x as V,o as r,c as i,a as p,b as e,h as v,v as b,a0 as x,Q as C,r as M,U as T,w as $,k as U,g as u,i as y,F as k,a1 as B,t as w,a2 as F,a3 as z,T as D,Y as N,$ as Q}from"./main-DNdNUUJ7.js";import{M as I}from"./Master-b_S4sXaO.js";import{_ as K}from"./Paginator.vue_vue_type_script_setup_true_lang-ByzTMpQ9.js";import{u as P}from"./urlQueryManager-rKHuCRUp.js";import{A as j}from"./ActivityLogSidebar-DQgEnTl4.js";import{_ as q}from"./BranchFilter.vue_vue_type_script_setup_true_lang-CgUfq7jM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./multiselect-K4eUN8Nz.js";const E={class:"flex flex-wrap items-center gap-2 ms-auto"},H={class:"relative flex-1 min-w-[10rem]"},R=e("label",{class:"label"},"Type",-1),Y={class:"relative flex-1 min-w-[10rem]"},G=e("label",{class:"label"},"Content",-1),J=S({__name:"SuggestionsFilter",emits:["change"],setup(A,{emit:h}){const g=h,_=new URLSearchParams(location.search),l=m(""),c=m(""),s=m("");m(""),V(()=>{f()});const f=()=>{l.value=_.get("branchId")??"",s.value=_.get("type")??"",c.value=_.get("content")??""},a=()=>{const o=`branchId=${l.value}&type=${s.value}&content=${c.value}&page=1`;g("change",o)};return(o,t)=>(r(),i("div",E,[p(q,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=n=>l.value=n),onChange:a},null,8,["modelValue"]),e("div",H,[v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>s.value=n),onKeyup:x(a,["enter"]),type:"text",class:"input-sm peer"},null,544),[[b,s.value]]),R]),e("div",Y,[v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>c.value=n),onKeyup:x(a,["enter"]),type:"text",class:"input-sm peer"},null,544),[[b,c.value]]),G])]))}}),O={class:"mb-5 flex items-start gap-1"},W={class:"pe-1 h-[calc(100vh-15.7rem)] overflow-y-auto"},X={class:"w-full"},Z={class:"sticky top-0 z-10 text-left"},ee=e("th",{class:"bg-gray-600 p-2 font-semibold text-white first-of-type:rounded-ss last-of-type:rounded-se"},"Type",-1),te=e("th",{class:"bg-gray-600 p-2 font-semibold text-white first-of-type:rounded-ss last-of-type:rounded-se"},"Content",-1),se=e("th",{class:"bg-gray-600 p-2 font-semibold text-white first-of-type:rounded-ss last-of-type:rounded-se"},"Branch",-1),oe={key:0,class:"bg-gray-600 p-2 font-semibold text-white first-of-type:rounded-ss last-of-type:rounded-se"},ae={class:"transition even:bg-gray-100"},ne={class:"border border-gray-200 px-2 py-1"},re={class:"border border-gray-200 px-2 py-1"},ie={class:"border border-gray-200 px-2 py-1"},le={key:0,class:"border border-gray-200 px-2 py-1 text-center"},ce={class:"flex items-center justify-center gap-3"},de=["onClick"],ue=e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),pe=[ue],me=["onClick"],_e=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"h-5 w-5"},[e("path",{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"})],-1),he=[_e],$e=S({__name:"Suggestions",setup(A){const h=m([]),g=m({}),{updateUrlQuery:_}=P(),{hasPermissionTo:l,hasAnyPermission:c}=D();V(()=>s(location.search));const s=async a=>{const o=await _(a),{data:t}=await C.get(`/api/suggestions?${o}`);h.value=t.data,g.value=t.meta},f=async a=>{const{isConfirmed:o}=await N.fire();o&&(await C.delete(`/api/suggestions/${a}`),Q.fire(),await s(location.search))};return(a,o)=>{const t=M("router-view"),n=T("tip");return r(),i(k,null,[p(t,{onClose:s}),p(I,null,{header:$(()=>[U("Suggestions")]),body:$(()=>[e("div",O,[p(J,{onChange:s})]),e("section",W,[e("table",X,[e("thead",null,[e("tr",Z,[ee,te,se,u(c)("Suggestion.delete","ActivityLog.list")?(r(),i("th",oe)):y("",!0)])]),e("tbody",null,[(r(!0),i(k,null,B(h.value,d=>(r(),i("tr",ae,[e("td",ne,w(d.type),1),e("td",re,w(d.content),1),e("td",ie,w(d.branch.name),1),u(c)("Suggestion.delete","ActivityLog.list")?(r(),i("td",le,[e("div",ce,[u(l)("Suggestion.delete")?v((r(),i("button",{key:0,onClick:L=>f(d.id),class:"cursor-pointer text-red-500"},pe,8,de)),[[n,"Delete"]]):y("",!0),u(l)("ActivityLog.list")?v((r(),i("button",{key:1,onClick:L=>u(F).emit(u(z).Show,d.id),class:"cursor-pointer text-gray-600"},he,8,me)),[[n,"View Activities"]]):y("",!0)])])):y("",!0)]))),256))])])])]),_:1}),p(K,{data:g.value,onChange:o[0]||(o[0]=d=>s(`page=${d}`)),class:"mt-3"},null,8,["data"]),p(j)],64)}}});export{$e as default};
