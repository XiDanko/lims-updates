import{d as j,e as f,x as B,Q as y,U as E,o,R as h,w,k,t as l,g as _,b as e,h as n,v as u,n as i,c as p,i as d,f as M,a as $,_ as A,a9 as D,m as F,l as T,Z as z}from"./main-56f58ed8.js";import{b as I}from"./toggle-876d3de4.js";import{F as m}from"./formMode-f60a729f.js";const X=["onSubmit"],Z={class:"flex flex-wrap items-center mb-3"},L=e("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Identifier",-1),Q={key:0,class:"w-full ml-24 text-red-500 text-sm"},W={class:"flex flex-wrap items-center mb-3"},q=e("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Name",-1),G={key:0,class:"w-full ml-24 text-red-500 text-sm"},H={class:"flex flex-wrap items-center mb-3"},J=e("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Url",-1),K={key:0,class:"w-full ml-24 text-red-500 text-sm"},Y={class:"flex flex-wrap items-center mb-3"},ee=e("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Username",-1),re={key:0,class:"w-full ml-24 text-red-500 text-sm"},ae={class:"flex flex-wrap items-center mb-3"},se=e("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Password",-1),te={key:0,class:"w-full ml-24 text-red-500 text-sm"},oe=["disabled"],ie=j({__name:"ReportForm",emits:["close"],setup(le,{emit:V}){const x=F(),P=T(),r=f({username:"jasperadmin",password:"jasperadmin"}),c=f(m.Create),b=f(!1),a=f({});B(()=>{x.path.endsWith("/edit")&&(c.value=m.Edit,C(x.params.identifier))});const C=async v=>{const{data:s}=await y.get(`/api/reports/${v}`);r.value=s.data},O=async()=>{b.value=!0;try{c.value===m.Create?await U():await R(),z.fire()}catch(v){a.value=v.response.data.errors??{}}b.value=!1},U=async()=>{await y.post("/api/reports",r.value),N()},R=async()=>{await y.patch(`/api/reports/${r.value.id}`,r.value),g()},N=()=>{r.value={username:"jasperadmin",password:"jasperadmin"},a.value={}},g=()=>{V("close"),P.back()};return(v,s)=>{const S=E("maska");return o(),h(D,null,{header:w(()=>[k(l(c.value===_(m).Create?"Create New Report":"Edit Report"),1)]),body:w(()=>[e("form",{id:"form",onSubmit:M(O,["prevent","stop"])},[e("div",Z,[L,n(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.value.identifier=t),"data-maska":"X","data-maska-tokens":"X:[0-9a-zA-Z]:multiple",class:i(["flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("identifier")}])},null,2),[[u,r.value.identifier],[S]]),a.value.hasOwnProperty("identifier")?(o(),p("p",Q,l(a.value.identifier[0]),1)):d("",!0)]),e("div",W,[q,n(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>r.value.name=t),class:i(["flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("name")}])},null,2),[[u,r.value.name]]),a.value.hasOwnProperty("name")?(o(),p("p",G,l(a.value.name[0]),1)):d("",!0)]),e("div",H,[J,n(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>r.value.url=t),class:i(["flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("url")}])},null,2),[[u,r.value.url]]),a.value.hasOwnProperty("url")?(o(),p("p",K,l(a.value.url[0]),1)):d("",!0)]),e("div",Y,[ee,n(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>r.value.username=t),class:i(["flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("username")}])},null,2),[[u,r.value.username]]),a.value.hasOwnProperty("username")?(o(),p("p",re,l(a.value.username[0]),1)):d("",!0)]),e("div",ae,[se,n(e("input",{type:"password","onUpdate:modelValue":s[4]||(s[4]=t=>r.value.password=t),class:i(["flex-1 p-2 border border-gray-300 rounded-r focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("password")}])},null,2),[[u,r.value.password]]),a.value.hasOwnProperty("password")?(o(),p("p",te,l(a.value.password[0]),1)):d("",!0)])],40,X)]),footer:w(()=>[e("button",{class:"btn-blue mr-2",disabled:b.value,form:"form"},[$(A,{"is-loading":b.value},{default:w(()=>[k("Save")]),_:1},8,["is-loading"])],8,oe),e("button",{onClick:g,class:"btn-gray"},"Cancel"),c.value===_(m).Edit?(o(),h(_(I),{key:0,modelValue:r.value.isActive,"onUpdate:modelValue":s[5]||(s[5]=t=>r.value.isActive=t),class:"ml-auto toggle:off:red"},null,8,["modelValue"])):d("",!0)]),_:1})}}});export{ie as default};
