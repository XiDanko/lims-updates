import{a as h,u as D,P as I}from"./printService-Dt_6MRJ2.js";import{d as x,ak as k,A as N,o as d,c as l,g as a,b as p,t as m,a as u,i as B,p as b,T as M}from"./main-DmoZ1fz4.js";import{b as g}from"./toggle-DyRQkDOQ.js";import{P as i}from"./printTemplateType-BiK7zB0k.js";const $={class:"flex items-center gap-2"},C={key:0,class:"inline-flex items-center rounded border-2 border-gray-300"},U={class:"border-gray-300 p-1 border-e-2"},w={key:1,class:"inline-flex items-center rounded border-2 border-gray-300"},A={class:"border-gray-300 p-1 border-e-2"},z={key:2,class:"inline-flex items-center rounded border-2 border-gray-300"},E={class:"border-gray-300 p-1 border-e-2"},L={key:3,class:"inline-flex items-center rounded border-2 border-gray-300"},j={class:"border-gray-300 p-1 border-e-2"},J=x({__name:"VisitPrintToggles",props:{branchId:{}},setup(f,{expose:S}){const c=f,v=h(),{hasPermissionTo:n}=M(),{getDefaultTemplate:s}=D(),e=k({visitBarcode:localStorage.getItem("autoPrintVisitBarcode")==="yes",sampleWiseBarcodes:localStorage.getItem("autoPrintSampleWiseBarcodes")==="yes",departmentWiseBarcodes:localStorage.getItem("autoPrintDepartmentWiseBarcodes")==="yes",invoice:localStorage.getItem("autoPrintInvoice")==="yes"}),W=()=>{localStorage.setItem("autoPrintVisitBarcode",e.visitBarcode?"yes":"no"),localStorage.setItem("autoPrintSampleWiseBarcodes",e.sampleWiseBarcodes?"yes":"no"),localStorage.setItem("autoPrintDepartmentWiseBarcodes",e.departmentWiseBarcodes?"yes":"no"),localStorage.setItem("autoPrintInvoice",e.invoice?"yes":"no")},P=t=>{const r=s(i.VisitBarcode,t.branchId),o=s(i.SampleBarcode,t.branchId),_=s(i.SampleBarcodeDepWise,t.branchId),T=s(i.Invoice,t.branchId);if(n("Visit.printBarcode")&&r&&e.visitBarcode&&v.visitBarcode(t.id,{printMode:I.Direct,printer:r.printer,fileName:`${t.patient.name}-visit-barcode`}),n("Sample.print")&&(e.sampleWiseBarcodes||e.departmentWiseBarcodes)){const V=e.departmentWiseBarcodes?"departmentWise":"sampleTypeWise";let y;V==="sampleTypeWise"?y=o.printer:y=_.printer,v.sampleBarcodes(t.id,V,{printMode:I.Direct,printer:y,fileName:`${t.patient.name}-sample-barcodes`})}n("Invoice.print")&&e.invoice&&t.invoice&&v.invoice(t.invoice.id,{printMode:I.Direct,printer:T.printer,fileName:`${t.patient.name}-invoice`})};return N(()=>e,()=>{W()},{deep:!0}),S({print:P}),(t,r)=>(d(),l("div",$,[a(n)("Visit.printBarcode")&&a(s)(a(i).VisitBarcode,c.branchId)?(d(),l("div",C,[p("span",U,m(a(b)("Visit barcode")),1),u(a(g),{modelValue:e.visitBarcode,"onUpdate:modelValue":r[0]||(r[0]=o=>e.visitBarcode=o),class:"p-0.5"},null,8,["modelValue"])])):B("",!0),a(n)("Sample.print")&&a(s)(a(i).SampleBarcode,c.branchId)?(d(),l("div",w,[p("span",A,m(a(b)("Sample wise")),1),u(a(g),{modelValue:e.sampleWiseBarcodes,"onUpdate:modelValue":r[1]||(r[1]=o=>e.sampleWiseBarcodes=o),onChange:r[2]||(r[2]=o=>e.departmentWiseBarcodes=!1),class:"p-0.5"},null,8,["modelValue"])])):B("",!0),a(n)("Sample.print")&&a(s)(a(i).SampleBarcodeDepWise,c.branchId)?(d(),l("div",z,[p("span",E,m(a(b)("Department wise")),1),u(a(g),{modelValue:e.departmentWiseBarcodes,"onUpdate:modelValue":r[3]||(r[3]=o=>e.departmentWiseBarcodes=o),onChange:r[4]||(r[4]=o=>e.sampleWiseBarcodes=!1),class:"p-0.5"},null,8,["modelValue"])])):B("",!0),a(n)("Invoice.print")&&a(s)(a(i).Invoice,c.branchId)?(d(),l("div",L,[p("span",j,m(a(b)("Invoice")),1),u(a(g),{modelValue:e.invoice,"onUpdate:modelValue":r[5]||(r[5]=o=>e.invoice=o),class:"p-0.5"},null,8,["modelValue"])])):B("",!0)]))}});export{J as _};
