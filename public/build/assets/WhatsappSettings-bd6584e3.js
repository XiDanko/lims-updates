import{d as I,Y as P,g,u as C,x as O,Q as x,V as U,o as l,c as d,a as n,w as h,b as e,i as t,j as i,k as u,n as c,t as b,v as w,_ as R,m as A,h as W,F as B,a3 as T,a4 as z,T as D,a0 as L}from"./main-cee2eb24.js";import{M as N}from"./Master-e24133cb.js";import{b as p}from"./toggle-afba85dd.js";import{s as E}from"./multiselect-97a39018.js";import{A as F}from"./ActivityLogSidebar-55244b79.js";import"./_plugin-vue_export-helper-c27b6911.js";const $={class:"flex items-center gap-3"},j=e("h1",null,"Whatsapp Settings",-1),H=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"h-5 w-5"},[e("path",{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"})],-1),Q=[H],Y=["onSubmit"],q={class:"h-[calc(100vh-8.6rem)] overflow-y-auto flex flex-col justify-between"},G={key:0,class:"mb-3 flex flex-wrap items-center"},J=e("span",{class:"w-52 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Branch",-1),K={key:0,class:"ml-52 w-full text-sm text-red-500"},X={class:"mb-3 flex flex-wrap items-center"},Z=e("span",{class:"w-52 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Enabled",-1),ee={class:"mb-3 flex flex-wrap items-center"},se=e("span",{class:"w-52 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Instance ID",-1),re={key:0,class:"ml-52 w-full text-sm text-red-500"},oe={class:"mb-3 flex flex-wrap items-center"},ae=e("span",{class:"w-52 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Token",-1),te={key:0,class:"ml-52 w-full text-sm text-red-500"},le={class:"mb-3 flex flex-wrap items-center"},de=e("span",{class:"w-52 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Send Invoice",-1),ne={class:"mb-3 flex flex-wrap items-center"},ue=e("span",{class:"w-52 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Send Results",-1),ie={class:"mb-3 flex flex-wrap items-center"},ce=e("span",{class:"w-52 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Send Welcome Message",-1),be={class:"mb-3 flex flex-wrap items-center"},pe=e("span",{class:"w-52 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Send Results Message",-1),me={key:1,class:"mb-3 flex flex-wrap items-center"},ve=e("span",{class:"mb-1 block"},"Welcome Message",-1),fe={key:0,class:"w-full text-sm text-red-500"},ge={key:2,class:"flex flex-wrap items-center"},we=e("span",{class:"mb-1 block"},"Results Message",-1),_e={key:0,class:"w-full text-sm text-red-500"},he={class:"mt-3 border-t-2 border-gray-200"},ye={class:"mt-3 flex items-center"},xe=["disabled"],Oe=I({__name:"WhatsappSettings",setup(Ve){const V=P(),{hasPermissionTo:M}=D(),m=g(!1),s=g({}),_=C().user.branches,v=g(null),a=g({});O(()=>{v.value=_[0].id,y()});const y=async()=>{const{data:f}=await x.get(`/api/settings/whatsapp?branchId=${v.value}`);s.value=f.data},k=async()=>{m.value=!0;try{await x.patch("/api/settings/whatsapp",s.value),V.fetch(),L.fire(),a.value={}}catch(f){a.value=f.response.data.errors??{}}m.value=!1};return(f,r)=>{const S=U("tip");return l(),d(B,null,[n(N,null,{header:h(()=>[e("div",$,[j,t(M)("ActivityLog.list")?i((l(),d("button",{key:0,onClick:r[0]||(r[0]=o=>t(T).emit(t(z).Show,s.value.id)),class:"cursor-pointer"},Q)),[[S,"View Activities"]]):u("",!0)])]),body:h(()=>[e("form",{id:"form",onSubmit:W(k,["prevent"])},[e("div",q,[e("div",null,[t(_).length>1?(l(),d("div",G,[J,n(t(E),{modelValue:v.value,"onUpdate:modelValue":r[1]||(r[1]=o=>v.value=o),options:t(_),onSelect:y,searchable:!0,"value-prop":"id","track-by":"searchableForm",label:"name","can-clear":!1,"can-deselect":!1,class:c(["flex-1 border border-gray-300 !rounded-r",{"!border-red-500":a.value.hasOwnProperty("branchId")}])},null,8,["modelValue","options","class"]),a.value.hasOwnProperty("branchId")?(l(),d("p",K,b(a.value.branchId[0]),1)):u("",!0)])):u("",!0),e("div",X,[Z,n(t(p),{modelValue:s.value.enabled,"onUpdate:modelValue":r[2]||(r[2]=o=>s.value.enabled=o),class:"flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500"},null,8,["modelValue"])]),e("div",ee,[se,i(e("input",{"onUpdate:modelValue":r[3]||(r[3]=o=>s.value.instanceId=o),class:c(["flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("instanceId")}])},null,2),[[w,s.value.instanceId]]),a.value.hasOwnProperty("instanceId")?(l(),d("p",re,b(a.value.instanceId[0]),1)):u("",!0)]),e("div",oe,[ae,i(e("input",{"onUpdate:modelValue":r[4]||(r[4]=o=>s.value.token=o),class:c(["flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("token")}])},null,2),[[w,s.value.token]]),a.value.hasOwnProperty("token")?(l(),d("p",te,b(a.value.token[0]),1)):u("",!0)]),e("div",le,[de,n(t(p),{modelValue:s.value.sendInvoice,"onUpdate:modelValue":r[5]||(r[5]=o=>s.value.sendInvoice=o),class:"flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500"},null,8,["modelValue"])]),e("div",ne,[ue,n(t(p),{modelValue:s.value.sendResult,"onUpdate:modelValue":r[6]||(r[6]=o=>s.value.sendResult=o),class:"flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500"},null,8,["modelValue"])]),e("div",ie,[ce,n(t(p),{modelValue:s.value.sendWelcomeMessage,"onUpdate:modelValue":r[7]||(r[7]=o=>s.value.sendWelcomeMessage=o),class:"flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500"},null,8,["modelValue"])]),e("div",be,[pe,n(t(p),{modelValue:s.value.sendResultMessage,"onUpdate:modelValue":r[8]||(r[8]=o=>s.value.sendResultMessage=o),class:"flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500"},null,8,["modelValue"])]),s.value.sendWelcomeMessage?(l(),d("div",me,[ve,i(e("textarea",{"onUpdate:modelValue":r[9]||(r[9]=o=>s.value.welcomeMessage=o),rows:"5",class:c(["w-full rounded border border-gray-300 p-2 focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("welcomeMessage")}])},null,2),[[w,s.value.welcomeMessage]]),a.value.hasOwnProperty("welcomeMessage")?(l(),d("p",fe,b(a.value.welcomeMessage[0]),1)):u("",!0)])):u("",!0),s.value.sendResultMessage?(l(),d("div",ge,[we,i(e("textarea",{"onUpdate:modelValue":r[10]||(r[10]=o=>s.value.resultMessage=o),rows:"5",class:c(["w-full rounded border border-gray-300 p-2 focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("resultMessage")}])},null,2),[[w,s.value.resultMessage]]),a.value.hasOwnProperty("resultMessage")?(l(),d("p",_e,b(a.value.resultMessage[0]),1)):u("",!0)])):u("",!0)]),e("footer",he,[e("div",ye,[e("button",{class:"mr-auto btn-blue",disabled:m.value,form:"form"},[n(R,{"is-loading":m.value},{default:h(()=>[A("Save")]),_:1},8,["is-loading"])],8,xe)])])])],40,Y)]),_:1}),n(F)],64)}}});export{Oe as default};
