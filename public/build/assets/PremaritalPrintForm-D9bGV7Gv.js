import{d as I,e as f,x as T,Q as C,o as u,R as N,w as l,k as p,t as o,g as s,b as r,c as _,i as h,f as R,a as V,_ as $,a4 as M,m as S,l as B,Z as D,p as c,$ as A}from"./main-DNdNUUJ7.js";import{A as v}from"./attachmentType-BPw9qDR8.js";import{a as E,u as F,P as L}from"./printService-Bcj_RmEK.js";import{P as Q}from"./printTemplateType-BiK7zB0k.js";const Z={key:0},j={class:"text-center"},q=["src"],z={key:1},G={class:"text-center"},H=["src"],J=["disabled"],Y=I({__name:"PremaritalPrintForm",emits:["close"],setup(K,{emit:b}){const P=b,g=S(),y=B(),e=f({}),i=f(!1),m=E(),{getDefaultTemplate:w}=F();T(()=>{k(g.params.id)});const k=async n=>{const{data:t}=await C.get(`/api/premarital/visits/${n}`);e.value=t.data},d=async n=>{const t=w(Q.PremaritalResult,e.value.branchId);if(!t){D.fire({icon:"error",title:c("No default print template")});return}i.value=!0;try{await m.premaritalResult(e.value.id,{printMode:n,printer:t.printer,fileName:`${e.value.number}-premarital-results`}),A.fire()}catch{}i.value=!1},x=()=>{P("close"),y.back()};return(n,t)=>(u(),N(M,null,{header:l(()=>[p(o(s(c)("Print Results")),1)]),body:l(()=>[r("form",{id:"form",onSubmit:t[0]||(t[0]=R(a=>d(s(L).Direct),["prevent","stop"])),class:"grid grid-cols-2 gap-4"},[e.value.husbandInformation?(u(),_("div",Z,[r("h1",j,o(e.value.husbandInformation.name),1),r("img",{src:e.value.husbandInformation.attachments.find(a=>a.type===s(v).ProfilePicture)?.path,alt:"",class:"rounded-lg shadow"},null,8,q)])):h("",!0),e.value.wifeInformation?(u(),_("div",z,[r("h1",G,o(e.value.wifeInformation.name),1),r("img",{src:e.value.wifeInformation.attachments.find(a=>a.type===s(v).ProfilePicture)?.path,alt:"",class:"rounded-lg shadow"},null,8,H)])):h("",!0)],32)]),footer:l(()=>[r("button",{class:"me-2 btn-blue",disabled:i.value,form:"form",onClick:t[1]||(t[1]=a=>d(s(m).detectPrintMode(a)))},[V($,{"is-loading":i.value},{default:l(()=>[p(o(s(c)("Print")),1)]),_:1},8,["is-loading"])],8,J),r("button",{onClick:x,class:"btn-gray"},o(s(c)("Cancel")),1)]),_:1}))}});export{Y as default};
