import{d as C,u as S,e as v,x as D,Q as P,U as B,o,R as U,w as f,k as w,b as a,g as d,c as l,a as y,n as c,t as i,i as n,h as k,v as I,f as N,_ as z,a9 as M,m as R,l as T,Z as $}from"./main-56f58ed8.js";import{s as h}from"./multiselect-167e14f5.js";const A=["onSubmit"],E={key:0,class:"col-span-2 flex flex-wrap mb-3"},F=a("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Branch",-1),Q={key:0,class:"ml-24 w-full text-red-500 text-sm"},Z={class:"col-span-2 flex flex-wrap mb-3"},j=a("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Source",-1),q={key:0,class:"ml-24 w-full text-red-500 text-sm"},G={class:"col-span-2 flex flex-wrap mb-3"},H=a("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Destination",-1),J={key:0,class:"ml-24 w-full text-red-500 text-sm"},K={class:"flex flex-wrap mb-3"},W=a("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Price",-1),X=a("span",{class:"py-2 px-4 border border-gray-300 border-l-0 rounded-r bg-gray-100"},"%",-1),Y={key:0,class:"ml-24 w-full text-red-500 text-sm"},ee={class:"flex flex-wrap"},ae=a("span",{class:"w-24 p-2 border border-gray-300 border-r-0 rounded-l bg-gray-100"},"Discount",-1),re=a("span",{class:"py-2 px-4 border border-gray-300 border-l-0 rounded-r bg-gray-100"},"%",-1),se={key:0,class:"ml-24 w-full text-red-500 text-sm"},te=["disabled"],de=C({__name:"PriceListCopyForm",setup(oe){R();const L=T(),u=S().user.branches,p=v(!1),e=v({}),b=v([]),r=v({});D(()=>{u.length===1&&(r.value.branchId=u[0].id,g())});const g=async()=>{const{data:m}=await P.get(`/api/price-lists/list?branchId=${r.value.branchId}`);b.value=m.data},V=()=>{b.value=[],r.value={branchId:r.value.branchId}},O=async()=>{p.value=!0;try{await P.post("/api/tools/copy-price-list",r.value),$.fire(),_()}catch(m){e.value=m.response.data.errors??{}}p.value=!1},_=()=>{L.back()};return(m,s)=>{const x=B("maska");return o(),U(M,null,{header:f(()=>[w("Copy Price List")]),body:f(()=>[a("form",{id:"form",onSubmit:N(O,["prevent","stop"])},[d(u).length>1?(o(),l("div",E,[F,y(d(h),{modelValue:r.value.branchId,"onUpdate:modelValue":s[0]||(s[0]=t=>r.value.branchId=t),options:d(u),onSelect:g,onChange:V,searchable:!0,"value-prop":"id","track-by":"name",label:"name","can-deselect":!1,"can-clear":!1,class:c(["flex-1 border border-gray-300 !rounded-r",{"!border-red-500":e.value.hasOwnProperty("branchId")}])},null,8,["modelValue","options","class"]),e.value.hasOwnProperty("branchId")?(o(),l("p",Q,i(e.value.branchId[0]),1)):n("",!0)])):n("",!0),a("div",Z,[j,y(d(h),{modelValue:r.value.sourcePriceListId,"onUpdate:modelValue":s[1]||(s[1]=t=>r.value.sourcePriceListId=t),options:b.value,searchable:!0,"value-prop":"id","track-by":"name",label:"name","can-clear":!1,"can-deselect":!1,class:c(["flex-1 border border-gray-300 !rounded-r",{"!border-red-500":e.value.hasOwnProperty("sourcePriceListId")}])},null,8,["modelValue","options","class"]),e.value.hasOwnProperty("sourcePriceListId")?(o(),l("p",q,i(e.value.sourcePriceListId[0]),1)):n("",!0)]),a("div",G,[H,y(d(h),{modelValue:r.value.destinationPriceListId,"onUpdate:modelValue":s[2]||(s[2]=t=>r.value.destinationPriceListId=t),options:b.value,searchable:!0,"value-prop":"id","track-by":"name",label:"name","can-clear":!1,"can-deselect":!1,class:c(["flex-1 border border-gray-300 !rounded-r",{"!border-red-500":e.value.hasOwnProperty("destinationPriceListId")}])},null,8,["modelValue","options","class"]),e.value.hasOwnProperty("destinationPriceListId")?(o(),l("p",J,i(e.value.destinationPriceListId[0]),1)):n("",!0)]),a("div",K,[W,k(a("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>r.value.pricePercentage=t),size:"1","data-maska":"0","data-maska-tokens":"0:[0-9]:multiple",class:c(["flex-1 p-2 border border-gray-300 focus:border-blue-500",{"!border-red-500":e.value.hasOwnProperty("pricePercentage")}])},null,2),[[I,r.value.pricePercentage],[x]]),X,e.value.hasOwnProperty("pricePercentage")?(o(),l("p",Y,i(e.value.pricePercentage[0]),1)):n("",!0)]),a("div",ee,[ae,k(a("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>r.value.discountPercentage=t),size:"1","data-maska":"0","data-maska-tokens":"0:[0-9]:multiple",class:c(["flex-1 p-2 border border-gray-300 focus:border-blue-500",{"!border-red-500":e.value.hasOwnProperty("discountPercentage")}])},null,2),[[I,r.value.discountPercentage],[x]]),re,e.value.hasOwnProperty("discountPercentage")?(o(),l("p",se,i(e.value.discountPercentage[0]),1)):n("",!0)])],40,A)]),footer:f(()=>[a("button",{class:"btn-blue mr-2",disabled:p.value,form:"form"},[y(z,{"is-loading":p.value},{default:f(()=>[w("Save")]),_:1},8,["is-loading"])],8,te),a("button",{onClick:_,class:"btn-gray"},"Cancel")]),_:1})}}});export{de as default};
