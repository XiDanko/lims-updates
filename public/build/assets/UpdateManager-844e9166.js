import{M as y}from"./Master-fc459851.js";import{d as w,e as l,x as C,Q as d,o as a,R as U,w as r,k as u,b as n,t as f,g as m,c as s,a as g,_ as h,i as o,a3 as V,Y as M}from"./main-56f58ed8.js";import"./_plugin-vue_export-helper-c27b6911.js";const N={class:"h-[calc(100vh-8.6rem)] overflow-y-auto"},B={class:"flex items-center gap-2"},A={class:"font-semibold text-lg"},F=["disabled"],I={key:0,class:"my-5"},L={key:1,class:"flex items-center gap-2"},T=n("p",{class:"font-semibold text-lg text-green-500"},"Application is up to date.",-1),z=[T],D={key:2,class:"flex items-center gap-2"},E={class:"font-semibold text-lg text-red-500"},P=["disabled"],$=w({__name:"UpdateManager",setup(Q){const{hasPermissionTo:p}=M(),_=l("v1.0.0"),t=l(null),i=l(!1),c=l(!1);C(()=>v());const v=async()=>{const{data:e}=await d.get("/api/update-manager/current-version");_.value=e},k=async()=>{i.value=!0;try{const{data:e}=await d.post("/api/update-manager/check-for-update");t.value=e||!1}catch{}i.value=!1},b=async()=>{const{isConfirmed:e}=await V.fire();if(e){c.value=!0;try{await d.post("/api/update-manager/update"),window.open("/settings/update-manager","_self")}catch{}c.value=!1}};return(e,x)=>(a(),U(y,null,{header:r(()=>[u("Update Manager")]),body:r(()=>[n("div",N,[n("div",B,[n("p",A,"Application Version: "+f(_.value),1),m(p)("UpdateManager.checkForUpdate")?(a(),s("button",{key:0,class:"btn-blue p-1",onClick:k,disabled:i.value},[g(h,{"is-loading":i.value},{default:r(()=>[u("Check for update")]),_:1},8,["is-loading"])],8,F)):o("",!0)]),t.value!==null?(a(),s("hr",I)):o("",!0),t.value===!1?(a(),s("div",L,z)):o("",!0),t.value?(a(),s("div",D,[n("p",E,"New version is available: "+f(t.value),1),m(p)("UpdateManager.update")?(a(),s("button",{key:0,class:"btn-teal p-1 px-2",onClick:b,disabled:c.value},[g(h,{"is-loading":c.value},{default:r(()=>[u("Update")]),_:1},8,["is-loading"])],8,P)):o("",!0)])):o("",!0)])]),_:1}))}});export{$ as default};
