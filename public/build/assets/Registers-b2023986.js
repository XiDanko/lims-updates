import{d as V,g as v,x as R,y as z,o as n,c as g,a as y,j as _,v as H,b as t,a1 as T,w as c,i as d,Q as k,r as w,V as $,m as S,k as f,F as L,a2 as U,t as a,R as x,T as B}from"./main-5548143a.js";import{M as D}from"./Master-c8d301f4.js";import{u as N}from"./urlQueryManager-a6ec7c9d.js";import{_ as E}from"./BranchFilter.vue_vue_type_script_setup_true_lang-9c1eb286.js";import{i as P}from"./index.es-721e1c12.js";import{d as Q}from"./datepickerPresets-afa0dfdf.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./multiselect-30de6652.js";const F={class:"ml-auto flex items-center gap-2"},I=["onKeyup"],Y=V({__name:"RegistersFilter",emits:["change"],setup(M,{emit:m}){const i=new URLSearchParams(location.search),u=v(""),l=v(""),o=v([null,null]);R(()=>{b()});const h=z(()=>o.value[0]===null||o.value[1]===null?"":`${o.value[0]}~${o.value[1]}`),b=()=>{u.value=i.get("branchId")??"",l.value=i.get("userName")??"",i.get("dateRange")&&(o.value=i.get("dateRange").split("~"))},p=()=>{const C=`branchId=${u.value}&userName=${l.value}&dateRange=${h.value}&page=1`;m("change",C)};return(C,s)=>(n(),g("div",F,[y(E,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=r=>u.value=r),onChange:p},null,8,["modelValue"]),_(t("input",{"onUpdate:modelValue":s[1]||(s[1]=r=>l.value=r),onKeyup:T(p,["enter"]),type:"text",placeholder:"User name",class:"w-56 rounded border border-gray-300 p-1.5 focus:border-blue-500"},null,40,I),[[H,l.value]]),y(d(P),{range:"",lang:{formatLocale:{firstDayOfWeek:6}},type:"date","value-type":"format",format:"YYYY-MM-DD",shortcuts:d(Q),placeholder:"Select date range",value:o.value,"onUpdate:value":s[2]||(s[2]=r=>o.value=r),onChange:p,class:"!w-56","input-class":"w-full rounded border border-gray-300 p-1.5 focus:border-blue-500"},{"icon-calendar":c(()=>[]),_:1},8,["shortcuts","value"])]))}}),A={class:"mb-5 flex items-center"},K={class:"pr-1 h-[calc(100vh-12.2rem)] overflow-y-auto"},j={class:"w-full"},q={class:"sticky top-0 z-10 text-left"},O=t("th",{class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},"User",-1),W=t("th",{class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},"Payments",-1),G=t("th",{class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},"Discounts",-1),J=t("th",{class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},"Refunds",-1),X=t("th",{class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},"Transfers-in",-1),Z=t("th",{class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},"Transfers-out",-1),t1=t("th",{class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},"Top-ups",-1),e1=t("th",{class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},"Expenses",-1),s1=t("th",{class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},"Profit",-1),o1=t("th",{class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},"Cash",-1),r1={key:0,class:"first-of-type:rounded-tl last-of-type:rounded-tr bg-gray-600 p-2 font-semibold text-white"},a1={class:"transition even:bg-gray-100"},n1={class:"border border-gray-200 px-2 py-1"},l1={class:"border border-gray-200 px-2 py-1"},d1={class:"border border-gray-200 px-2 py-1"},c1={class:"border border-gray-200 px-2 py-1"},i1={class:"border border-gray-200 px-2 py-1"},u1={class:"border border-gray-200 px-2 py-1"},p1={class:"border border-gray-200 px-2 py-1"},C1={class:"border border-gray-200 px-2 py-1"},f1={class:"border border-gray-200 px-2 py-1"},g1={class:"border border-gray-200 px-2 py-1"},h1={key:0,class:"border border-gray-200 px-2 py-1 text-center"},_1={class:"flex items-center justify-center gap-3"},y1=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"mx-auto h-5 w-5"},[t("path",{d:"M16 96C16 69.49 37.49 48 64 48C90.51 48 112 69.49 112 96C112 122.5 90.51 144 64 144C37.49 144 16 122.5 16 96zM480 64C497.7 64 512 78.33 512 96C512 113.7 497.7 128 480 128H192C174.3 128 160 113.7 160 96C160 78.33 174.3 64 192 64H480zM480 224C497.7 224 512 238.3 512 256C512 273.7 497.7 288 480 288H192C174.3 288 160 273.7 160 256C160 238.3 174.3 224 192 224H480zM480 384C497.7 384 512 398.3 512 416C512 433.7 497.7 448 480 448H192C174.3 448 160 433.7 160 416C160 398.3 174.3 384 192 384H480zM16 416C16 389.5 37.49 368 64 368C90.51 368 112 389.5 112 416C112 442.5 90.51 464 64 464C37.49 464 16 442.5 16 416zM112 256C112 282.5 90.51 304 64 304C37.49 304 16 282.5 16 256C16 229.5 37.49 208 64 208C90.51 208 112 229.5 112 256z"})],-1),m1=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",fill:"currentColor",class:"mx-auto h-6 w-6"},[t("path",{d:"M535 7.03C544.4-2.343 559.6-2.343 568.1 7.029L632.1 71.02C637.5 75.52 640 81.63 640 87.99C640 94.36 637.5 100.5 632.1 104.1L568.1 168.1C559.6 178.3 544.4 178.3 535 168.1C525.7 159.6 525.7 144.4 535 135L558.1 111.1L384 111.1C370.7 111.1 360 101.2 360 87.99C360 74.74 370.7 63.99 384 63.99L558.1 63.1L535 40.97C525.7 31.6 525.7 16.4 535 7.03V7.03zM104.1 376.1L81.94 400L255.1 399.1C269.3 399.1 279.1 410.7 279.1 423.1C279.1 437.2 269.3 447.1 255.1 447.1L81.95 448L104.1 471C114.3 480.4 114.3 495.6 104.1 504.1C95.6 514.3 80.4 514.3 71.03 504.1L7.029 440.1C2.528 436.5-.0003 430.4 0 423.1C0 417.6 2.529 411.5 7.03 407L71.03 343C80.4 333.7 95.6 333.7 104.1 343C114.3 352.4 114.3 367.6 104.1 376.1H104.1zM95.1 64H337.9C334.1 71.18 332 79.34 332 87.1C332 116.7 355.3 139.1 384 139.1L481.1 139.1C484.4 157.5 494.9 172.5 509.4 181.9C511.1 184.3 513.1 186.6 515.2 188.8C535.5 209.1 568.5 209.1 588.8 188.8L608 169.5V384C608 419.3 579.3 448 544 448H302.1C305.9 440.8 307.1 432.7 307.1 423.1C307.1 395.3 284.7 371.1 255.1 371.1L158.9 372C155.5 354.5 145.1 339.5 130.6 330.1C128.9 327.7 126.9 325.4 124.8 323.2C104.5 302.9 71.54 302.9 51.23 323.2L31.1 342.5V128C31.1 92.65 60.65 64 95.1 64V64zM95.1 192C131.3 192 159.1 163.3 159.1 128H95.1V192zM544 384V320C508.7 320 480 348.7 480 384H544zM319.1 352C373 352 416 309 416 256C416 202.1 373 160 319.1 160C266.1 160 223.1 202.1 223.1 256C223.1 309 266.1 352 319.1 352z"})],-1),b1=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",fill:"currentColor",class:"mx-auto h-5 w-5 cursor-pointer text-blue-500"},[t("path",{d:"M568.2 336.3c-13.12-17.81-38.14-21.66-55.93-8.469l-119.7 88.17h-120.6c-8.748 0-15.1-7.25-15.1-15.99c0-8.75 7.25-16 15.1-16h78.25c15.1 0 30.75-10.88 33.37-26.62c3.25-20-12.12-37.38-31.62-37.38H191.1c-26.1 0-53.12 9.25-74.12 26.25l-46.5 37.74L15.1 383.1C7.251 383.1 0 391.3 0 400v95.98C0 504.8 7.251 512 15.1 512h346.1c22.03 0 43.92-7.188 61.7-20.27l135.1-99.52C577.5 379.1 581.3 354.1 568.2 336.3zM279.3 175C271.7 173.9 261.7 170.3 252.9 167.1L248 165.4C235.5 160.1 221.8 167.5 217.4 179.1s2.121 26.2 14.59 30.64l4.655 1.656c8.486 3.061 17.88 6.095 27.39 8.312V232c0 13.25 10.73 24 23.98 24s24-10.75 24-24V221.6c25.27-5.723 42.88-21.85 46.1-45.72c8.688-50.05-38.89-63.66-64.42-70.95L288.4 103.1C262.1 95.64 263.6 92.42 264.3 88.31c1.156-6.766 15.3-10.06 32.21-7.391c4.938 .7813 11.37 2.547 19.65 5.422c12.53 4.281 26.21-2.312 30.52-14.84s-2.309-26.19-14.84-30.53c-7.602-2.627-13.92-4.358-19.82-5.721V24c0-13.25-10.75-24-24-24s-23.98 10.75-23.98 24v10.52C238.8 40.23 221.1 56.25 216.1 80.13C208.4 129.6 256.7 143.8 274.9 149.2l6.498 1.875c31.66 9.062 31.15 11.89 30.34 16.64C310.6 174.5 296.5 177.8 279.3 175z"})],-1),x1=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"mx-auto h-5 w-5"},[t("path",{d:"M326.7 403.7C304.7 411.6 280.8 416 256 416C231.2 416 207.3 411.6 185.3 403.7C184.1 403.6 184.7 403.5 184.5 403.4C154.4 392.4 127.6 374.6 105.9 352C70.04 314.6 48 263.9 48 208C48 93.12 141.1 0 256 0C370.9 0 464 93.12 464 208C464 263.9 441.1 314.6 406.1 352C405.1 353 404.1 354.1 403.1 355.1C381.7 376.4 355.7 393.2 326.7 403.7L326.7 403.7zM235.9 111.1V118C230.3 119.2 224.1 120.9 220 123.1C205.1 129.9 192.1 142.5 188.9 160.8C187.1 171 188.1 180.9 192.3 189.8C196.5 198.6 203 204.8 209.6 209.3C221.2 217.2 236.5 221.8 248.2 225.3L250.4 225.9C264.4 230.2 273.8 233.3 279.7 237.6C282.2 239.4 283.1 240.8 283.4 241.7C283.8 242.5 284.4 244.3 283.7 248.3C283.1 251.8 281.2 254.8 275.7 257.1C269.6 259.7 259.7 261 246.9 259C240.9 258 230.2 254.4 220.7 251.2C218.5 250.4 216.3 249.7 214.3 249C203.8 245.5 192.5 251.2 189 261.7C185.5 272.2 191.2 283.5 201.7 286.1C202.9 287.4 204.4 287.9 206.1 288.5C213.1 291.2 226.4 295.4 235.9 297.6V304C235.9 315.1 244.9 324.1 255.1 324.1C267.1 324.1 276.1 315.1 276.1 304V298.5C281.4 297.5 286.6 295.1 291.4 293.9C307.2 287.2 319.8 274.2 323.1 255.2C324.9 244.8 324.1 234.8 320.1 225.7C316.2 216.7 309.9 210.1 303.2 205.3C291.1 196.4 274.9 191.6 262.8 187.9L261.1 187.7C247.8 183.4 238.2 180.4 232.1 176.2C229.5 174.4 228.7 173.2 228.5 172.7C228.3 172.3 227.7 171.1 228.3 167.7C228.7 165.7 230.2 162.4 236.5 159.6C242.1 156.7 252.9 155.1 265.1 156.1C269.5 157.7 283 160.3 286.9 161.3C297.5 164.2 308.5 157.8 311.3 147.1C314.2 136.5 307.8 125.5 297.1 122.7C292.7 121.5 282.7 119.5 276.1 118.3V112C276.1 100.9 267.1 91.9 256 91.9C244.9 91.9 235.9 100.9 235.9 112V111.1zM48 352H63.98C83.43 377.9 108 399.7 136.2 416H64V448H448V416H375.8C403.1 399.7 428.6 377.9 448 352H464C490.5 352 512 373.5 512 400V464C512 490.5 490.5 512 464 512H48C21.49 512 0 490.5 0 464V400C0 373.5 21.49 352 48 352H48z"})],-1),T1=V({__name:"Registers",setup(M){const m=v([]),{updateUrlQuery:i,urlQuery:u}=N(),{hasPermissionTo:l,hasAnyPermission:o}=B();R(()=>h(location.search));const h=async b=>{const p=await i(b),{data:C}=await k.get(`/api/registers?${p}`);m.value=C.data};return(b,p)=>{const C=w("router-view"),s=w("router-link"),r=$("tip");return n(),g(L,null,[y(C,{onClose:h}),y(D,null,{header:c(()=>[S("Registers")]),body:c(()=>[t("div",A,[y(Y,{onChange:h})]),t("section",K,[t("table",j,[t("thead",null,[t("tr",q,[O,W,G,J,X,Z,t1,e1,s1,o1,d(o)("Register.addExpenses","Register.topUp","Register.transfer","RegisterTransaction.view")?(n(),g("th",r1)):f("",!0)])]),t("tbody",null,[(n(!0),g(L,null,U(m.value,e=>(n(),g("tr",a1,[t("td",n1,a(e.userName),1),t("td",l1,a(e.totalPayment?.toLocaleString()),1),t("td",d1,a(e.totalDiscount?.toLocaleString()),1),t("td",c1,a(e.totalRefund?.toLocaleString()),1),t("td",i1,a(e.totalTransferIn?.toLocaleString()),1),t("td",u1,a(e.totalTransferOut?.toLocaleString()),1),t("td",p1,a(e.totalTopUp?.toLocaleString()),1),t("td",C1,a(e.totalExpense?.toLocaleString()),1),t("td",f1,a(e.profit?.toLocaleString()),1),t("td",g1,a(e.cash?.toLocaleString()),1),d(o)("Register.addExpenses","Register.topUp","Register.transfer","RegisterTransaction.view")?(n(),g("td",h1,[t("div",_1,[d(l)("RegisterTransaction.view")?_((n(),x(s,{key:0,to:`/registers/${e.id}/transactions?dateRange=${d(u).get("dateRange")??""}`,class:"cursor-pointer text-blue-500"},{default:c(()=>[y1]),_:2},1032,["to"])),[[r,"View Transactions"]]):f("",!0),d(l)("Register.transfer")?_((n(),x(s,{key:1,to:`/registers/${e.id}/transactions/transfer/create`,class:"cursor-pointer text-blue-500"},{default:c(()=>[m1]),_:2},1032,["to"])),[[r,"Transfer"]]):f("",!0),d(l)("Register.addExpense")?_((n(),x(s,{key:2,to:`/registers/${e.id}/transactions/expense/create`,class:"cursor-pointer text-blue-500"},{default:c(()=>[b1]),_:2},1032,["to"])),[[r,"Add Expense"]]):f("",!0),d(l)("Register.topUp")?_((n(),x(s,{key:3,to:`/registers/${e.id}/transactions/top-up/create`,class:"cursor-pointer text-blue-500"},{default:c(()=>[x1]),_:2},1032,["to"])),[[r,"Top-up"]]):f("",!0)])])):f("",!0)]))),256))])])])]),_:1})],64)}}});export{T1 as default};
