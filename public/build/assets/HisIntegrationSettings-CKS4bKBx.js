import{d as T,X as O,e as h,u as C,x as R,Q as g,U,o,c as n,a as d,w as b,b as e,g as c,h as u,i as r,v as _,n as i,t as y,W as x,_ as E,k as A,f as B,F as I,a2 as M,a3 as $,T as z,$ as L}from"./main-BgbWFIXK.js";import{M as N}from"./Master-Bb3753-s.js";import{A as D}from"./ActivityLogSidebar-DZ3mPV78.js";import{b as H}from"./toggle-CP_W0i88.js";import{_ as F}from"./BranchSelect.vue_vue_type_script_setup_true_lang-ChkyAztq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./multiselect-DeMhawmc.js";const j={class:"flex items-center gap-3"},Q=e("h1",null,"His Integration Settings",-1),W=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"h-5 w-5"},[e("path",{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"})],-1),X=[W],q={class:"h-[calc(100vh-8.6rem)] overflow-y-auto flex flex-col justify-between pt-2 pe-1"},G={class:"grid grid-cols-1 gap-4"},J={key:0,class:"relative"},K={class:"relative"},Y=e("label",{class:"label"},"Send Results",-1),Z={key:1,class:"relative"},ee={key:0,class:"text-sm text-red-500"},te={key:2,class:"relative"},se={class:"flex items-center gap-5 input peer"},ae={class:"flex items-center gap-1"},le=e("span",null,"Basic",-1),oe={class:"flex items-center gap-1"},ne=e("span",null,"Bearer",-1),re=e("label",{class:"label"},"Authentication Type",-1),ie={key:3,class:"relative"},ue={key:0,class:"text-sm text-red-500"},de={key:4,class:"relative"},ce={key:0,class:"text-sm text-red-500"},pe={key:5,class:"relative"},ve={key:0,class:"text-sm text-red-500"},me={class:"mt-3 border-t-2 border-gray-200"},he={class:"mt-3 flex items-center"},_e=["disabled"],Se=T({__name:"HisIntegrationSettings",setup(ye){const k=O(),{hasPermissionTo:V}=z(),p=h(!1),t=h({}),w=C().user.branches,v=h(null),s=h({});R(()=>{v.value=w[0].id,f()});const f=async()=>{const{data:m}=await g.get(`/api/settings/his-integration?branchId=${v.value}`);t.value=m.data},S=async()=>{p.value=!0;try{await g.patch("/api/settings/his-integration",t.value),k.fetch(),s.value={},L.fire()}catch(m){s.value=m.response.data.errors??{}}p.value=!1};return(m,a)=>{const P=U("tip");return o(),n(I,null,[d(N,null,{header:b(()=>[e("div",j,[Q,c(V)("ActivityLog.list")?u((o(),n("button",{key:0,onClick:a[0]||(a[0]=l=>c(M).emit(c($).Show,t.value.id)),class:"cursor-pointer"},X)),[[P,"View Activities"]]):r("",!0)])]),body:b(()=>[e("form",{id:"form",onSubmit:B(S,["prevent"])},[e("div",q,[e("div",G,[c(w).length>1?(o(),n("div",J,[d(F,{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=l=>v.value=l),error:s.value.branchId,onSelect:f},null,8,["modelValue","error"])])):r("",!0),e("div",K,[d(c(H),{modelValue:t.value.sendResults,"onUpdate:modelValue":a[2]||(a[2]=l=>t.value.sendResults=l),class:"input peer pt-2.5"},null,8,["modelValue"]),Y]),t.value.sendResults?(o(),n("div",Z,[u(e("input",{"onUpdate:modelValue":a[3]||(a[3]=l=>t.value.resultsEndpoint=l),class:i(["input peer",{"border-red-500":s.value.hasOwnProperty("resultsEndpoint")}])},null,2),[[_,t.value.resultsEndpoint]]),e("label",{class:i(["label",{"text-red-500":s.value.hasOwnProperty("resultsEndpoint")}])},"Results Endpoint",2),s.value.hasOwnProperty("resultsEndpoint")?(o(),n("p",ee,y(s.value.resultsEndpoint[0]),1)):r("",!0)])):r("",!0),t.value.sendResults?(o(),n("div",te,[e("div",se,[e("label",ae,[u(e("input",{type:"radio",value:"basic","onUpdate:modelValue":a[4]||(a[4]=l=>t.value.authenticationType=l)},null,512),[[x,t.value.authenticationType]]),le]),e("label",oe,[u(e("input",{type:"radio",value:"bearer","onUpdate:modelValue":a[5]||(a[5]=l=>t.value.authenticationType=l)},null,512),[[x,t.value.authenticationType]]),ne])]),re])):r("",!0),t.value.sendResults&&t.value.authenticationType==="basic"?(o(),n("div",ie,[u(e("input",{"onUpdate:modelValue":a[6]||(a[6]=l=>t.value.username=l),class:i(["input peer",{"border-red-500":s.value.hasOwnProperty("username")}])},null,2),[[_,t.value.username]]),e("label",{class:i(["label",{"text-red-500":s.value.hasOwnProperty("username")}])},"Username",2),s.value.hasOwnProperty("username")?(o(),n("p",ue,y(s.value.username[0]),1)):r("",!0)])):r("",!0),t.value.sendResults&&t.value.authenticationType==="basic"?(o(),n("div",de,[u(e("input",{"onUpdate:modelValue":a[7]||(a[7]=l=>t.value.password=l),type:"password",class:i(["input peer",{"border-red-500":s.value.hasOwnProperty("password")}])},null,2),[[_,t.value.password]]),e("label",{class:i(["label",{"text-red-500":s.value.hasOwnProperty("password")}])},"Password",2),s.value.hasOwnProperty("password")?(o(),n("p",ce,y(s.value.password[0]),1)):r("",!0)])):r("",!0),t.value.sendResults&&t.value.authenticationType==="bearer"?(o(),n("div",pe,[u(e("input",{"onUpdate:modelValue":a[8]||(a[8]=l=>t.value.token=l),class:i(["input peer",{"border-red-500":s.value.hasOwnProperty("token")}])},null,2),[[_,t.value.token]]),e("label",{class:i(["label",{"text-red-500":s.value.hasOwnProperty("token")}])},"Token",2),s.value.hasOwnProperty("token")?(o(),n("p",ve,y(s.value.token[0]),1)):r("",!0)])):r("",!0)]),e("footer",me,[e("div",he,[e("button",{class:"me-auto btn-blue",disabled:p.value,form:"form"},[d(E,{"is-loading":p.value},{default:b(()=>[A("Save")]),_:1},8,["is-loading"])],8,_e)])])])],32)]),_:1}),d(D)],64)}}});export{Se as default};
