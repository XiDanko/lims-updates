import{d as S,f as B,e as E,g as f,x as M,Q as y,V as $,o,R as h,w,m as k,t as l,i as _,b as e,j as n,v as u,n as i,c as p,k as d,h as A,a as D,_ as F,a5 as T,a0 as z}from"./main-0c5e983d.js";import{b as I}from"./toggle-f29ee038.js";import{F as m}from"./formMode-f60a729f.js";const X=["onSubmit"],L={class:"mb-3 flex flex-wrap items-center"},Q=e("span",{class:"w-24 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Identifier",-1),W={key:0,class:"ml-24 w-full text-sm text-red-500"},Z={class:"mb-3 flex flex-wrap items-center"},q=e("span",{class:"w-24 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Name",-1),G={key:0,class:"ml-24 w-full text-sm text-red-500"},H={class:"mb-3 flex flex-wrap items-center"},J=e("span",{class:"w-24 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Url",-1),K={key:0,class:"ml-24 w-full text-sm text-red-500"},Y={class:"mb-3 flex flex-wrap items-center"},ee=e("span",{class:"w-24 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Username",-1),re={key:0,class:"ml-24 w-full text-sm text-red-500"},ae={class:"mb-3 flex flex-wrap items-center"},se=e("span",{class:"w-24 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Password",-1),te={key:0,class:"ml-24 w-full text-sm text-red-500"},oe=["disabled"],ie=S({__name:"ReportForm",emits:["close"],setup(le,{emit:V}){const x=B(),P=E(),r=f({username:"jasperadmin",password:"jasperadmin"}),c=f(m.Create),b=f(!1),a=f({});M(()=>{x.path.endsWith("/edit")&&(c.value=m.Edit,C(x.params.identifier))});const C=async v=>{const{data:s}=await y.get(`/api/reports/${v}`);r.value=s.data},O=async()=>{b.value=!0;try{c.value===m.Create?await U():await R(),z.fire()}catch(v){a.value=v.response.data.errors??{}}b.value=!1},U=async()=>{await y.post("/api/reports",r.value),N()},R=async()=>{await y.patch(`/api/reports/${r.value.id}`,r.value),g()},N=()=>{r.value={username:"jasperadmin",password:"jasperadmin"},a.value={}},g=()=>{V("close"),P.back()};return(v,s)=>{const j=$("maska");return o(),h(T,null,{header:w(()=>[k(l(c.value===_(m).Create?"Create New Report":"Edit Report"),1)]),body:w(()=>[e("form",{id:"form",onSubmit:A(O,["prevent","stop"])},[e("div",L,[Q,n(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.value.identifier=t),"data-maska":"X","data-maska-tokens":"X:[0-9a-zA-Z]:multiple",class:i(["flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("identifier")}])},null,2),[[u,r.value.identifier],[j]]),a.value.hasOwnProperty("identifier")?(o(),p("p",W,l(a.value.identifier[0]),1)):d("",!0)]),e("div",Z,[q,n(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>r.value.name=t),class:i(["flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("name")}])},null,2),[[u,r.value.name]]),a.value.hasOwnProperty("name")?(o(),p("p",G,l(a.value.name[0]),1)):d("",!0)]),e("div",H,[J,n(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>r.value.url=t),class:i(["flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("url")}])},null,2),[[u,r.value.url]]),a.value.hasOwnProperty("url")?(o(),p("p",K,l(a.value.url[0]),1)):d("",!0)]),e("div",Y,[ee,n(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>r.value.username=t),class:i(["flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("username")}])},null,2),[[u,r.value.username]]),a.value.hasOwnProperty("username")?(o(),p("p",re,l(a.value.username[0]),1)):d("",!0)]),e("div",ae,[se,n(e("input",{type:"password","onUpdate:modelValue":s[4]||(s[4]=t=>r.value.password=t),class:i(["flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500",{"!border-red-500":a.value.hasOwnProperty("password")}])},null,2),[[u,r.value.password]]),a.value.hasOwnProperty("password")?(o(),p("p",te,l(a.value.password[0]),1)):d("",!0)])],40,X)]),footer:w(()=>[e("button",{class:"mr-2 btn-blue",disabled:b.value,form:"form"},[D(F,{"is-loading":b.value},{default:w(()=>[k("Save")]),_:1},8,["is-loading"])],8,oe),e("button",{onClick:g,class:"btn-gray"},"Cancel"),c.value===_(m).Edit?(o(),h(_(I),{key:0,modelValue:r.value.isActive,"onUpdate:modelValue":s[5]||(s[5]=t=>r.value.isActive=t),class:"toggle:off:red ml-auto"},null,8,["modelValue"])):d("",!0)]),_:1})}}});export{ie as default};
