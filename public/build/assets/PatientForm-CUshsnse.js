import{d as G,e as f,u as R,x as W,Q as w,U as A,o as d,R as L,w as y,k as U,t as u,g as p,b as e,c as v,a as C,i as c,h as o,V as k,n,v as r,W as m,f as z,_ as Q,a4 as j,m as q,l as H,$ as J}from"./main-DNdNUUJ7.js";import{F as M}from"./formMode-Bz--3d4P.js";import{G as b}from"./gender-2EqFEEKX.js";import{_ as K}from"./BranchSelect.vue_vue_type_script_setup_true_lang-BebEpNal.js";import{u as X}from"./phoneNumberValidation-C7c_pWlr.js";import"./multiselect-K4eUN8Nz.js";const Z={class:"grid grid-cols-12 gap-4"},ee={key:0,class:"relative col-span-12"},ae={class:"relative col-span-4"},te={class:"flex"},se=e("option",{value:"Mr."},"Mr.",-1),le=e("option",{value:"Ms."},"Ms.",-1),oe=[se,le],ne={key:0,class:"text-sm text-red-500"},re={key:1,class:"text-sm text-red-500"},ie={class:"relative col-span-3"},de=["value"],ue=["value"],pe={key:0,class:"text-sm text-red-500"},ve={class:"relative col-span-5"},ce={class:"flex items-center"},me={class:"relative"},be={class:"relative"},he={class:"relative"},_e={key:0,class:"text-sm text-red-500"},fe={class:"relative col-span-4"},ye={key:0,class:"text-sm text-red-500"},Me={class:"relative col-span-4"},xe=e("label",{class:"label"},"Email",-1),ge={class:"relative col-span-4"},we=e("label",{class:"label"},"Address",-1),Ne={class:"relative col-span-6"},Ve=e("label",{class:"label"},"National ID Number",-1),Pe={class:"relative col-span-6"},Ue=e("label",{class:"label"},"Passport Number",-1),Ce={class:"relative col-span-6"},ke=e("label",{class:"label"},"Travel Certificate Number",-1),Oe={class:"relative col-span-6"},Ie=e("label",{class:"label"},"Lab Card Number",-1),Ye={class:"relative col-span-12"},Se={class:"flex items-center gap-1 gap-5 input peer"},$e={class:"flex items-center gap-1"},De=e("span",null,"None",-1),Fe={class:"flex items-center gap-1"},Ee=e("span",null,"SMS",-1),Te={class:"flex items-center gap-1"},Be=e("span",null,"Whatsapp",-1),Ge={class:"flex items-center gap-1"},Re=e("span",null,"Telegram",-1),We={class:"flex items-center gap-1"},Ae=e("span",null,"Viber",-1),Le=e("label",{class:"label"},"Contact Method",-1),ze=["disabled"],Ze=G({__name:"PatientForm",emits:["close"],setup(Qe,{emit:O}){const I=O,N=q(),Y=H(),a=f({contactMethod:"none"}),x=f(M.Create),h=f(!1),l=f({}),g=R().user.branches,{isValidPhoneNumber:V}=X();W(()=>{g.length===1&&(a.value.branchId=g[0].id),N.path.endsWith("/edit")&&(x.value=M.Edit,D(N.params.id))});const S=i=>{i==="Mr."&&(a.value.gender=b.Male),["Mrs.","Ms.","Miss"].includes(i)&&(a.value.gender=b.Female)},$=i=>{i===b.Male?a.value.initials="Mr.":a.value.initials="Ms."},D=async i=>{const{data:t}=await w.get(`/api/patients/${i}`);a.value=t.data},F=async()=>{h.value=!0;try{x.value===M.Create?await E():await T(),l.value={},J.fire()}catch(i){l.value=i.response.data.errors??{}}h.value=!1},E=async()=>{await w.post("/api/patients",a.value),B()},T=async()=>{await w.patch(`/api/patients/${a.value.id}`,a.value),P()},B=()=>{a.value={branchId:a.value.branchId,contactMethod:"none"},l.value=[]},P=()=>{I("close"),Y.back()};return(i,t)=>{const _=A("maska");return d(),L(j,{"modal-class":"!w-[60rem]"},{header:y(()=>[U(u(x.value===p(M).Create?"Create New Patient":"Edit Patient"),1)]),body:y(()=>[e("form",{id:"form",onSubmit:z(F,["prevent","stop"])},[e("div",Z,[p(g).length>1?(d(),v("div",ee,[C(K,{modelValue:a.value.branchId,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.branchId=s),error:l.value.branchId},null,8,["modelValue","error"])])):c("",!0),e("div",ae,[e("div",te,[o(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.initials=s),onChange:t[2]||(t[2]=s=>S(a.value.initials)),class:n(["input w-auto !rounded-e-none border-e",{"border-red-500":l.value.hasOwnProperty("initials")}])},oe,34),[[k,a.value.initials]]),o(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.name=s),class:n(["input !rounded-s-none border-s",{"border-red-500":l.value.hasOwnProperty("name")}]),placeholder:"Patient's name"},null,2),[[r,a.value.name]])]),l.value.hasOwnProperty("initials")?(d(),v("p",ne,u(l.value.initials[0]),1)):c("",!0),l.value.hasOwnProperty("name")?(d(),v("p",re,u(l.value.name[0]),1)):c("",!0)]),e("div",ie,[o(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.gender=s),onChange:t[5]||(t[5]=s=>$(a.value.gender)),class:n(["input peer",{"border-red-500":l.value.hasOwnProperty("initials")}])},[e("option",{value:p(b).Male},"Male",8,de),e("option",{value:p(b).Female},"Female",8,ue)],34),[[k,a.value.gender]]),e("label",{class:n(["label",{"text-red-500":l.value.hasOwnProperty("gender")}])},"Gender",2),l.value.hasOwnProperty("gender")?(d(),v("p",pe,u(l.value.gender[0]),1)):c("",!0)]),e("div",ve,[e("div",ce,[e("div",me,[o(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.birthdateYear=s),"data-maska":"####",class:n(["input peer !rounded-e-none border-e",{"border-red-500":l.value.hasOwnProperty("birthdateYear")}])},null,2),[[r,a.value.birthdateYear],[_]]),e("label",{class:n(["label",{"text-red-500":l.value.hasOwnProperty("birthdateYear")}])},"Year",2)]),e("div",be,[o(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>a.value.birthdateMonth=s),"data-maska":"##",class:n(["input peer !rounded-s-none !rounded-e-none border-x",{"border-red-500":l.value.hasOwnProperty("birthdateYear")}])},null,2),[[r,a.value.birthdateMonth],[_]]),e("label",{class:n(["label",{"text-red-500":l.value.hasOwnProperty("birthdateYear")}])},"Month",2)]),e("div",he,[o(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>a.value.birthdateDay=s),"data-maska":"##",class:n(["input peer !rounded-s-none border-s",{"border-red-500":l.value.hasOwnProperty("birthdateYear")}])},null,2),[[r,a.value.birthdateDay],[_]]),e("label",{class:n(["label",{"text-red-500":l.value.hasOwnProperty("birthdateYear")}])},"Day",2)])]),l.value.hasOwnProperty("birthdateYear")?(d(),v("p",_e,u(l.value.birthdateYear[0]),1)):c("",!0)]),e("div",fe,[o(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>a.value.phoneNumber=s),"data-maska":"###########",placeholder:"Ex: 07700000000",class:n(["input peer",{"!border-red-500":l.value.hasOwnProperty("phoneNumber")||!p(V)(a.value.phoneNumber)}])},null,2),[[r,a.value.phoneNumber],[_]]),e("label",{class:n(["label",{"!text-red-500":l.value.hasOwnProperty("phoneNumber")||!p(V)(a.value.phoneNumber)}])},"Phone Number",2),l.value.hasOwnProperty("phoneNumber")?(d(),v("p",ye,u(l.value.phoneNumber[0]),1)):c("",!0)]),e("div",Me,[o(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>a.value.email=s),class:"input peer"},null,512),[[r,a.value.email]]),xe]),e("div",ge,[o(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>a.value.address=s),class:"input peer"},null,512),[[r,a.value.address]]),we]),e("div",Ne,[o(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>a.value.nationalIdNumber=s),class:"input peer"},null,512),[[r,a.value.nationalIdNumber]]),Ve]),e("div",Pe,[o(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>a.value.passportNumber=s),class:"input peer"},null,512),[[r,a.value.passportNumber]]),Ue]),e("div",Ce,[o(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>a.value.travelCertificateNumber=s),class:"input peer"},null,512),[[r,a.value.travelCertificateNumber]]),ke]),e("div",Oe,[o(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>a.value.labCardNumber=s),class:"input peer"},null,512),[[r,a.value.labCardNumber]]),Ie]),e("div",Ye,[e("div",Se,[e("label",$e,[o(e("input",{type:"radio",value:"none","onUpdate:modelValue":t[16]||(t[16]=s=>a.value.contactMethod=s)},null,512),[[m,a.value.contactMethod]]),De]),e("label",Fe,[o(e("input",{type:"radio",value:"sms","onUpdate:modelValue":t[17]||(t[17]=s=>a.value.contactMethod=s)},null,512),[[m,a.value.contactMethod]]),Ee]),e("label",Te,[o(e("input",{type:"radio",value:"whatsapp","onUpdate:modelValue":t[18]||(t[18]=s=>a.value.contactMethod=s)},null,512),[[m,a.value.contactMethod]]),Be]),e("label",Ge,[o(e("input",{type:"radio",value:"telegram","onUpdate:modelValue":t[19]||(t[19]=s=>a.value.contactMethod=s)},null,512),[[m,a.value.contactMethod]]),Re]),e("label",We,[o(e("input",{type:"radio",value:"viber","onUpdate:modelValue":t[20]||(t[20]=s=>a.value.contactMethod=s)},null,512),[[m,a.value.contactMethod]]),Ae])]),Le])])],32)]),footer:y(()=>[e("button",{class:"me-2 btn-blue",disabled:h.value,form:"form"},[C(Q,{"is-loading":h.value},{default:y(()=>[U("Save")]),_:1},8,["is-loading"])],8,ze),e("button",{onClick:P,class:"btn-gray"},"Cancel")]),_:1})}}});export{Ze as default};
