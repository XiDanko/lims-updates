import{d as L,e as d,x as B,y as z,o as v,c as h,a as C,b as e,h as b,v as $,a0 as N,t as s,g as t,V as F,w as M,p as n,af as A,Q as H,U as K,k as Q,i as k,F as P,a1 as T,l as W,n as S,f as U,a2 as V,a3 as I,T as Y}from"./main-BgbWFIXK.js";import{M as j}from"./Master-Bb3753-s.js";import{_ as q}from"./Paginator.vue_vue_type_script_setup_true_lang-CkZcUYNX.js";import{u as E}from"./urlQueryManager-CZwFgJ7t.js";import{i as O}from"./index.es-Bi00NAuK.js";import{d as G}from"./datepickerPresets-DMjR3aNY.js";import{_ as J}from"./BranchFilter.vue_vue_type_script_setup_true_lang-Cg0zFa3A.js";import{A as X}from"./ActivityLogSidebar-DZ3mPV78.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./multiselect-DeMhawmc.js";const Z={class:"flex flex-wrap items-center justify-end gap-2"},ee={class:"relative flex-1 min-w-[11rem]"},te={class:"label"},se={class:"relative flex-1 min-w-[11rem]"},oe={class:"label"},ae={class:"relative flex-1 min-w-[11rem]"},ne={class:"label"},le={class:"relative flex-1 min-w-[11rem]"},re={class:"label"},ie={class:"relative flex-1"},ue={value:""},ce=["value"],de=["value"],me={class:"label"},ve={class:"relative flex-1 min-w-[14rem]"},he={class:"label"},pe=L({__name:"PremaritalConsultationsFilter",emits:["change"],setup(D,{emit:R}){const f=R,u=new URLSearchParams(location.search),p=d(""),_=d(""),g=d(""),m=d(""),y=d(""),w=d(""),c=d([null,null]);B(()=>x());const i=z(()=>c.value[0]===null||c.value[1]===null?"":`${c.value[0]}~${c.value[1]}`),x=()=>{_.value=u.get("visitNumber")??"",p.value=u.get("branchId")??"",g.value=u.get("status")??"",m.value=u.get("husbandName")??"",y.value=u.get("wifeName")??"",w.value=u.get("phoneNumber")??"",u.get("dateRange")&&(c.value=u.get("dateRange").split("~"))},l=()=>{let o=`branchId=${p.value}&visitNumber=${_.value}&husbandName=${m.value}&wifeName=${y.value}&phoneNumber=${w.value}&status=${g.value}&dateRange=${i.value}&page=1`;f("change",o)};return(o,a)=>(v(),h("div",Z,[C(J,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=r=>p.value=r),onChange:l},null,8,["modelValue"]),e("div",ee,[b(e("input",{"onUpdate:modelValue":a[1]||(a[1]=r=>_.value=r),onKeyup:N(l,["enter"]),type:"text",class:"input-sm peer"},null,544),[[$,_.value]]),e("label",te,s(t(n)("Registration Number")),1)]),e("div",se,[b(e("input",{"onUpdate:modelValue":a[2]||(a[2]=r=>m.value=r),onKeyup:N(l,["enter"]),type:"text",class:"input-sm peer"},null,544),[[$,m.value]]),e("label",oe,s(t(n)("Husband Name")),1)]),e("div",ae,[b(e("input",{"onUpdate:modelValue":a[3]||(a[3]=r=>y.value=r),onKeyup:N(l,["enter"]),type:"text",class:"input-sm peer"},null,544),[[$,y.value]]),e("label",ne,s(t(n)("Wife Name")),1)]),e("div",le,[b(e("input",{"onUpdate:modelValue":a[4]||(a[4]=r=>w.value=r),onKeyup:N(l,["enter"]),type:"text",class:"input-sm peer"},null,544),[[$,w.value]]),e("label",re,s(t(n)("Phone Number")),1)]),e("div",ie,[b(e("select",{"onUpdate:modelValue":a[5]||(a[5]=r=>g.value=r),onChange:l,class:"input-sm peer"},[e("option",ue,s(t(n)("All")),1),e("option",{value:t(A).Registered},s(t(n)("Registered")),9,ce),e("option",{value:t(A).Consulted},s(t(n)("Consulted")),9,de)],544),[[F,g.value]]),e("label",me,s(t(n)("Status")),1)]),e("div",ve,[C(t(O),{range:"",lang:{formatLocale:{firstDayOfWeek:6}},type:"date","value-type":"format",format:"YYYY-MM-DD",shortcuts:t(G),value:c.value,"onUpdate:value":a[6]||(a[6]=r=>c.value=r),onChange:l,class:"w-full peer","input-class":"input-sm pt-0.5"},{"icon-calendar":M(()=>[]),_:1},8,["shortcuts","value"]),e("label",he,s(t(n)("Date")),1)])]))}}),_e={class:"mb-5 flex items-start gap-1"},ge={class:"pe-1 h-[calc(100vh-15.7rem)] overflow-y-auto"},be={class:"w-full"},fe={class:"sticky top-0 z-10 ltr:text-left rtl:text-right"},ye={class:"bg-gray-600 p-2 font-semibold text-white rounded-ss"},we={class:"bg-gray-600 p-2 font-semibold text-white"},xe={class:"bg-gray-600 p-2 font-semibold text-white"},Ce={class:"bg-gray-600 p-2 font-semibold text-white"},$e={class:"bg-gray-600 p-2 font-semibold text-white"},Ne={key:0,class:"bg-gray-600 p-2 font-semibold text-white rounded-se"},ke=["onClick"],Ae={class:"border border-gray-200 p-1"},Re={class:"border border-gray-200 p-1"},Me={class:"border border-gray-200 p-1"},Pe={class:"border border-gray-200 p-1"},Se={key:0,class:"border border-gray-200 px-2 py-1 text-center"},Ue={class:"flex justify-center gap-2"},Ve=["onClick"],Ie=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"h-5 w-5"},[e("path",{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"})],-1),Le=[Ie],Be=["onClick"],De=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"h-5 w-5"},[e("path",{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"})],-1),ze=[De],Oe=L({__name:"PremaritalConsultations",setup(D){const{updateUrlQuery:R}=E(),{hasPermissionTo:f,hasAnyPermission:u}=Y(),p=d([]),_=d({}),g=W();B(()=>m(location.search));const m=async i=>{const x=await R(i),{data:l}=await H.get(`/api/premarital/consultations?${x}`);p.value=l.data,_.value=l.meta},y=i=>i===A.Registered?"border-s-gray-300":"border-s-emerald-500",w=i=>i===A.Registered?"hover:bg-gray-300 hover:text-black":"hover:bg-emerald-500 hover:text-white",c=i=>{i.husbandConsultationId===null&&f("PremaritalConsultation.create")?g.push(`/premarital/consultations/${i.id}/create`):f("PremaritalConsultation.update")&&g.push(`/premarital/consultations/${i.id}/edit`)};return(i,x)=>{const l=K("tip");return v(),h(P,null,[C(j,null,{header:M(()=>[Q(s(t(n)("Premarital Consultations")),1)]),body:M(()=>[e("div",_e,[C(pe,{onChange:m})]),e("section",ge,[e("table",be,[e("thead",null,[e("tr",fe,[e("th",ye,s(t(n)("No.")),1),e("th",we,s(t(n)("Husband Name")),1),e("th",xe,s(t(n)("Wife Name")),1),e("th",Ce,s(t(n)("Date")),1),e("th",$e,s(t(n)("Branch")),1),t(u)("ActivityLog.list")?(v(),h("th",Ne)):k("",!0)])]),e("tbody",null,[(v(!0),h(P,null,T(p.value,o=>(v(),h("tr",{class:S(["cursor-pointer transition group even:bg-gray-100",w(o.status)]),onClick:a=>c(o)},[e("td",{class:S(["border border-gray-200 p-1 border-s-[5px]",y(o.status)])},s(o.number),3),e("td",Ae,s(o.husbandInformation.name),1),e("td",Re,s(o.wifeInformation.name),1),e("td",Me,s(o.date),1),e("td",Pe,s(o.branch.name),1),t(u)("ActivityLog.list")?(v(),h("td",Se,[e("div",Ue,[t(f)("ActivityLog.list")&&o.husbandConsultationId?b((v(),h("button",{key:0,onClick:U(a=>t(V).emit(t(I).Show,o.husbandConsultationId),["stop"]),class:"cursor-pointer text-gray-600 group-hover:text-white"},Le,8,Ve)),[[l,t(n)("View Activities (Husband)")]]):k("",!0),t(f)("ActivityLog.list")&&o.wifeConsultationId?b((v(),h("button",{key:1,onClick:U(a=>t(V).emit(t(I).Show,o.wifeConsultationId),["stop"]),class:"cursor-pointer text-gray-600 group-hover:text-white"},ze,8,Be)),[[l,t(n)("View Activities (Wife)")]]):k("",!0)])])):k("",!0)],10,ke))),256))])])])]),_:1}),C(q,{data:_.value,onChange:x[0]||(x[0]=o=>m(`page=${o}`)),class:"mt-3"},null,8,["data"]),C(X)],64)}}});export{Oe as default};
