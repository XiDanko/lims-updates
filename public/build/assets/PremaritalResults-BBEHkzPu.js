import{d as T,e as d,x as V,y as B,o as $,c as w,a as f,b as e,h as g,v as y,a0 as x,t as s,g as a,V as z,w as U,p as o,af as N,Q as A,k as F,F as k,a1 as I,l as K,n as M,T as Q}from"./main-BgbWFIXK.js";import{M as S}from"./Master-Bb3753-s.js";import{_ as Y}from"./Paginator.vue_vue_type_script_setup_true_lang-CkZcUYNX.js";import{u as L}from"./urlQueryManager-CZwFgJ7t.js";import{i as W}from"./index.es-Bi00NAuK.js";import{d as q}from"./datepickerPresets-DMjR3aNY.js";import{_ as H}from"./BranchFilter.vue_vue_type_script_setup_true_lang-Cg0zFa3A.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./multiselect-DeMhawmc.js";const j={class:"flex flex-wrap items-center justify-end gap-2"},E={class:"relative flex-1 min-w-[11rem]"},O={class:"label"},G={class:"relative flex-1 min-w-[11rem]"},J={class:"label"},X={class:"relative flex-1 min-w-[11rem]"},Z={class:"label"},ee={class:"relative flex-1 min-w-[11rem]"},te={class:"label"},se={class:"relative flex-1"},ae={value:""},oe=["value"],le=["value"],ne={class:"label"},re={class:"relative flex-1 min-w-[14rem]"},ue={class:"label"},ie=T({__name:"PremaritalResultsFilter",emits:["change"],setup(D,{emit:R}){const C=R,u=new URLSearchParams(location.search),m=d(""),p=d(""),v=d(""),c=d(""),h=d(""),_=d(""),i=d([null,null]);V(()=>b());const r=B(()=>i.value[0]===null||i.value[1]===null?"":`${i.value[0]}~${i.value[1]}`),b=()=>{m.value=u.get("branchId")??"",p.value=u.get("visitNumber")??"",v.value=u.get("status")??"",c.value=u.get("husbandName")??"",h.value=u.get("wifeName")??"",_.value=u.get("phoneNumber")??"",u.get("dateRange")&&(i.value=u.get("dateRange").split("~"))},t=()=>{let P=`branchId=${m.value}&visitNumber=${p.value}&husbandName=${c.value}&wifeName=${h.value}&phoneNumber=${_.value}&status=${v.value}&dateRange=${r.value}&page=1`;C("change",P)};return(P,l)=>($(),w("div",j,[f(H,{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=n=>m.value=n),onChange:t},null,8,["modelValue"]),e("div",E,[g(e("input",{"onUpdate:modelValue":l[1]||(l[1]=n=>p.value=n),onKeyup:x(t,["enter"]),type:"text",class:"input-sm peer"},null,544),[[y,p.value]]),e("label",O,s(a(o)("Registration Number")),1)]),e("div",G,[g(e("input",{"onUpdate:modelValue":l[2]||(l[2]=n=>c.value=n),onKeyup:x(t,["enter"]),type:"text",class:"input-sm peer"},null,544),[[y,c.value]]),e("label",J,s(a(o)("Husband Name")),1)]),e("div",X,[g(e("input",{"onUpdate:modelValue":l[3]||(l[3]=n=>h.value=n),onKeyup:x(t,["enter"]),type:"text",class:"input-sm peer"},null,544),[[y,h.value]]),e("label",Z,s(a(o)("Wife Name")),1)]),e("div",ee,[g(e("input",{"onUpdate:modelValue":l[4]||(l[4]=n=>_.value=n),onKeyup:x(t,["enter"]),type:"text",class:"input-sm peer"},null,544),[[y,_.value]]),e("label",te,s(a(o)("Phone Number")),1)]),e("div",se,[g(e("select",{"onUpdate:modelValue":l[5]||(l[5]=n=>v.value=n),onChange:t,class:"input-sm peer"},[e("option",ae,s(a(o)("All")),1),e("option",{value:a(N).Tested},s(a(o)("Tested")),9,oe),e("option",{value:a(N).Authorized},s(a(o)("Authorized")),9,le)],544),[[z,v.value]]),e("label",ne,s(a(o)("Status")),1)]),e("div",re,[f(a(W),{range:"",lang:{formatLocale:{firstDayOfWeek:6}},type:"date","value-type":"format",format:"YYYY-MM-DD",shortcuts:a(q),value:i.value,"onUpdate:value":l[6]||(l[6]=n=>i.value=n),onChange:t,class:"w-full peer","input-class":"input-sm pt-0.5"},{"icon-calendar":U(()=>[]),_:1},8,["shortcuts","value"]),e("label",ue,s(a(o)("Date")),1)])]))}}),de={class:"mb-5 flex items-start gap-1"},ce={class:"pe-1 h-[calc(100vh-15.7rem)] overflow-y-auto"},me={class:"w-full"},pe={class:"sticky top-0 z-10 ltr:text-left rtl:text-right"},ve={class:"bg-gray-600 p-2 font-semibold text-white rounded-ss"},he={class:"bg-gray-600 p-2 font-semibold text-white"},_e={class:"bg-gray-600 p-2 font-semibold text-white"},be={class:"bg-gray-600 p-2 font-semibold text-white"},ge={class:"bg-gray-600 p-2 font-semibold text-white rounded-se"},fe=["onClick"],ye={class:"border border-gray-200 p-1"},xe={class:"border border-gray-200 p-1"},$e={class:"border border-gray-200 p-1"},we={class:"border border-gray-200 p-1"},De=T({__name:"PremaritalResults",setup(D){const{updateUrlQuery:R}=L(),{hasPermissionTo:C,hasAnyPermission:u}=Q(),m=d([]),p=d({}),v=K();V(()=>c(location.search));const c=async r=>{const b=await R(r),{data:t}=await A.get(`/api/premarital/results?${b}`);m.value=t.data,p.value=t.meta},h=r=>r===N.Tested?"border-s-gray-300":"border-s-emerald-500",_=r=>r===N.Tested?"hover:bg-gray-300 hover:text-black":"hover:bg-emerald-500 hover:text-white",i=r=>{C("PremaritalResult.show")&&v.push(`/premarital/results/${r}`)};return(r,b)=>($(),w(k,null,[f(S,null,{header:U(()=>[F(s(a(o)("Premarital Results")),1)]),body:U(()=>[e("div",de,[f(ie,{onChange:c})]),e("section",ce,[e("table",me,[e("thead",null,[e("tr",pe,[e("th",ve,s(a(o)("No.")),1),e("th",he,s(a(o)("Husband Name")),1),e("th",_e,s(a(o)("Wife Name")),1),e("th",be,s(a(o)("Date")),1),e("th",ge,s(a(o)("Branch")),1)])]),e("tbody",null,[($(!0),w(k,null,I(m.value,t=>($(),w("tr",{class:M(["cursor-pointer transition group even:bg-gray-100",_(t.status)]),onClick:P=>i(t.id)},[e("td",{class:M(["border border-gray-200 p-1 border-s-[5px]",h(t.status)])},s(t.number),3),e("td",ye,s(t.husbandInformation.name),1),e("td",xe,s(t.wifeInformation.name),1),e("td",$e,s(t.date),1),e("td",we,s(t.branch.name),1)],10,fe))),256))])])])]),_:1}),f(Y,{data:p.value,onChange:b[0]||(b[0]=t=>c(`page=${t}`)),class:"mt-3"},null,8,["data"])],64))}});export{De as default};
