import{d as N,e as n,x as V,Q as u,o as p,R as $,w as i,k as v,t as f,g as B,b as s,h as M,v as S,n as _,c as E,i as F,f as O,a as R,_ as T,a4 as D,m as z,l as I,$ as L}from"./main-DNdNUUJ7.js";import{F as l}from"./formMode-Bz--3d4P.js";const Q={class:"relative"},U={key:0,class:"text-sm text-red-500"},W=["disabled"],G=N({__name:"PermissionForm",emits:["close"],setup(j,{emit:b}){const h=b,d=z(),w=I(),e=n({}),c=n(l.Create),t=n(!1),a=n({});V(()=>{d.path.endsWith("/edit")&&(c.value=l.Edit,y(d.params.id))});const y=async o=>{const{data:r}=await u.get(`/api/permissions/${o}`);e.value=r.data},g=async()=>{t.value=!0;try{c.value===l.Create?await x():await C(),a.value={},L.fire()}catch(o){a.value=o.response.data.errors??{}}t.value=!1},x=async()=>{await u.post("/api/permissions",e.value),k()},C=async()=>{await u.patch(`/api/permissions/${e.value.id}`,e.value),m()},k=()=>{e.value={},a.value=[]},m=()=>{h("close"),w.back()};return(o,r)=>(p(),$(D,null,{header:i(()=>[v(f(c.value===B(l).Create?"Create New Permission":"Edit Permission"),1)]),body:i(()=>[s("form",{id:"form",onSubmit:O(g,["prevent","stop"]),class:"grid grid-cols-1 gap-4"},[s("div",Q,[M(s("input",{"onUpdate:modelValue":r[0]||(r[0]=P=>e.value.name=P),class:_(["input peer",{"border-red-500":a.value.hasOwnProperty("name")}])},null,2),[[S,e.value.name]]),s("label",{class:_(["label",{"text-red-500":a.value.hasOwnProperty("name")}])},"Name",2),a.value.hasOwnProperty("name")?(p(),E("p",U,f(a.value.name[0]),1)):F("",!0)])],32)]),footer:i(()=>[s("button",{class:"me-2 btn-blue",disabled:t.value,form:"form"},[R(T,{"is-loading":t.value},{default:i(()=>[v("Save")]),_:1},8,["is-loading"])],8,W),s("button",{onClick:m,class:"btn-gray"},"Cancel")]),_:1}))}});export{G as default};
