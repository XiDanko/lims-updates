import{d as P,f as $,e as D,g as c,x as F,Q as m,V as R,o as u,R as h,w as i,m as y,t as p,i as v,b as a,j as w,v as g,n as x,c as k,k as b,h as T,a as U,_ as A,a5 as j,a0 as z}from"./main-0c5e983d.js";import{b as I}from"./toggle-f29ee038.js";import{F as r}from"./formMode-f60a729f.js";const L=["onSubmit"],Q={class:"mb-3 flex flex-wrap items-center"},W=a("span",{class:"w-24 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Code",-1),q={key:0,class:"ml-24 w-full text-sm text-red-500"},G={class:"flex flex-wrap items-center"},H=a("span",{class:"w-24 rounded-l border border-r-0 border-gray-300 bg-gray-100 p-2"},"Name",-1),J={key:0,class:"ml-24 w-full text-sm text-red-500"},K=["disabled"],ae=P({__name:"BranchForm",emits:["close"],setup(X,{emit:C}){const f=$(),V=D(),e=c({}),l=c(r.Create),n=c(!1),s=c([]);F(()=>{f.path.endsWith("/edit")&&(l.value=r.Edit,B(f.params.id))});const B=async d=>{const{data:t}=await m.get(`/api/branches/${d}`);e.value=t.data},N=async()=>{n.value=!0;try{l.value===r.Create?await S():await E(),z.fire()}catch(d){s.value=d.response.data.errors??{}}n.value=!1},S=async()=>{await m.post("/api/branches",e.value),M()},E=async()=>{await m.patch(`/api/branches/${e.value.id}`,e.value),_()},M=()=>{e.value={},s.value=[]},_=()=>{C("close"),V.back()};return(d,t)=>{const O=R("maska");return u(),h(j,null,{header:i(()=>[y(p(l.value===v(r).Create?"Create New Branch":"Edit Branch"),1)]),body:i(()=>[a("form",{id:"form",onSubmit:T(N,["prevent","stop"])},[a("div",Q,[W,w(a("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.code=o),"data-maska":"##",class:x(["flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500",{"!border-red-500":s.value.hasOwnProperty("code")}])},null,2),[[g,e.value.code],[O]]),s.value.hasOwnProperty("code")?(u(),k("p",q,p(s.value.code[0]),1)):b("",!0)]),a("div",G,[H,w(a("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.name=o),class:x(["flex-1 rounded-r border border-gray-300 p-2 focus:border-blue-500",{"!border-red-500":s.value.hasOwnProperty("name")}])},null,2),[[g,e.value.name]]),s.value.hasOwnProperty("name")?(u(),k("p",J,p(s.value.name[0]),1)):b("",!0)])],40,L)]),footer:i(()=>[a("button",{class:"mr-2 btn-blue",disabled:n.value,form:"form"},[U(A,{"is-loading":n.value},{default:i(()=>[y("Save")]),_:1},8,["is-loading"])],8,K),a("button",{onClick:_,class:"btn-gray"},"Cancel"),l.value===v(r).Edit?(u(),h(v(I),{key:0,modelValue:e.value.isActive,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.isActive=o),class:"toggle:off:red ml-auto"},null,8,["modelValue"])):b("",!0)]),_:1})}}});export{ae as default};
