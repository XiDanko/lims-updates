import{d as P,X as T,e as v,u as U,x as C,Q as g,U as A,o,c as r,a as i,w as _,b as e,g as n,h,i as p,v as w,n as m,t as x,_ as B,k as M,f as O,F as $,a2 as z,a3 as I,T as L,$ as N}from"./main-DNdNUUJ7.js";import{M as D}from"./Master-b_S4sXaO.js";import{b as E}from"./toggle-B4ffD-ge.js";import{A as F}from"./ActivityLogSidebar-DQgEnTl4.js";import{_ as j}from"./BranchSelect.vue_vue_type_script_setup_true_lang-BebEpNal.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./multiselect-K4eUN8Nz.js";const H={class:"flex items-center gap-3"},Q=e("h1",null,"Premarital Portal Settings",-1),X=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"h-5 w-5"},[e("path",{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"})],-1),q=[X],G={class:"h-[calc(100vh-8.6rem)] overflow-y-auto flex flex-col justify-between pt-2 pe-1"},J={class:"grid grid-cols-1 gap-4"},K={key:0,class:"relative"},R={class:"relative"},W=e("label",{class:"label"},"Enabled",-1),Y={class:"relative"},Z={key:0,class:"text-sm text-red-500"},ee={class:"relative"},se={key:0,class:"text-sm text-red-500"},te={class:"relative"},ae={class:"mt-3 flex items-center"},le=["disabled"],pe=P({__name:"PremaritalPortalSettings",setup(oe){const y=T(),{hasPermissionTo:S}=L(),c=v(!1),a=v({}),b=U().user.branches,d=v(null),s=v({});C(()=>{d.value=b[0].id,f()});const f=async()=>{const{data:u}=await g.get(`/api/settings/premarital-portal?branchId=${d.value}`);a.value=u.data},V=async()=>{c.value=!0;try{await g.patch("/api/settings/premarital-portal",a.value),y.fetch(),s.value={},N.fire()}catch(u){s.value=u.response.data.errors??{}}c.value=!1};return(u,t)=>{const k=A("tip");return o(),r($,null,[i(D,null,{header:_(()=>[e("div",H,[Q,n(S)("ActivityLog.list")?h((o(),r("button",{key:0,onClick:t[0]||(t[0]=l=>n(z).emit(n(I).Show,a.value.id)),class:"cursor-pointer"},q)),[[k,"View Activities"]]):p("",!0)])]),body:_(()=>[e("form",{id:"form",onSubmit:O(V,["prevent"])},[e("div",G,[e("div",J,[n(b).length>1?(o(),r("div",K,[i(j,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=l=>d.value=l),error:s.value.branchId,onSelect:f},null,8,["modelValue","error"])])):p("",!0),e("div",R,[i(n(E),{modelValue:a.value.enabled,"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.enabled=l),class:"input peer pt-2.5"},null,8,["modelValue"]),W]),e("div",Y,[h(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>a.value.baseUrl=l),class:m(["input peer",{"border-red-500":s.value.hasOwnProperty("baseUrl")}])},null,2),[[w,a.value.baseUrl]]),e("label",{class:m(["label",{"text-red-500":s.value.hasOwnProperty("baseUrl")}])},"Base Url",2),s.value.hasOwnProperty("baseUrl")?(o(),r("p",Z,x(s.value.baseUrl[0]),1)):p("",!0)]),e("div",ee,[h(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>a.value.accessToken=l),class:m(["input peer",{"border-red-500":s.value.hasOwnProperty("accessToken")}])},null,2),[[w,a.value.accessToken]]),e("label",{class:m(["label",{"text-red-500":s.value.hasOwnProperty("accessToken")}])},"Access Token",2),s.value.hasOwnProperty("accessToken")?(o(),r("p",se,x(s.value.accessToken[0]),1)):p("",!0)])]),e("footer",te,[e("div",ae,[e("button",{class:"me-auto btn-blue",disabled:c.value,form:"form"},[i(B,{"is-loading":c.value},{default:_(()=>[M("Save")]),_:1},8,["is-loading"])],8,le)])])])],32)]),_:1}),i(F)],64)}}});export{pe as default};
