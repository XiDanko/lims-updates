import{aK as W,aL as j,g as M,A as z,d as D,e as A,x as N,a2 as C,a3 as E,Q as F,s as $,o as a,R as G,w as H,c as d,b as l,t as m,F as y,a1 as L,i as b,av as R,p as V,n as q,k as I,a6 as K,a7 as Q}from"./main-DmoZ1fz4.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";function J(e){return W()?(j(e),!0):!1}function O(e){return typeof e=="function"?e():M(e)}const P=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const X=Object.prototype.toString,Y=e=>X.call(e)==="[object Object]",k=()=>{},Z=ee();function ee(){var e,n;return P&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((n=window?.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function g(e){var n;const i=O(e);return(n=i?.$el)!=null?n:i}const T=P?window:void 0;function S(...e){let n,i,o,_;if(typeof e[0]=="string"||Array.isArray(e[0])?([i,o,_]=e,n=T):[n,i,o,_]=e,!n)return k;Array.isArray(i)||(i=[i]),Array.isArray(o)||(o=[o]);const p=[],h=()=>{p.forEach(c=>c()),p.length=0},s=(c,w,t,r)=>(c.addEventListener(w,t,r),()=>c.removeEventListener(w,t,r)),f=z(()=>[g(n),O(_)],([c,w])=>{if(h(),!c)return;const t=Y(w)?{...w}:w;p.push(...i.flatMap(r=>o.map(u=>s(c,r,u,t))))},{immediate:!0,flush:"post"}),v=()=>{f(),h()};return J(v),v}let B=!1;function te(e,n,i={}){const{window:o=T,ignore:_=[],capture:p=!0,detectIframe:h=!1}=i;if(!o)return k;Z&&!B&&(B=!0,Array.from(o.document.body.children).forEach(t=>t.addEventListener("click",k)),o.document.documentElement.addEventListener("click",k));let s=!0;const f=t=>_.some(r=>{if(typeof r=="string")return Array.from(o.document.querySelectorAll(r)).some(u=>u===t.target||t.composedPath().includes(u));{const u=g(r);return u&&(t.target===u||t.composedPath().includes(u))}}),c=[S(o,"click",t=>{const r=g(e);if(!(!r||r===t.target||t.composedPath().includes(r))){if(t.detail===0&&(s=!f(t)),!s){s=!0;return}n(t)}},{passive:!0,capture:p}),S(o,"pointerdown",t=>{const r=g(e);s=!f(t)&&!!(r&&!t.composedPath().includes(r))},{passive:!0}),h&&S(o,"blur",t=>{setTimeout(()=>{var r;const u=g(e);((r=o.document.activeElement)==null?void 0:r.tagName)==="IFRAME"&&!u?.contains(o.document.activeElement)&&n(t)},0)})].filter(Boolean);return()=>c.forEach(t=>t())}const x=e=>(K("data-v-3d34ad00"),e=e(),Q(),e),oe={class:"flex items-center justify-between bg-blue-500 p-5 text-white"},se={class:"text-lg font-semibold"},ne=x(()=>l("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z","clip-rule":"evenodd"},null,-1)),re=[ne],ae={class:"p-2 overflow-y-auto max-h-[calc(100vh-4rem)]"},le={class:"font-semibold"},ie={class:"text-sm text-red-600"},de={key:0},ce={key:1,class:"overflow-hidden rounded"},ue=["onClick"],pe=x(()=>l("span",null,"Data",-1)),fe={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-6 w-6"},_e=x(()=>l("path",{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z","clip-rule":"evenodd"},null,-1)),he=[_e],we={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-6 w-6"},me=x(()=>l("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"},null,-1)),ve=[me],ge={key:0,class:"w-full"},xe={class:"even:bg-gray-100"},ye={class:"whitespace-nowrap border border-gray-200 px-1"},be={key:0,class:"border border-gray-200 px-1"},ke={class:"flex flex-wrap items-center gap-1"},Ae={class:"rounded bg-teal-500 px-1 text-xs font-bold text-white"},Le=["innerHTML"],Se=x(()=>l("hr",{class:"my-2 last-of-type:hidden"},null,-1)),Ce=D({__name:"ActivityLogSidebar",setup(e){const n=A(!1),i=A(null),o=A([]);te(i,p=>n.value=!1),N(()=>{C.on(E.Show,async p=>{if(n.value=!0,!p)return;const{data:h}=await F.get(`/api/activity-log/list?subjectId=${p}`);o.value=h.data})}),$(()=>C.off(E.Show));const _=()=>{o.value=[],n.value=!1};return(p,h)=>(a(),G(R,{name:"slide-fade"},{default:H(()=>[n.value?(a(),d("aside",{key:0,ref_key:"activityLogWrapper",ref:i,class:"fixed inset-y-0 right-0 bg-white shadow-2xl w-[25rem] z-[100]"},[l("header",oe,[l("h1",se,m(M(V)("Activity Log")),1),(a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-6 w-6 cursor-pointer",onClick:_},re))]),l("main",ae,[(a(!0),d(y,null,L(o.value,s=>(a(),d(y,null,[l("div",null,[l("p",null,[l("span",{class:q(["font-semibold text-blue-500",[{"!text-emerald-500":s.event==="created"},{"!text-red-500":s.event==="deleted"}]])},m(s.event.startCase()),3),I(" by "),l("span",le,m(s.causer.name),1),I(" at "),l("span",ie,m(s.date),1)]),s.description?(a(),d("p",de,m(s.description),1)):b("",!0),s.data?(a(),d("div",ce,[l("div",{class:"flex cursor-pointer items-center justify-between bg-gray-600 p-1 text-white",onClick:f=>s.expanded=!s.expanded},[pe,s.expanded?(a(),d("svg",we,ve)):(a(),d("svg",fe,he))],8,ue),s.expanded?(a(),d("table",ge,[(a(!0),d(y,null,L(s.data,(f,v)=>(a(),d("tr",xe,[l("td",ye,m(v.startCase()),1),f instanceof Array?(a(),d("td",be,[l("div",ke,[(a(!0),d(y,null,L(f,c=>(a(),d("span",Ae,m(c),1))),256))])])):(a(),d("td",{key:1,class:"break-all border border-gray-200 px-1",innerHTML:f},null,8,Le))]))),256))])):b("",!0)])):b("",!0)]),Se],64))),256))])],512)):b("",!0)]),_:1}))}}),Be=U(Ce,[["__scopeId","data-v-3d34ad00"]]);export{Be as A};
