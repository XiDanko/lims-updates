import{d as E,e as d,u as M,x as D,Q as _,U as F,o,R as k,w as c,k as N,t as f,g as p,b as a,c as y,a as x,i as m,h as v,v as b,n as w,f as R,_ as T,a4 as z,m as L,l as Q,$ as W}from"./main-DmoZ1fz4.js";import{b as j}from"./toggle-DyRQkDOQ.js";import{F as r}from"./formMode-Bz--3d4P.js";import{_ as q}from"./BranchSelect.vue_vue_type_script_setup_true_lang-D_pdW9WT.js";import"./multiselect-DAhRltj6.js";const G={key:0,class:"relative"},H={class:"relative"},J={key:0,class:"text-sm text-red-500"},K={class:"relative"},X=a("label",{class:"label"},"Phone Number",-1),Y={key:0,class:"text-sm text-red-500"},Z={class:"relative"},ee=a("label",{class:"label"},"Address",-1),ae={class:"relative"},se=a("label",{class:"label"},"Notes",-1),te=["disabled"],de=E({__name:"SupplierForm",emits:["close"],setup(le,{emit:C}){const S=C,g=L(),I=Q(),e=d({}),n=d(r.Create),u=d(!1),t=d({}),h=M().user.branches;D(()=>{h.length===1&&(e.value.branchId=h[0].id),g.path.endsWith("/edit")&&(n.value=r.Edit,U(g.params.id))});const U=async i=>{const{data:s}=await _.get(`/api/suppliers/${i}`);e.value=s.data},P=async()=>{u.value=!0;try{n.value===r.Create?await $():await O(),t.value={},W.fire()}catch(i){t.value=i.response.data.errors??{}}u.value=!1},$=async()=>{await _.post("/api/suppliers",e.value),A()},O=async()=>{await _.patch(`/api/suppliers/${e.value.id}`,e.value),V()},A=()=>{e.value={branchId:e.value.branchId},t.value=[]},V=()=>{S("close"),I.back()};return(i,s)=>{const B=F("maska");return o(),k(z,{"modal-class":"!w-[60rem]"},{header:c(()=>[N(f(n.value===p(r).Create?"Create New Supplier":"Edit Supplier"),1)]),body:c(()=>[a("form",{id:"form",onSubmit:R(P,["prevent","stop"]),class:"grid grid-cols-1 gap-4"},[p(h).length>1?(o(),y("div",G,[x(q,{modelValue:e.value.branchId,"onUpdate:modelValue":s[0]||(s[0]=l=>e.value.branchId=l),error:t.value.branchId},null,8,["modelValue","error"])])):m("",!0),a("div",H,[v(a("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>e.value.name=l),class:w(["input peer",{"border-red-500":t.value.hasOwnProperty("name")}])},null,2),[[b,e.value.name]]),a("label",{class:w(["label",{"text-red-500":t.value.hasOwnProperty("name")}])},"Name",2),t.value.hasOwnProperty("name")?(o(),y("p",J,f(t.value.name[0]),1)):m("",!0)]),a("div",K,[v(a("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>e.value.phoneNumber=l),"data-maska":"###########",class:w(["input peer",{"border-red-500":t.value.hasOwnProperty("phoneNumber")}])},null,2),[[b,e.value.phoneNumber],[B]]),X,t.value.hasOwnProperty("phoneNumber")?(o(),y("p",Y,f(t.value.phoneNumber[0]),1)):m("",!0)]),a("div",Z,[v(a("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>e.value.address=l),class:"input peer"},null,512),[[b,e.value.address]]),ee]),a("div",ae,[v(a("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>e.value.notes=l),class:"input peer"},null,512),[[b,e.value.notes]]),se])],32)]),footer:c(()=>[a("button",{class:"me-2 btn-blue",disabled:u.value,form:"form"},[x(T,{"is-loading":u.value},{default:c(()=>[N("Save")]),_:1},8,["is-loading"])],8,te),a("button",{onClick:V,class:"btn-gray"},"Cancel"),n.value===p(r).Edit?(o(),k(p(j),{key:0,modelValue:e.value.isActive,"onUpdate:modelValue":s[5]||(s[5]=l=>e.value.isActive=l),class:"toggle:off:red ms-auto"},null,8,["modelValue"])):m("",!0)]),_:1})}}});export{de as default};
